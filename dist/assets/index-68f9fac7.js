(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function G(){}const Gn=t=>t;function sn(t,e){for(const n in e)t[n]=e[n];return t}function hi(t){return t()}function Os(){return Object.create(null)}function oe(t){t.forEach(hi)}function Ge(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Su(t){return Object.keys(t).length===0}function Di(t,...e){if(t==null)return G;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function cn(t){let e;return Di(t,n=>e=n)(),e}function Dt(t,e,n){t.$$.on_destroy.push(Di(e,n))}function ve(t,e,n,s){if(t){const o=pi(t,e,n,s);return t[0](o)}}function pi(t,e,n,s){return t[1]&&s?sn(n.ctx.slice(),t[1](s(e))):n.ctx}function we(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],u=Math.max(e.dirty.length,o.length);for(let l=0;l<u;l+=1)i[l]=e.dirty[l]|o[l];return i}return e.dirty|o}return e.dirty}function Ee(t,e,n,s,o,i){if(o){const u=pi(e,n,s,i);t.p(u,o)}}function ye(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Iu(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Rs(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function ju(t,e,n){return t.set(n),e}function Nu(t){return t&&Ge(t.destroy)?t.destroy:G}const gi=typeof window<"u";let bi=gi?()=>window.performance.now():()=>Date.now(),Yn=gi?t=>requestAnimationFrame(t):G;const _t=new Set;function Fi(t){_t.forEach(e=>{e.c(t)||(_t.delete(e),e.f())}),_t.size!==0&&Yn(Fi)}function Ci(t){let e;return _t.size===0&&Yn(Fi),{promise:new Promise(n=>{_t.add(e={c:t,f:n})}),abort(){_t.delete(e)}}}function w(t,e){t.appendChild(e)}function ki(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Lu(t){const e=E("style");return Ou(ki(t),e),e.sheet}function Ou(t,e){return w(t.head||t,e),e.sheet}function v(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function fn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function Ru(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function U(t){return document.createTextNode(t)}function O(){return U(" ")}function ue(){return U("")}function W(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Ln(t){return function(e){return e.preventDefault(),t.call(this,e)}}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ms(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:N(t,s,e[s])}function Mu(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ve(t,e){t.value=e??""}function Ps(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function ie(t,e,n){t.classList[n?"add":"remove"](e)}function Pu(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}class vi{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,s=null){this.e||(this.is_svg?this.e=Ru(n.nodeName):this.e=E(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)v(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}const on=new Map;let un=0;function Uu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function zu(t,e){const n={stylesheet:Lu(e),rules:{}};return on.set(t,n),n}function On(t,e,n,s,o,i,u,l=0){const r=16.666/s;let d=`{
`;for(let p=0;p<=1;p+=r){const F=e+(n-e)*i(p);d+=p*100+`%{${u(F,1-F)}}
`}const f=d+`100% {${u(n,1-n)}}
}`,c=`__svelte_${Uu(f)}_${l}`,a=ki(t),{stylesheet:_,rules:m}=on.get(a)||zu(a,t);m[c]||(m[c]=!0,_.insertRule(`@keyframes ${c} ${f}`,_.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${c} ${s}ms linear ${o}ms 1 both`,un+=1,c}function wi(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=n.length-s.length;o&&(t.style.animation=s.join(", "),un-=o,un||qu())}function qu(){Yn(()=>{un||(on.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&k(e)}),on.clear())})}function Hu(t,e,n,s){if(!e)return G;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return G;const{delay:i=0,duration:u=300,easing:l=Gn,start:r=bi()+i,end:d=r+u,tick:f=G,css:c}=n(t,{from:e,to:o},s);let a=!0,_=!1,m;function h(){c&&(m=On(t,0,1,u,i,l,c)),i||(_=!0)}function p(){c&&wi(t,m),a=!1}return Ci(F=>{if(!_&&F>=r&&(_=!0),_&&F>=d&&(f(1,0),p()),!a)return!1;if(_){const b=F-r,g=0+1*l(b/u);f(g,1-g)}return!0}),h(),f(0,1),p}function Wu(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:s}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=s,Ei(t,o)}}function Ei(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const s=getComputedStyle(t),o=s.transform==="none"?"":s.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let St;function At(t){St=t}function Nt(){if(!St)throw new Error("Function called outside component initialization");return St}function Qn(t){Nt().$$.on_mount.push(t)}function Ku(t){Nt().$$.after_update.push(t)}function Ju(t,e){return Nt().$$.context.set(t,e),e}function Zn(t){return Nt().$$.context.get(t)}function Vu(t){return Nt().$$.context.has(t)}const dt=[],ge=[];let ht=[];const Rn=[],yi=Promise.resolve();let Mn=!1;function Ti(){Mn||(Mn=!0,yi.then(Bi))}function Gu(){return Ti(),yi}function It(t){ht.push(t)}function pt(t){Rn.push(t)}const Tn=new Set;let rt=0;function Bi(){if(rt!==0)return;const t=St;do{try{for(;rt<dt.length;){const e=dt[rt];rt++,At(e),Yu(e.$$)}}catch(e){throw dt.length=0,rt=0,e}for(At(null),dt.length=0,rt=0;ge.length;)ge.pop()();for(let e=0;e<ht.length;e+=1){const n=ht[e];Tn.has(n)||(Tn.add(n),n())}ht.length=0}while(dt.length);for(;Rn.length;)Rn.pop()();Mn=!1,Tn.clear(),At(t)}function Yu(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(It)}}function Qu(t){const e=[],n=[];ht.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),ht=e}let wt;function Zu(){return wt||(wt=Promise.resolve(),wt.then(()=>{wt=null})),wt}function Bn(t,e,n){t.dispatchEvent(Pu(`${e?"intro":"outro"}${n}`))}const nn=new Set;let Pe;function te(){Pe={r:0,c:[],p:Pe}}function ne(){Pe.r||oe(Pe.c),Pe=Pe.p}function L(t,e){t&&t.i&&(nn.delete(t),t.i(e))}function R(t,e,n,s){if(t&&t.o){if(nn.has(t))return;nn.add(t),Pe.c.push(()=>{nn.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const Xu={duration:0};function Us(t,e,n,s){const o={direction:"both"};let i=e(t,n,o),u=s?0:1,l=null,r=null,d=null;function f(){d&&wi(t,d)}function c(_,m){const h=_.b-u;return m*=Math.abs(h),{a:u,b:_.b,d:h,duration:m,start:_.start,end:_.start+m,group:_.group}}function a(_){const{delay:m=0,duration:h=300,easing:p=Gn,tick:F=G,css:b}=i||Xu,g={start:bi()+m,b:_};_||(g.group=Pe,Pe.r+=1),l||r?r=g:(b&&(f(),d=On(t,u,_,h,m,p,b)),_&&F(0,1),l=c(g,h),It(()=>Bn(t,_,"start")),Ci(y=>{if(r&&y>r.start&&(l=c(r,h),r=null,Bn(t,l.b,"start"),b&&(f(),d=On(t,u,l.b,l.duration,0,p,i.css))),l){if(y>=l.end)F(u=l.b,1-u),Bn(t,l.b,"end"),r||(l.b?f():--l.group.r||oe(l.group.c)),l=null;else if(y>=l.start){const A=y-l.start;u=l.a+l.d*p(A/l.duration),F(u,1-u)}}return!!(l||r)}))}return{run(_){Ge(i)?Zu().then(()=>{i=i(o),a(_)}):a(_)},end(){f(),l=r=null}}}const xu=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ai(t,e){t.d(1),e.delete(t.key)}function et(t,e){R(t,1,1,()=>{e.delete(t.key)})}function $u(t,e){t.f(),et(t,e)}function ze(t,e,n,s,o,i,u,l,r,d,f,c){let a=t.length,_=i.length,m=a;const h={};for(;m--;)h[t[m].key]=m;const p=[],F=new Map,b=new Map,g=[];for(m=_;m--;){const C=c(o,i,m),S=n(C);let j=u.get(S);j?s&&g.push(()=>j.p(C,e)):(j=d(S,C),j.c()),F.set(S,p[m]=j),S in h&&b.set(S,Math.abs(m-h[S]))}const y=new Set,A=new Set;function T(C){L(C,1),C.m(l,f),u.set(C.key,C),f=C.first,_--}for(;a&&_;){const C=p[_-1],S=t[a-1],j=C.key,B=S.key;C===S?(f=C.first,a--,_--):F.has(B)?!u.has(j)||y.has(j)?T(C):A.has(B)?a--:b.get(j)>b.get(B)?(A.add(j),T(C)):(y.add(B),a--):(r(S,u),a--)}for(;a--;){const C=t[a];F.has(C.key)||r(C,u)}for(;_;)T(p[_-1]);return oe(g),p}function el(t,e){const n={},s={},o={$$scope:1};let i=t.length;for(;i--;){const u=t[i],l=e[i];if(l){for(const r in u)r in l||(s[r]=1);for(const r in l)o[r]||(n[r]=l[r],o[r]=1);t[i]=l}else for(const r in u)o[r]=1}for(const u in s)u in n||(n[u]=void 0);return n}function gt(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function ee(t){t&&t.c()}function x(t,e,n,s){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),s||It(()=>{const u=t.$$.on_mount.map(hi).filter(Ge);t.$$.on_destroy?t.$$.on_destroy.push(...u):oe(u),t.$$.on_mount=[]}),i.forEach(It)}function $(t,e){const n=t.$$;n.fragment!==null&&(Qu(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tl(t,e){t.$$.dirty[0]===-1&&(dt.push(t),Ti(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ae(t,e,n,s,o,i,u,l=[-1]){const r=St;At(t);const d=t.$$={fragment:null,ctx:[],props:i,update:G,not_equal:o,bound:Os(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Os(),dirty:l,skip_bound:!1,root:e.target||r.$$.root};u&&u(d.root);let f=!1;if(d.ctx=n?n(t,e.props||{},(c,a,..._)=>{const m=_.length?_[0]:a;return d.ctx&&o(d.ctx[c],d.ctx[c]=m)&&(!d.skip_bound&&d.bound[c]&&d.bound[c](m),f&&tl(t,c)),a}):[],d.update(),f=!0,oe(d.before_update),d.fragment=s?s(d.ctx):!1,e.target){if(e.hydrate){const c=Mu(e.target);d.fragment&&d.fragment.l(c),c.forEach(k)}else d.fragment&&d.fragment.c();e.intro&&L(t.$$.fragment),x(t,e.target,e.anchor,e.customElement),Bi()}At(r)}class ce{$destroy(){$(this,1),this.$destroy=G}$on(e,n){if(!Ge(n))return G;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!Su(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nl=[{code:"af-ZA",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"ar-AE",name:"Arabic"},{code:"bs",name:"Bosnian"},{code:"my",name:"Burmese (Myanmar)"},{code:"ca-ES",name:"Catalan"},{code:"zh-TW",name:"Chinese (Simplified)"},{code:"zh-CN",name:"Chinese (Traditional)"},{code:"hr-HR",name:"Croatian"},{code:"cs-CZ",name:"Czech"},{code:"da-DK",name:"Danish"},{code:"nl-NL",name:"Dutch"},{code:"en-US",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"en-AU",name:"English (Australia)"},{code:"et",name:"Estonian"},{code:"fil-PH",name:"Filipino"},{code:"fi-FI",name:"Finnish"},{code:"fr-FR",name:"French"},{code:"fr-CA",name:"French (Canada)"},{code:"de-DE",name:"German"},{code:"el-GR",name:"Greek"},{code:"gu",name:"Gujarati"},{code:"hi-IN",name:"Hindi"},{code:"hu-HU",name:"Hungarian"},{code:"is-IS",name:"Icelandic"},{code:"id-ID",name:"Indonesian"},{code:"it-IT",name:"Italian"},{code:"ja-JP",name:"Japanese"},{code:"kn",name:"Kannada"},{code:"km",name:"Khmer"},{code:"ko-KR",name:"Korean"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ml",name:"Malayalam"},{code:"mr",name:"Marathi"},{code:"ne",name:"Nepali"},{code:"nb-NO",name:"Norwegian"},{code:"pl-PL",name:"Polish"},{code:"pt-BR",name:"Portuguese"},{code:"ro-RO",name:"Romanian"},{code:"ru-RU",name:"Russian"},{code:"sr-RS",name:"Serbian"},{code:"si",name:"Sinhala"},{code:"sk-SK",name:"Slovak"},{code:"es-ES",name:"Spanish (Spain)"},{code:"es-MX",name:"Spanish (Mexico)"},{code:"sw",name:"Swahili"},{code:"sv-SE",name:"Swedish"},{code:"ta",name:"Tamil"},{code:"te",name:"Telugu"},{code:"th-TH",name:"Thai"},{code:"tr-TR",name:"Turkish"},{code:"uk-UA",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"vi-VN",name:"Vietnamese"}],Lt={"en-us":nl},sl=t=>({}),zs=t=>({}),ol=t=>({}),qs=t=>({}),il=t=>({}),Hs=t=>({}),ul=t=>({}),Ws=t=>({});function ll(t){let e;return{c(){e=U("Open")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Ks(t){let e,n,s,o,i,u,l,r,d,f,c,a;const _=t[7]["dialog-content"],m=ve(_,t,t[6],Hs),h=t[7]["button-close-text"],p=ve(h,t,t[6],qs),F=p||rl();let b=t[0]&&Js(t);return{c(){e=E("dialog"),n=E("article"),s=E("button"),o=O(),m&&m.c(),i=O(),u=E("footer"),l=E("button"),F&&F.c(),r=O(),b&&b.c(),N(s,"class","close"),N(l,"class","btn-small secondary")},m(g,y){v(g,e,y),w(e,n),w(n,s),w(n,o),m&&m.m(n,null),w(n,i),w(n,u),w(u,l),F&&F.m(l,null),w(u,r),b&&b.m(u,null),t[11](e),f=!0,c||(a=[W(s,"click",t[8]),W(l,"click",t[9]),Nu(d=t[3].call(null,e,t[1]))],c=!0)},p(g,y){m&&m.p&&(!f||y&64)&&Ee(m,_,g,g[6],f?we(_,g[6],y,il):ye(g[6]),Hs),p&&p.p&&(!f||y&64)&&Ee(p,h,g,g[6],f?we(h,g[6],y,ol):ye(g[6]),qs),g[0]?b?(b.p(g,y),y&1&&L(b,1)):(b=Js(g),b.c(),L(b,1),b.m(u,null)):b&&(te(),R(b,1,1,()=>{b=null}),ne()),d&&Ge(d.update)&&y&2&&d.update.call(null,g[1])},i(g){f||(L(m,g),L(F,g),L(b),f=!0)},o(g){R(m,g),R(F,g),R(b),f=!1},d(g){g&&k(e),m&&m.d(g),F&&F.d(g),b&&b.d(),t[11](null),c=!1,oe(a)}}}function rl(t){let e;return{c(){e=U("Close")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Js(t){let e,n,s,o;const i=t[7]["button-save-text"],u=ve(i,t,t[6],zs),l=u||al();return{c(){e=E("button"),l&&l.c(),N(e,"class","btn-small success")},m(r,d){v(r,e,d),l&&l.m(e,null),n=!0,s||(o=W(e,"click",t[10]),s=!0)},p(r,d){u&&u.p&&(!n||d&64)&&Ee(u,i,r,r[6],n?we(i,r[6],d,sl):ye(r[6]),zs)},i(r){n||(L(l,r),n=!0)},o(r){R(l,r),n=!1},d(r){r&&k(e),l&&l.d(r),s=!1,o()}}}function al(t){let e;return{c(){e=U("Save")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function cl(t){let e,n,s,o,i,u;const l=t[7]["button-open-text"],r=ve(l,t,t[6],Ws),d=r||ll();let f=t[2]&&Ks(t);return{c(){e=E("button"),d&&d.c(),n=O(),f&&f.c(),s=ue(),N(e,"class","btn-small")},m(c,a){v(c,e,a),d&&d.m(e,null),v(c,n,a),f&&f.m(c,a),v(c,s,a),o=!0,i||(u=W(e,"click",t[5]),i=!0)},p(c,[a]){r&&r.p&&(!o||a&64)&&Ee(r,l,c,c[6],o?we(l,c[6],a,ul):ye(c[6]),Ws),c[2]?f?(f.p(c,a),a&4&&L(f,1)):(f=Ks(c),f.c(),L(f,1),f.m(s.parentNode,s)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){o||(L(d,c),L(f),o=!0)},o(c){R(d,c),R(f),o=!1},d(c){c&&k(e),d&&d.d(c),c&&k(n),f&&f.d(c),c&&k(s),i=!1,u()}}}const Vs="modal-is-open",Gs="modal-is-opening",Ys="modal-is-closing",Qs=400;function fl(){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),n}function ml(){return document.body.scrollHeight>screen.height}function dl(t,e,n){let{$$slots:s={},$$scope:o}=e,{on_save:i}=e,u,l=!1,r=null;function d(b){ml()&&document.documentElement.style.setProperty("--scrollbar-width",`${fl()}px`),document.documentElement.classList.add(Vs,Gs),setTimeout(()=>{r=b,document.documentElement.classList.remove(Gs)},Qs),b.setAttribute("open",!0)}function f(b,g=!1){g&&typeof i=="function"&&i(),r=null,document.documentElement.classList.add(Ys),setTimeout(()=>{document.documentElement.classList.remove(Ys,Vs),document.documentElement.style.removeProperty("--scrollbar-width"),b.removeAttribute("open"),n(2,l=!1)},Qs)}function c(b){r!=null&&(r.querySelector("article").contains(b.target)||f(r))}function a(b){b.key==="Escape"&&r!=null&&f(r)}function _(){n(2,l=n(2,l=!0))}Qn(()=>(document.addEventListener("click",c,!0),document.addEventListener("keydown",a),()=>{document.removeEventListener("click",c,!0),document.removeEventListener("keydown",a)}));const m=()=>f(u),h=()=>f(u),p=()=>f(u,!0);function F(b){ge[b?"unshift":"push"](()=>{u=b,n(1,u)})}return t.$$set=b=>{"on_save"in b&&n(0,i=b.on_save),"$$scope"in b&&n(6,o=b.$$scope)},[i,u,l,d,f,_,o,s,m,h,p,F]}class Ke extends ce{constructor(e){super(),ae(this,e,dl,cl,le,{on_save:0})}}function _l(t){const e=t-1;return e*e*e+1}function hl(t,{from:e,to:n},s={}){const o=getComputedStyle(t),i=o.transform==="none"?"":o.transform,[u,l]=o.transformOrigin.split(" ").map(parseFloat),r=e.left+e.width*u/n.width-(n.left+u),d=e.top+e.height*l/n.height-(n.top+l),{delay:f=0,duration:c=_=>Math.sqrt(_)*120,easing:a=_l}=s;return{delay:f,duration:Ge(c)?c(Math.sqrt(r*r+d*d)):c,easing:a,css:(_,m)=>{const h=m*r,p=m*d,F=_+m*e.width/n.width,b=_+m*e.height/n.height;return`transform: ${i} translate(${h}px, ${p}px) scale(${F}, ${b});`}}}function Zs(t,{delay:e=0,duration:n=400,easing:s=Gn}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:i=>`opacity: ${i*o}`}}const{window:Xs}=xu,Dl=t=>({noResultsText:t[0]&1024}),xs=t=>({noResultsText:t[10]}),pl=t=>({createText:t[0]&8192}),$s=t=>({createText:t[13]}),gl=t=>({loadingText:t[0]&2048}),eo=t=>({loadingText:t[11]}),bl=t=>({nbItems:t[1]&1,maxItemsToShowInList:t[0]&16}),to=t=>({nbItems:t[31].length,maxItemsToShowInList:t[4]});function no(t,e,n){const s=t.slice();return s[144]=e[n],s[146]=n,s}const Fl=t=>({item:t[1]&1,label:t[1]&1}),so=t=>({item:t[144].item,label:t[144].highlighted?t[144].highlighted:t[144].label}),Cl=t=>({nbItems:t[1]&1,maxItemsToShowInList:t[0]&16}),oo=t=>({nbItems:t[31].length,maxItemsToShowInList:t[4]});function io(t,e,n){const s=t.slice();return s[147]=e[n],s[146]=n,s}const kl=t=>({label:t[0]&2,item:t[0]&2}),uo=t=>({label:t[43](t[147]),item:t[147],unselectItem:t[50]});function lo(t,e,n){const s=t.slice();return s[146]=e[n],s}function vl(t){let e,n=t[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=ro(lo(t,n,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ue()},m(o,i){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(o,i);v(o,e,i)},p(o,i){if(i[0]&10|i[1]&4096){n=o[1];let u;for(u=0;u<n.length;u+=1){const l=lo(o,n,u);s[u]?s[u].p(l,i):(s[u]=ro(l),s[u].c(),s[u].m(e.parentNode,e))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},d(o){fn(s,o),o&&k(e)}}}function wl(t){let e,n=t[43](t[1])+"",s,o;return{c(){e=E("option"),s=U(n),e.__value=o=t[3](t[1],!0),e.value=e.__value,e.selected=!0,N(e,"class","svelte-75ckfb")},m(i,u){v(i,e,u),w(e,s)},p(i,u){u[0]&2&&n!==(n=i[43](i[1])+"")&&Q(s,n),u[0]&10&&o!==(o=i[3](i[1],!0))&&(e.__value=o,e.value=e.__value)},d(i){i&&k(e)}}}function ro(t){let e,n=t[43](t[146])+"",s,o,i;return{c(){e=E("option"),s=U(n),o=O(),e.__value=i=t[3](t[146],!0),e.value=e.__value,e.selected=!0,N(e,"class","svelte-75ckfb")},m(u,l){v(u,e,l),w(e,s),w(e,o)},p(u,l){l[0]&2&&n!==(n=u[43](u[146])+"")&&Q(s,n),l[0]&10&&i!==(i=u[3](u[146],!0))&&(e.__value=i,e.value=e.__value)},d(u){u&&k(e)}}}function ao(t){let e=[],n=new Map,s,o,i=t[1];const u=l=>l[3](l[147],!0);for(let l=0;l<i.length;l+=1){let r=io(t,i,l),d=u(r);n.set(d,e[l]=co(d,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=ue()},m(l,r){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,r);v(l,s,r),o=!0},p(l,r){if(r[0]&10|r[1]&503844992|r[3]&8){i=l[1],te();for(let d=0;d<e.length;d+=1)e[d].r();e=ze(e,r,u,1,l,i,n,s.parentNode,$u,co,s,io);for(let d=0;d<e.length;d+=1)e[d].a();ne()}},i(l){if(!o){for(let r=0;r<i.length;r+=1)L(e[r]);o=!0}},o(l){for(let r=0;r<e.length;r+=1)R(e[r]);o=!1},d(l){for(let r=0;r<e.length;r+=1)e[r].d(l);l&&k(s)}}}function El(t){let e,n,s=t[43](t[147])+"",o,i,u,l,r;function d(...f){return t[99](t[147],...f)}return{c(){e=E("div"),n=E("span"),o=U(s),i=O(),u=E("span"),N(n,"class","tag svelte-75ckfb"),N(u,"class","tag is-delete svelte-75ckfb"),N(e,"class","tags has-addons svelte-75ckfb")},m(f,c){v(f,e,c),w(e,n),w(n,o),w(e,i),w(e,u),l||(r=[W(u,"click",Ln(function(){Ge(t[50](t[147]))&&t[50](t[147]).apply(this,arguments)})),W(u,"keypress",Ln(d))],l=!0)},p(f,c){t=f,c[0]&2&&s!==(s=t[43](t[147])+"")&&Q(o,s)},d(f){f&&k(e),l=!1,oe(r)}}}function co(t,e){let n,s,o,i,u=G,l,r,d;const f=e[97].tag,c=ve(f,e,e[96],uo),a=c||El(e);function _(...F){return e[100](e[146],...F)}function m(...F){return e[101](e[146],...F)}function h(...F){return e[102](e[146],...F)}function p(...F){return e[103](e[146],...F)}return{key:t,first:null,c(){n=E("div"),a&&a.c(),s=O(),N(n,"draggable",!0),N(n,"class","svelte-75ckfb"),ie(n,"is-active",e[38]===e[146]),this.first=n},m(F,b){v(F,n,b),a&&a.m(n,null),w(n,s),l=!0,r||(d=[W(n,"dragstart",_),W(n,"dragover",m),W(n,"dragleave",h),W(n,"drop",p)],r=!0)},p(F,b){e=F,c?c.p&&(!l||b[0]&2|b[3]&8)&&Ee(c,f,e,e[96],l?we(f,e[96],b,kl):ye(e[96]),uo):a&&a.p&&(!l||b[0]&2)&&a.p(e,l?b:[-1,-1,-1,-1,-1]),(!l||b[0]&2|b[1]&128)&&ie(n,"is-active",e[38]===e[146])},r(){i=n.getBoundingClientRect()},f(){Wu(n),u(),Ei(n,i)},a(){u(),u=Hu(n,i,hl,{duration:200})},i(F){l||(L(a,F),It(()=>{l&&(o||(o=Us(n,Zs,{duration:200},!0)),o.run(1))}),l=!0)},o(F){R(a,F),o||(o=Us(n,Zs,{duration:200},!1)),o.run(0),l=!1},d(F){F&&k(n),a&&a.d(F),F&&o&&o.end(),r=!1,oe(d)}}}function fo(t){let e,n,s;return{c(){e=E("span"),N(e,"class","autocomplete-clear-button svelte-75ckfb")},m(o,i){v(o,e,i),e.innerHTML=t[8],n||(s=[W(e,"click",t[54]),W(e,"keypress",t[108])],n=!0)},p(o,i){i[0]&256&&(e.innerHTML=o[8])},d(o){o&&k(e),n=!1,oe(s)}}}function yl(t){let e,n;const s=t[97]["no-results"],o=ve(s,t,t[96],xs),i=o||Sl(t);return{c(){e=E("div"),i&&i.c(),N(e,"class","autocomplete-list-item-no-results svelte-75ckfb")},m(u,l){v(u,e,l),i&&i.m(e,null),n=!0},p(u,l){o?o.p&&(!n||l[0]&1024|l[3]&8)&&Ee(o,s,u,u[96],n?we(s,u[96],l,Dl):ye(u[96]),xs):i&&i.p&&(!n||l[0]&1024)&&i.p(u,n?l:[-1,-1,-1,-1,-1])},i(u){n||(L(i,u),n=!0)},o(u){R(i,u),n=!1},d(u){u&&k(e),i&&i.d(u)}}}function Tl(t){let e,n,s,o;const i=t[97].create,u=ve(i,t,t[96],$s),l=u||Il(t);return{c(){e=E("div"),l&&l.c(),N(e,"class","autocomplete-list-item-create svelte-75ckfb")},m(r,d){v(r,e,d),l&&l.m(e,null),n=!0,s||(o=[W(e,"click",t[44]),W(e,"keypress",t[113])],s=!0)},p(r,d){u?u.p&&(!n||d[0]&8192|d[3]&8)&&Ee(u,i,r,r[96],n?we(i,r[96],d,pl):ye(r[96]),$s):l&&l.p&&(!n||d[0]&8192)&&l.p(r,n?d:[-1,-1,-1,-1,-1])},i(r){n||(L(l,r),n=!0)},o(r){R(l,r),n=!1},d(r){r&&k(e),l&&l.d(r),s=!1,oe(o)}}}function Bl(t){let e,n;const s=t[97].loading,o=ve(s,t,t[96],eo),i=o||jl(t);return{c(){e=E("div"),i&&i.c(),N(e,"class","autocomplete-list-item-loading svelte-75ckfb")},m(u,l){v(u,e,l),i&&i.m(e,null),n=!0},p(u,l){o?o.p&&(!n||l[0]&2048|l[3]&8)&&Ee(o,s,u,u[96],n?we(s,u[96],l,gl):ye(u[96]),eo):i&&i.p&&(!n||l[0]&2048)&&i.p(u,n?l:[-1,-1,-1,-1,-1])},i(u){n||(L(i,u),n=!0)},o(u){R(i,u),n=!1},d(u){u&&k(e),i&&i.d(u)}}}function Al(t){let e,n,s;const o=t[97]["dropdown-header"],i=ve(o,t,t[96],oo);let u=t[31],l=[];for(let a=0;a<u.length;a+=1)l[a]=_o(no(t,u,a));const r=a=>R(l[a],1,1,()=>{l[a]=null}),d=t[97]["dropdown-footer"],f=ve(d,t,t[96],to),c=f||Rl(t);return{c(){i&&i.c(),e=O();for(let a=0;a<l.length;a+=1)l[a].c();n=O(),c&&c.c()},m(a,_){i&&i.m(a,_),v(a,e,_);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(a,_);v(a,n,_),c&&c.m(a,_),s=!0},p(a,_){if(i&&i.p&&(!s||_[0]&16|_[1]&1|_[3]&8)&&Ee(i,o,a,a[96],s?we(o,a[96],_,Cl):ye(a[96]),oo),_[0]&1073741840|_[1]&16793601|_[3]&8){u=a[31];let m;for(m=0;m<u.length;m+=1){const h=no(a,u,m);l[m]?(l[m].p(h,_),L(l[m],1)):(l[m]=_o(h),l[m].c(),L(l[m],1),l[m].m(n.parentNode,n))}for(te(),m=u.length;m<l.length;m+=1)r(m);ne()}f?f.p&&(!s||_[0]&16|_[1]&1|_[3]&8)&&Ee(f,d,a,a[96],s?we(d,a[96],_,bl):ye(a[96]),to):c&&c.p&&(!s||_[0]&4112|_[1]&1)&&c.p(a,s?_:[-1,-1,-1,-1,-1])},i(a){if(!s){L(i,a);for(let _=0;_<u.length;_+=1)L(l[_]);L(c,a),s=!0}},o(a){R(i,a),l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)R(l[_]);R(c,a),s=!1},d(a){i&&i.d(a),a&&k(e),fn(l,a),a&&k(n),c&&c.d(a)}}}function Sl(t){let e;return{c(){e=U(t[10])},m(n,s){v(n,e,s)},p(n,s){s[0]&1024&&Q(e,n[10])},d(n){n&&k(e)}}}function Il(t){let e;return{c(){e=U(t[13])},m(n,s){v(n,e,s)},p(n,s){s[0]&8192&&Q(e,n[13])},d(n){n&&k(e)}}}function jl(t){let e;return{c(){e=U(t[11])},m(n,s){v(n,e,s)},p(n,s){s[0]&2048&&Q(e,n[11])},d(n){n&&k(e)}}}function mo(t){let e,n,s,o;const i=t[97].item,u=ve(i,t,t[96],so),l=u||Ol(t);function r(){return t[110](t[144])}function d(...c){return t[111](t[144],...c)}function f(){return t[112](t[146])}return{c(){e=E("div"),l&&l.c(),N(e,"class","autocomplete-list-item svelte-75ckfb"),ie(e,"selected",t[146]===t[30]),ie(e,"confirmed",t[55](t[144].item))},m(c,a){v(c,e,a),l&&l.m(e,null),n=!0,s||(o=[W(e,"click",r),W(e,"keypress",d),W(e,"pointerenter",f)],s=!0)},p(c,a){t=c,u?u.p&&(!n||a[1]&1|a[3]&8)&&Ee(u,i,t,t[96],n?we(i,t[96],a,Fl):ye(t[96]),so):l&&l.p&&(!n||a[1]&1)&&l.p(t,n?a:[-1,-1,-1,-1,-1]),(!n||a[0]&1073741824)&&ie(e,"selected",t[146]===t[30]),(!n||a[1]&16777217)&&ie(e,"confirmed",t[55](t[144].item))},i(c){n||(L(l,c),n=!0)},o(c){R(l,c),n=!1},d(c){c&&k(e),l&&l.d(c),s=!1,oe(o)}}}function Nl(t){let e,n=t[144].label+"",s;return{c(){e=new vi(!1),s=ue(),e.a=s},m(o,i){e.m(n,o,i),v(o,s,i)},p(o,i){i[1]&1&&n!==(n=o[144].label+"")&&e.p(n)},d(o){o&&k(s),o&&e.d()}}}function Ll(t){let e,n=t[144].highlighted+"",s;return{c(){e=new vi(!1),s=ue(),e.a=s},m(o,i){e.m(n,o,i),v(o,s,i)},p(o,i){i[1]&1&&n!==(n=o[144].highlighted+"")&&e.p(n)},d(o){o&&k(s),o&&e.d()}}}function Ol(t){let e;function n(i,u){return i[144].highlighted?Ll:Nl}let s=n(t),o=s(t);return{c(){o.c(),e=ue()},m(i,u){o.m(i,u),v(i,e,u)},p(i,u){s===(s=n(i))&&o?o.p(i,u):(o.d(1),o=s(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){o.d(i),i&&k(e)}}}function _o(t){let e,n,s=t[144]&&(t[4]<=0||t[146]<t[4])&&mo(t);return{c(){s&&s.c(),e=ue()},m(o,i){s&&s.m(o,i),v(o,e,i),n=!0},p(o,i){o[144]&&(o[4]<=0||o[146]<o[4])?s?(s.p(o,i),i[0]&16|i[1]&1&&L(s,1)):(s=mo(o),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(te(),R(s,1,1,()=>{s=null}),ne())},i(o){n||(L(s),n=!0)},o(o){R(s),n=!1},d(o){s&&s.d(o),o&&k(e)}}}function ho(t){let e,n=t[12]&&Do(t);return{c(){n&&n.c(),e=ue()},m(s,o){n&&n.m(s,o),v(s,e,o)},p(s,o){s[12]?n?n.p(s,o):(n=Do(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&k(e)}}}function Do(t){let e,n,s=t[31].length-t[4]+"",o,i,u;return{c(){e=E("div"),n=U("..."),o=U(s),i=O(),u=U(t[12]),N(e,"class","autocomplete-list-item-no-results svelte-75ckfb")},m(l,r){v(l,e,r),w(e,n),w(e,o),w(e,i),w(e,u)},p(l,r){r[0]&16|r[1]&1&&s!==(s=l[31].length-l[4]+"")&&Q(o,s),r[0]&4096&&Q(u,l[12])},d(l){l&&k(e)}}}function Rl(t){let e,n=t[4]>0&&t[31].length>t[4]&&ho(t);return{c(){n&&n.c(),e=ue()},m(s,o){n&&n.m(s,o),v(s,e,o)},p(s,o){s[4]>0&&s[31].length>s[4]?n?n.p(s,o):(n=ho(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&k(e)}}}function Ml(t){let e,n,s,o,i,u,l,r,d,f,c,a,_,m,h,p,F,b,g,y;function A(M,Y){if(!M[5]&&M[32])return wl;if(M[5]&&M[32])return vl}let T=A(t),C=T&&T(t),S=t[5]&&t[32]&&ao(t),j=[{type:"text"},{class:l=(t[16]?t[16]:"")+" "+(t[27]?"":"input autocomplete-input")},{id:r=t[17]?t[17]:""},{autocomplete:d=t[22]?"on":t[23]},{placeholder:t[14]},{name:t[18]},{disabled:t[26]},{required:t[28]},{title:t[21]},{readOnly:f=t[24]||t[39]},{tabindex:t[29]},t[60]],B={};for(let M=0;M<j.length;M+=1)B=sn(B,j[M]);let I=t[40]&&fo(t);const z=[Al,Bl,Tl,yl],q=[];function se(M,Y){return M[31]&&M[31].length>0?0:M[36]&&M[11]?1:M[6]?2:M[10]?3:-1}return~(m=se(t))&&(h=q[m]=z[m](t)),{c(){e=E("div"),n=E("select"),C&&C.c(),s=O(),o=E("div"),S&&S.c(),i=O(),u=E("input"),c=O(),I&&I.c(),a=O(),_=E("div"),h&&h.c(),N(n,"name",t[19]),N(n,"id",t[20]),n.multiple=t[5],N(n,"class","svelte-75ckfb"),Ms(u,B),ie(u,"svelte-75ckfb",!0),N(o,"class","input-container svelte-75ckfb"),N(_,"class",p=(t[25]?t[25]:"")+" autocomplete-list "+(t[41]?"":"hidden")+" is-fullwidth svelte-75ckfb"),N(e,"class",F=(t[15]?t[15]:"")+" autocomplete select is-fullwidth "+t[42]+" svelte-75ckfb"),ie(e,"hide-arrow",t[7]||!t[0].length),ie(e,"is-multiple",t[5]),ie(e,"show-clear",t[40]),ie(e,"is-loading",t[9]&&t[36])},m(M,Y){v(M,e,Y),w(e,n),C&&C.m(n,null),w(e,s),w(e,o),S&&S.m(o,null),w(o,i),w(o,u),u.autofocus&&u.focus(),t[104](u),Ve(u,t[2]),w(o,c),I&&I.m(o,null),t[109](o),w(e,a),w(e,_),~m&&q[m].m(_,null),t[114](_),b=!0,g||(y=[W(Xs,"click",t[46]),W(Xs,"scroll",t[98]),W(u,"input",t[105]),W(u,"input",t[49]),W(u,"focus",t[52]),W(u,"blur",t[53]),W(u,"keydown",t[47]),W(u,"click",t[51]),W(u,"keypress",t[48]),W(u,"dragover",t[106]),W(u,"drop",t[107])],g=!0)},p(M,Y){T===(T=A(M))&&C?C.p(M,Y):(C&&C.d(1),C=T&&T(M),C&&(C.c(),C.m(n,null))),(!b||Y[0]&524288)&&N(n,"name",M[19]),(!b||Y[0]&1048576)&&N(n,"id",M[20]),(!b||Y[0]&32)&&(n.multiple=M[5]),M[5]&&M[32]?S?(S.p(M,Y),Y[0]&32|Y[1]&2&&L(S,1)):(S=ao(M),S.c(),L(S,1),S.m(o,i)):S&&(te(),R(S,1,1,()=>{S=null}),ne()),Ms(u,B=el(j,[{type:"text"},(!b||Y[0]&134283264&&l!==(l=(M[16]?M[16]:"")+" "+(M[27]?"":"input autocomplete-input")))&&{class:l},(!b||Y[0]&131072&&r!==(r=M[17]?M[17]:""))&&{id:r},(!b||Y[0]&12582912&&d!==(d=M[22]?"on":M[23]))&&{autocomplete:d},(!b||Y[0]&16384)&&{placeholder:M[14]},(!b||Y[0]&262144)&&{name:M[18]},(!b||Y[0]&67108864)&&{disabled:M[26]},(!b||Y[0]&268435456)&&{required:M[28]},(!b||Y[0]&2097152)&&{title:M[21]},(!b||Y[0]&16777216|Y[1]&256&&f!==(f=M[24]||M[39]))&&{readOnly:f},(!b||Y[0]&536870912)&&{tabindex:M[29]},Y[1]&536870912&&M[60]])),Y[0]&4&&u.value!==M[2]&&Ve(u,M[2]),ie(u,"svelte-75ckfb",!0),M[40]?I?I.p(M,Y):(I=fo(M),I.c(),I.m(o,null)):I&&(I.d(1),I=null);let Ye=m;m=se(M),m===Ye?~m&&q[m].p(M,Y):(h&&(te(),R(q[Ye],1,1,()=>{q[Ye]=null}),ne()),~m?(h=q[m],h?h.p(M,Y):(h=q[m]=z[m](M),h.c()),L(h,1),h.m(_,null)):h=null),(!b||Y[0]&33554432|Y[1]&1024&&p!==(p=(M[25]?M[25]:"")+" autocomplete-list "+(M[41]?"":"hidden")+" is-fullwidth svelte-75ckfb"))&&N(_,"class",p),(!b||Y[0]&32768&&F!==(F=(M[15]?M[15]:"")+" autocomplete select is-fullwidth "+M[42]+" svelte-75ckfb"))&&N(e,"class",F),(!b||Y[0]&32897)&&ie(e,"hide-arrow",M[7]||!M[0].length),(!b||Y[0]&32800)&&ie(e,"is-multiple",M[5]),(!b||Y[0]&32768|Y[1]&512)&&ie(e,"show-clear",M[40]),(!b||Y[0]&33280|Y[1]&32)&&ie(e,"is-loading",M[9]&&M[36])},i(M){b||(L(S),L(h),b=!0)},o(M){R(S),R(h),b=!1},d(M){M&&k(e),C&&C.d(),S&&S.d(),t[104](null),I&&I.d(),t[109](null),~m&&q[m].d(),t[114](null),g=!1,oe(y)}}}function Pl(t,e){if(typeof t!="function"){console.error("Not a function: "+t+", argument: "+e);return}let n;try{n=t(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+t)}return n}function xt(t,e){let n=Pl(t,e);return n==null&&(n=""),typeof n!="string"&&(n=n.toString()),n}function Pn(t,e){if(!t)return 0;const n=t.keywords;let s=0;return e.forEach(o=>{n.includes(o)&&s++}),s}function Ul(t,e,n){return Pn(e,n)-Pn(t,n)}function $t(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function zl(t,e,n){let s,o,i,u;const l=["items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text","highlightFilter"];let r=Rs(e,l),{$$slots:d={},$$scope:f}=e,{items:c=[]}=e,{searchFunction:a=!1}=e,{labelFieldName:_=void 0}=e,{keywordsFieldName:m=_}=e,{valueFieldName:h=void 0}=e,{labelFunction:p=function(D){return D==null?"":_?D[_]:D}}=e,{keywordsFunction:F=function(D){return D==null?"":m?D[m]:p(D)}}=e,{valueFunction:b=function(D,P=!1){return D==null?D:!q||P?h?D[h]:D:D.map(H=>h?H[h]:H)}}=e,{keywordsCleanFunction:g=function(D){return D}}=e,{textCleanFunction:y=function(D){return D}}=e,{beforeChange:A=function(D,P){return!0}}=e,{onChange:T=function(D){}}=e,{onFocus:C=function(){}}=e,{onBlur:S=function(){}}=e,{onCreate:j=function(D){V&&console.log("onCreate: "+D)}}=e,{selectFirstIfEmpty:B=!1}=e,{minCharactersToSearch:I=1}=e,{maxItemsToShowInList:z=0}=e,{multiple:q=!1}=e,{create:se=!1}=e,{ignoreAccents:M=!0}=e,{matchAllKeywords:Y=!0}=e,{sortByMatchedKeywords:Ye=!1}=e,{itemFilterFunction:Rt=void 0}=e,{itemSortFunction:Mt=void 0}=e,{lock:Pt=!1}=e,{delay:Ut=0}=e,{localFiltering:zt=!0}=e,{localSorting:dn=!0}=e,{cleanUserText:_n=!0}=e,{lowercaseKeywords:qt=!0}=e,{closeOnBlur:hn=!1}=e,{orderableSelection:ot=!1}=e,{hideArrow:ts=!1}=e,{showClear:Dn=!1}=e,{clearText:ns="&#10006;"}=e,{showLoadingIndicator:ss=!1}=e,{noResultsText:os="No results found"}=e,{loadingText:is="Loading results..."}=e,{moreItemsText:us="items not shown"}=e,{createText:ls="Not found, add anyway?"}=e,{placeholder:rs=void 0}=e,{className:as=void 0}=e,{inputClassName:cs=void 0}=e,{inputId:it=void 0}=e,{name:fs=void 0}=e,{selectName:ms=void 0}=e,{selectId:ds=void 0}=e,{title:_s=void 0}=e,{html5autocomplete:hs=void 0}=e,{autocompleteOffValue:Ds="off"}=e,{readonly:ps=void 0}=e,{dropdownClassName:gs=void 0}=e,{disabled:bs=!1}=e,{noInputStyles:Fs=!1}=e,{required:Cs=null}=e,{debug:V=!1}=e,{tabindex:ks=0}=e,{selectedItem:X=q?[]:void 0}=e,{value:pn=void 0}=e,{highlightedItem:gn=void 0}=e;const vs="sautocomplete-"+Math.floor(Math.random()*1e3);let qe,Te,Ht,He=!1,Wt=!1,re=-1,{text:_e=void 0}=e,Ct=0,de,be=[],bn=0,Qe=0,Fn,kt=!1;Ku(()=>{kt&&fu(),n(37,kt=!1)});function Cn(D){return xt(p,D)}function Vi(D){const P=xt(F,D);let H=xt(g,P);return H=qt?H.toLowerCase().trim():H,M&&(H=$t(H)),V&&console.log("Extracted keywords: '"+H+"' from item: "+JSON.stringify(D)),H}function Kt(){let D;V&&(D=`Autocomplete prepare list ${it?`(id: ${it})`:""}`,console.time(D),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(c))),Array.isArray(c)||(console.warn("Autocomplete items / search function did not return array but",c),n(0,c=[]));const P=c?c.length:0;be=new Array(P),P>0&&c.forEach((H,Z)=>{const he=Gi(H);he===void 0&&console.log("Undefined item for: ",H),be[Z]=he}),n(31,de=be),V&&(console.log(be.length+" items to search"),console.timeEnd(D))}function Gi(D){return{keywords:zt?Vi(D):[],label:Cn(D),item:D}}function Yi(){n(61,pn=b(X)),X&&!q&&n(2,_e=Cn(X)),n(31,de=be),T(X)}function Qi(D){if(D==null)return"";if(!_n)return D;const P=D.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),H=xt(y,P);return qt?H.toLowerCase().trim():H.trim()}async function ws(){let D;V&&(D=`Autocomplete search ${it?`(id: ${it})`:""}`,console.time(D),console.log("Searching user entered text: '"+_e+"'"));let P=Qi(_e);if(I>1&&P.length<I&&(P=""),n(95,Ct=P.length),V&&console.log("Changed user entered text '"+_e+"' into '"+P+"'"),P===""&&(a?(n(0,c=[]),V&&console.log("User entered text is empty clear list of items")):(n(31,de=be),V&&console.log("User entered text is empty set the list of items to all items")),Ss())){V&&console.timeEnd(D);return}if(!a)Jt(P);else{bn=bn+1;const H=bn;if(n(36,Wt=!0),a.constructor.name==="AsyncGeneratorFunction"){for await(const Z of a(P,z)){if(H<Qe)return!1;H>Qe&&n(0,c=[]),Qe=H,n(0,c=[...c,...Z]),Jt(P)}Qe<H&&(Qe=H,n(0,c=[]),Jt(P))}else{let Z=await a(P,z);if(H<Qe)return!1;Qe=H,n(0,c=Z),Jt(P)}n(36,Wt=!1)}V&&(console.timeEnd(D),console.log("Search found "+de.length+" items"))}function Zi(D,P){const H=Pn(D,P);return Y?H>=P.length:H>0}function Jt(D){Kt();const H=(M?$t(D):D).split(/\s+/g).filter(Fe=>Fe!=="");let Z;zt?(Rt?Z=be.filter(Fe=>Rt(Fe.item,H)):Z=be.filter(Fe=>Zi(Fe,H)),dn&&(Mt?Z=Z.sort((Fe,vt)=>Mt(Fe.item,vt.item,H)):Ye&&(Z=Z.sort((Fe,vt)=>Ul(Fe,vt,H))))):Z=be;const he=js(H,"label");return n(31,de=Z.map(he)),Ss(),!0}function Es(D){let P;if(V&&console.log("createdItem",D),typeof D<"u"){Kt(),n(31,de=be);let H=Bs(D,de);H<=0&&(n(0,c=[D]),Kt(),n(31,de=be),H=0),H>=0&&(n(30,re=H),P=de[re])}return P}function kn(D){if(V&&console.log("selectListItem",D),typeof D>"u"&&se){const H=j(_e);if(typeof H<"u"){if(typeof H.then=="function")return H.then(Z=>{if(typeof Z<"u"){const he=Es(Z);typeof he<"u"&&kn(he)}}),!0;D=Es(H)}}if(typeof D>"u")return V&&console.log("listItem is undefined. Can not select."),!1;if(u)return!0;const P=D.item;return A(X,P)&&(q?X?X.includes(P)?n(1,X=X.filter(H=>H!==P)):n(1,X=[...X,P]):n(1,X=[P]):(n(1,X=void 0),n(1,X=P))),!0}function Vt(){V&&console.log("selectItem",re);const D=de[re];kn(D)?(V&&console.log("selectListItem true, closing"),We(),q&&(n(2,_e=""),qe.focus())):V&&console.log("selectListItem false, not closing")}function Xi(){V&&console.log("up"),Yt(),re>0&&n(30,re--,re),Gt()}function xi(){V&&console.log("down"),Yt(),re<de.length-1&&n(30,re++,re),Gt()}function Gt(){V&&console.log("highlight");const D=".selected";V&&console.log("Seaching DOM element: "+D+" in "+Te);const P=Te&&Te.querySelector(D);P?typeof P.scrollIntoViewIfNeeded=="function"?(V&&console.log("Scrolling selected item into view"),P.scrollIntoViewIfNeeded()):P.scrollIntoView==="function"?(V&&console.log("Scrolling selected item into view"),P.scrollIntoView()):V&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):V&&console.warn("Selected item not found to scroll into view")}function vn(D){V&&console.log("onListItemClick"),kn(D)&&(We(),q&&(n(2,_e=""),qe.focus()))}function $i(D){V&&console.log("onDocumentClick"),D.composedPath().some(P=>P.classList&&P.classList.contains(vs))?(V&&console.log("onDocumentClick inside"),Gt()):(V&&console.log("onDocumentClick outside"),We())}function eu(D){V&&console.log("onKeyDown");let P=D.key;P==="Tab"&&D.shiftKey&&(P="ShiftTab");const Z={Tab:He?We:null,ShiftTab:He?We:null,ArrowDown:xi.bind(this),ArrowUp:Xi.bind(this),Escape:iu.bind(this),Backspace:q&&o&&!_e?uu.bind(this):null}[P];typeof Z=="function"&&Z(D)}function tu(D){V&&console.log("onKeyPress"),D.key==="Enter"&&nu(D)}function nu(D){He&&(D.preventDefault(),Vt())}function su(D){V&&console.log("onInput"),n(2,_e=D.target.value),Fn&&clearTimeout(Fn),Ut?Fn=setTimeout(ys,Ut):ys()}function wn(D){V&&console.log("unselectItem",D),n(1,X=X.filter(P=>P!==D)),qe.focus()}function ys(){ws()&&(n(30,re=0),Yt())}function ou(){V&&console.log("onInputClick"),Ts()}function iu(D){V&&console.log("onEsc"),D.stopPropagation(),He&&(qe.focus(),We())}function uu(D){V&&console.log("onBackspace"),wn(X[X.length-1])}function lu(){V&&console.log("onFocus"),C(),Ts()}function ru(){V&&console.log("onBlur"),hn&&We(),S()}function Ts(){if(V&&console.log("resetListToAllItemsAndOpen"),a&&!be.length?ws():_e||n(31,de=be),Yt(),X){V&&console.log("Searching currently selected item: "+JSON.stringify(X));const D=Bs(X,de);D>=0&&(n(30,re=D),Gt())}}function Bs(D,P){V&&console.log("Finding index for item",D);let H=-1;for(let Z=0;Z<P.length;Z++){const he=P[Z];if(typeof he>"u"){V&&console.log(`listItem ${Z} is undefined. Skipping.`);continue}if(V&&console.log("Item "+Z+": "+JSON.stringify(he)),D===he.item){H=Z;break}}return V&&(H>=0?console.log("Found index for item: "+H):console.warn("Not found index for item: "+D)),H}function Yt(){V&&console.log("open"),!(u||As())&&(n(37,kt=!0),n(94,He=!0))}function We(){V&&console.log("close"),n(94,He=!1),n(36,Wt=!1),!_e&&B&&(n(30,re=0),Vt())}function As(){return I>0&&Ct<I&&(a||Ct>0)}function Ss(){return As()?(We(),!0):!1}function Is(){V&&console.log("clear"),n(2,_e=""),n(1,X=q?[]:void 0),setTimeout(()=>{qe.focus()})}function js(D,P){return H=>{let Z=H[P];const he=Object.assign({highlighted:void 0},H);he.highlighted=Z;const Fe=Z.toLowerCase(),vt=M?$t(Fe):Fe;if(D&&D.length){const Zt=[];for(let ut=0;ut<D.length;ut++){let Be=D[ut];M&&(Be=$t(Be));const lt=Be.length;let Ae=0;do if(Ae=vt.indexOf(Be,Ae),Ae>=0){let Xt=Ae+lt;Zt.push([Ae,Xt]),Ae=Xt}while(Ae!==-1)}if(Zt.length>0){const ut=new Set;for(let Be=0;Be<Zt.length;Be++){const lt=Zt[Be],Ae=lt[0],Xt=lt[1],Au=Fe.substring(Ae,Xt);ut.add(Au)}for(let Be of ut){if(Be==="b")continue;const lt=new RegExp("("+Be+")","ig"),Ae=he.highlighted.replace(lt,"<b>$1</b>");he.highlighted=Ae}}}return he}}function au(D){return X?q?X.includes(D):D===X:!1}let Qt=!1;function Ns(D,P){ot&&D.dataTransfer.setData("source",P)}function En(D,P){ot&&(D.preventDefault(),n(38,Qt=P))}function Ls(D,P){ot&&n(38,Qt=!1)}function yn(D,P){if(ot){D.preventDefault(),n(38,Qt=!1);let H=parseInt(D.dataTransfer.getData("source")),Z=P;H!=Z&&cu(H,Z)}}function cu(D,P){let H=[...X];D<P?(H.splice(P+1,0,H[D]),H.splice(D,1)):(H.splice(P,0,H[D]),H.splice(D+1,1)),n(1,X=H)}function fu(){const{height:D}=window.visualViewport,{bottom:P,height:H}=Ht.getBoundingClientRect(),{height:Z}=Te.getBoundingClientRect();P+Z>D?n(34,Te.style.top=`-${H+Z}px`,Te):n(34,Te.style.top="0px",Te)}const mu=()=>n(37,kt=!0),du=(D,P)=>{P.key=="Enter"&&wn(D)},_u=(D,P)=>Ns(P,D),hu=(D,P)=>En(P,D),Du=(D,P)=>Ls(),pu=(D,P)=>yn(P,D);function gu(D){ge[D?"unshift":"push"](()=>{qe=D,n(33,qe)})}function bu(){_e=this.value,n(2,_e)}const Fu=D=>En(D,X.length-1),Cu=D=>yn(D,X.length-1),ku=D=>{D.key=="Enter"&&Is()};function vu(D){ge[D?"unshift":"push"](()=>{Ht=D,n(35,Ht)})}const wu=D=>vn(D),Eu=(D,P)=>{P.key=="Enter"&&vn(D)},yu=D=>{n(30,re=D)},Tu=D=>{D.key=="Enter"&&Vt()};function Bu(D){ge[D?"unshift":"push"](()=>{Te=D,n(34,Te)})}return t.$$set=D=>{e=sn(sn({},e),Iu(D)),n(60,r=Rs(e,l)),"items"in D&&n(0,c=D.items),"searchFunction"in D&&n(63,a=D.searchFunction),"labelFieldName"in D&&n(64,_=D.labelFieldName),"keywordsFieldName"in D&&n(65,m=D.keywordsFieldName),"valueFieldName"in D&&n(66,h=D.valueFieldName),"labelFunction"in D&&n(67,p=D.labelFunction),"keywordsFunction"in D&&n(68,F=D.keywordsFunction),"valueFunction"in D&&n(3,b=D.valueFunction),"keywordsCleanFunction"in D&&n(69,g=D.keywordsCleanFunction),"textCleanFunction"in D&&n(70,y=D.textCleanFunction),"beforeChange"in D&&n(71,A=D.beforeChange),"onChange"in D&&n(72,T=D.onChange),"onFocus"in D&&n(73,C=D.onFocus),"onBlur"in D&&n(74,S=D.onBlur),"onCreate"in D&&n(75,j=D.onCreate),"selectFirstIfEmpty"in D&&n(76,B=D.selectFirstIfEmpty),"minCharactersToSearch"in D&&n(77,I=D.minCharactersToSearch),"maxItemsToShowInList"in D&&n(4,z=D.maxItemsToShowInList),"multiple"in D&&n(5,q=D.multiple),"create"in D&&n(6,se=D.create),"ignoreAccents"in D&&n(78,M=D.ignoreAccents),"matchAllKeywords"in D&&n(79,Y=D.matchAllKeywords),"sortByMatchedKeywords"in D&&n(80,Ye=D.sortByMatchedKeywords),"itemFilterFunction"in D&&n(81,Rt=D.itemFilterFunction),"itemSortFunction"in D&&n(82,Mt=D.itemSortFunction),"lock"in D&&n(83,Pt=D.lock),"delay"in D&&n(84,Ut=D.delay),"localFiltering"in D&&n(85,zt=D.localFiltering),"localSorting"in D&&n(86,dn=D.localSorting),"cleanUserText"in D&&n(87,_n=D.cleanUserText),"lowercaseKeywords"in D&&n(88,qt=D.lowercaseKeywords),"closeOnBlur"in D&&n(89,hn=D.closeOnBlur),"orderableSelection"in D&&n(90,ot=D.orderableSelection),"hideArrow"in D&&n(7,ts=D.hideArrow),"showClear"in D&&n(91,Dn=D.showClear),"clearText"in D&&n(8,ns=D.clearText),"showLoadingIndicator"in D&&n(9,ss=D.showLoadingIndicator),"noResultsText"in D&&n(10,os=D.noResultsText),"loadingText"in D&&n(11,is=D.loadingText),"moreItemsText"in D&&n(12,us=D.moreItemsText),"createText"in D&&n(13,ls=D.createText),"placeholder"in D&&n(14,rs=D.placeholder),"className"in D&&n(15,as=D.className),"inputClassName"in D&&n(16,cs=D.inputClassName),"inputId"in D&&n(17,it=D.inputId),"name"in D&&n(18,fs=D.name),"selectName"in D&&n(19,ms=D.selectName),"selectId"in D&&n(20,ds=D.selectId),"title"in D&&n(21,_s=D.title),"html5autocomplete"in D&&n(22,hs=D.html5autocomplete),"autocompleteOffValue"in D&&n(23,Ds=D.autocompleteOffValue),"readonly"in D&&n(24,ps=D.readonly),"dropdownClassName"in D&&n(25,gs=D.dropdownClassName),"disabled"in D&&n(26,bs=D.disabled),"noInputStyles"in D&&n(27,Fs=D.noInputStyles),"required"in D&&n(28,Cs=D.required),"debug"in D&&n(92,V=D.debug),"tabindex"in D&&n(29,ks=D.tabindex),"selectedItem"in D&&n(1,X=D.selectedItem),"value"in D&&n(61,pn=D.value),"highlightedItem"in D&&n(62,gn=D.highlightedItem),"text"in D&&n(2,_e=D.text),"$$scope"in D&&n(96,f=D.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1|t.$$.dirty[2]&2&&(a||Kt()),t.$$.dirty[0]&2&&Yi(),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(62,gn=de&&re&&re>=0&&re<de.length?de[re].item:null),t.$$.dirty[0]&1|t.$$.dirty[3]&6&&n(41,s=He&&(c&&c.length>0||Ct>0)),t.$$.dirty[0]&34&&n(32,o=q&&X&&X.length>0||!q&&X),t.$$.dirty[0]&32|t.$$.dirty[1]&2|t.$$.dirty[2]&538968064&&n(40,i=Dn||(Pt||q)&&o),t.$$.dirty[1]&2|t.$$.dirty[2]&2097152&&n(39,u=Pt&&o)},[c,X,_e,b,z,q,se,ts,ns,ss,os,is,us,ls,rs,as,cs,it,fs,ms,ds,_s,hs,Ds,ps,gs,bs,Fs,Cs,ks,re,de,o,qe,Te,Ht,Wt,kt,Qt,u,i,s,vs,Cn,Vt,vn,$i,eu,tu,su,wn,ou,lu,ru,Is,au,Ns,En,Ls,yn,r,pn,gn,a,_,m,h,p,F,g,y,A,T,C,S,j,B,I,M,Y,Ye,Rt,Mt,Pt,Ut,zt,dn,_n,qt,hn,ot,Dn,V,js,He,Ct,f,d,mu,du,_u,hu,Du,pu,gu,bu,Fu,Cu,ku,vu,wu,Eu,yu,Tu,Bu]}class bt extends ce{constructor(e){super(),ae(this,e,zl,Ml,le,{items:0,searchFunction:63,labelFieldName:64,keywordsFieldName:65,valueFieldName:66,labelFunction:67,keywordsFunction:68,valueFunction:3,keywordsCleanFunction:69,textCleanFunction:70,beforeChange:71,onChange:72,onFocus:73,onBlur:74,onCreate:75,selectFirstIfEmpty:76,minCharactersToSearch:77,maxItemsToShowInList:4,multiple:5,create:6,ignoreAccents:78,matchAllKeywords:79,sortByMatchedKeywords:80,itemFilterFunction:81,itemSortFunction:82,lock:83,delay:84,localFiltering:85,localSorting:86,cleanUserText:87,lowercaseKeywords:88,closeOnBlur:89,orderableSelection:90,hideArrow:7,showClear:91,clearText:8,showLoadingIndicator:9,noResultsText:10,loadingText:11,moreItemsText:12,createText:13,placeholder:14,className:15,inputClassName:16,inputId:17,name:18,selectName:19,selectId:20,title:21,html5autocomplete:22,autocompleteOffValue:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:92,tabindex:29,selectedItem:1,value:61,highlightedItem:62,text:2,highlightFilter:93},null,[-1,-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[93]}}const at=[];function Ft(t,e=G){let n;const s=new Set;function o(l){if(le(t,l)&&(t=l,n)){const r=!at.length;for(const d of s)d[1](),at.push(d,t);if(r){for(let d=0;d<at.length;d+=2)at[d][0](at[d+1]);at.length=0}}}function i(l){o(l(t))}function u(l,r=G){const d=[l,r];return s.add(d),s.size===1&&(n=e(o)||G),l(t),()=>{s.delete(d),s.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:u}}globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;class ql extends Error{constructor(){super(),this.message="Missing Adapter"}}class tt{constructor(e){if(Object.defineProperty(this,"adapter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:null}),e)this.adapter=e;else throw new ql}read(){this.data=this.adapter.read()}write(){this.data!==null&&this.adapter.write(this.data)}}var po=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},en=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},yt,Tt;class Hl{constructor(e,n){yt.set(this,void 0),Tt.set(this,void 0),po(this,yt,e,"f"),po(this,Tt,n,"f")}read(){const e=en(this,Tt,"f").getItem(en(this,yt,"f"));return e===null?null:JSON.parse(e)}write(e){en(this,Tt,"f").setItem(en(this,yt,"f"),JSON.stringify(e))}}yt=new WeakMap,Tt=new WeakMap;class nt extends Hl{constructor(e){super(e,localStorage)}}const Me=Ft(new tt(new nt("settings"))),xe=cn(Me);xe.read();xe.data||(xe.data={});const Wl={channel:"",show_chat:!1,use_tts:!1,tts_language:"en-US",read_broadcaster:!0,read_moderators:!0,read_vip_users:!0,read_subscribers:!0,read_nonsubscribers:!1,read_partners:!0,read_sub_gift_leaders:!0,read_bit_leaders:!0,read_sub_gifters_over:10,remove_twitch_emotes:!0,remove_ffz_emotes:!0,remove_bttv_emotes:!0,remove_7tv_emotes:!0,skip_emote_only_messages:!0,say_usernames:!0,username_separator:"says",question_separator:"asks",reply_separator:"replies to",username_only_link_separator:"sends",skip_over_numbers_in_usernames:!1,remove_mentions_at_blacklisted_users:!1,link_text:"link",use_aoe_taunts:!1,volume:1,speed:1,preserve_pitch:!0};xe.data={...Wl,...xe.data};Me.set(xe);const De=new tt(new nt("usernames"));De.read();De.data||(De.data={});const je=new tt(new nt("users_blacklist"));je.read();je.data||(je.data=[{user_id:100135110,username:"streamelements"},{user_id:105166207,username:"streamlabs"},{user_id:19264788,username:"nightbot"},{user_id:216527497,username:"soundalerts"},{user_id:786049415,username:"spectatordashboard"}]);const Ne=new tt(new nt("users_whitelist"));Ne.read();Ne.data||(Ne.data=[]);const Le=new tt(new nt("users_aliases"));Le.read();Le.data||(Le.data=[]);const Oe=new tt(new nt("users_tts_languages"));Oe.read();Oe.data||(Oe.data=[]);const Re=new tt(new nt("channel_point_rewards_whitelist"));Re.read();Re.data||(Re.data=[]);const Et=Object.freeze(Object.defineProperty({__proto__:null,channel_point_rewards_whitelist_db:Re,settings_db:Me,usernames_db:De,users_aliases_db:Le,users_blacklist_db:je,users_tts_languages_db:Oe,users_whitelist_db:Ne},Symbol.toStringTag,{value:"Module"}));function Kl(t){let e=t[0].username+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=s[0].username+"")&&Q(n,e)},i:G,o:G,d(s){s&&k(n)}}}function Jl(t){let e,n;return e=new bt({props:{items:Object.entries(De.data),labelFunction:Gl,maxItemsToShowInList:3,dropdownClassName:`${t[1]>2?"-top":"-bottom"}`,hideArrow:!0,placeholder:"search users...",noResultsText:"No users found",moreItemsText:"users not shown",onChange:t[6]}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.dropdownClassName=`${s[1]>2?"-top":"-bottom"}`),e.$set(i)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Vl(t){let e,n,s=t[1]+1+"",o,i,u,l,r,d,f,c,a,_,m,h,p,F;const b=[Jl,Kl],g=[];function y(A,T){return A[2]?0:1}return l=y(t),r=g[l]=b[l](t),{c(){e=E("tr"),n=E("th"),o=U(s),i=O(),u=E("td"),r.c(),d=O(),f=E("td"),c=E("button"),c.textContent="Edit",a=O(),_=E("button"),m=U(t[3]),N(n,"scope","row"),N(c,"class","btn-small small"),N(_,"class","btn-small danger small"),N(f,"class","align-right")},m(A,T){v(A,e,T),w(e,n),w(n,o),w(e,i),w(e,u),g[l].m(u,null),w(e,d),w(e,f),w(f,c),w(f,a),w(f,_),w(_,m),h=!0,p||(F=[W(c,"click",t[4]),W(_,"click",t[5])],p=!0)},p(A,[T]){(!h||T&2)&&s!==(s=A[1]+1+"")&&Q(o,s);let C=l;l=y(A),l===C?g[l].p(A,T):(te(),R(g[C],1,1,()=>{g[C]=null}),ne(),r=g[l],r?r.p(A,T):(r=g[l]=b[l](A),r.c()),L(r,1),r.m(u,null)),(!h||T&8)&&Q(m,A[3])},i(A){h||(L(r),h=!0)},o(A){R(r),h=!1},d(A){A&&k(e),g[l].d(),p=!1,oe(F)}}}function Gl([t,e]){return e}function Yl(t,e,n){let{user:s}=e,{index:o}=e,{remove_self:i}=e,{update_self:u}=e,l=!s.username,r=!1,d="Remove";function f(){n(2,l=!l)}function c(){if(!r){r=!0,n(3,d+="?");return}i(o)}function a(_){_&&(n(0,s={user_id:Number(_[0]),username:_[1]}),u(o,s),f())}return t.$$set=_=>{"user"in _&&n(0,s=_.user),"index"in _&&n(1,o=_.index),"remove_self"in _&&n(7,i=_.remove_self),"update_self"in _&&n(8,u=_.update_self)},[s,o,l,d,f,c,a,i,u]}class Ql extends ce{constructor(e){super(),ae(this,e,Yl,Vl,le,{user:0,index:1,remove_self:7,update_self:8})}}const Zl={Date:!0,RegExp:!0,String:!0,Number:!0};function st(t,e,n={cyclesFix:!0},s=[]){var l,r;let o=[];const i=Array.isArray(t);for(const d in t){const f=t[d],c=i?+d:d;if(!(d in e)){o.push({type:"REMOVE",path:[c],oldValue:t[d]});continue}const a=e[d],_=typeof f=="object"&&typeof a=="object";if(f&&a&&_&&!Zl[(r=(l=Object.getPrototypeOf(f))==null?void 0:l.constructor)==null?void 0:r.name]&&(!n.cyclesFix||!s.includes(f))){const m=st(f,a,n,n.cyclesFix?s.concat([f]):[]);o.push.apply(o,m.map(h=>(h.path.unshift(c),h)))}else f!==a&&!(_&&(isNaN(f)?f+""==a+"":+f==+a))&&o.push({path:[c],type:"CHANGE",value:a,oldValue:f})}const u=Array.isArray(e);for(const d in e)d in t||o.push({type:"CREATE",path:[u?+d:d],value:e[d]});return o}function Je(t){var e,n,s;if(Array.isArray(t)){for(n=Array(e=t.length);e--;)n[e]=(s=t[e])&&typeof s=="object"?Je(s):s;return n}if(Object.prototype.toString.call(t)==="[object Object]"){n={};for(e in t)e==="__proto__"?Object.defineProperty(n,e,{value:Je(t[e]),configurable:!0,enumerable:!0,writable:!0}):n[e]=(s=t[e])&&typeof s=="object"?Je(s):s;return n}return t}function go(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function bo(t){let e,n,s,o,i,u=[],l=new Map,r,d=t[0];const f=c=>c[6].user_id;for(let c=0;c<d.length;c+=1){let a=go(t,d,c),_=f(a);l.set(_,u[c]=Fo(_,a))}return{c(){e=E("figure"),n=E("table"),s=E("thead"),s.innerHTML=`<tr><th scope="col">#</th> 
                    <th scope="col">Username</th> 
                    <th scope="col"></th></tr>`,o=O(),i=E("tbody");for(let c=0;c<u.length;c+=1)u[c].c();N(n,"role","grid")},m(c,a){v(c,e,a),w(e,n),w(n,s),w(n,o),w(n,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(c,a){a&11&&(d=c[0],te(),u=ze(u,a,f,1,c,d,l,i,et,Fo,null,go),ne())},i(c){if(!r){for(let a=0;a<d.length;a+=1)L(u[a]);r=!0}},o(c){for(let a=0;a<u.length;a+=1)R(u[a]);r=!1},d(c){c&&k(e);for(let a=0;a<u.length;a+=1)u[a].d()}}}function Fo(t,e){let n,s,o;return s=new Ql({props:{user:e[6],index:e[8],remove_self:e[1],update_self:e[3]}}),{key:t,first:null,c(){n=ue(),ee(s.$$.fragment),this.first=n},m(i,u){v(i,n,u),x(s,i,u),o=!0},p(i,u){e=i;const l={};u&1&&(l.user=e[6]),u&1&&(l.index=e[8]),s.$set(l)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){R(s.$$.fragment,i),o=!1},d(i){i&&k(n),$(s,i)}}}function Xl(t){let e,n,s,o,i,u,l,r,d,f=t[0].length>0&&bo(t);return{c(){e=E("h3"),e.textContent="Users blacklist",n=O(),s=E("p"),s.textContent="These users will be skipped in TTS.",o=O(),f&&f.c(),i=O(),u=E("button"),u.textContent="Add new"},m(c,a){v(c,e,a),v(c,n,a),v(c,s,a),v(c,o,a),f&&f.m(c,a),v(c,i,a),v(c,u,a),l=!0,r||(d=W(u,"click",t[2]),r=!0)},p(c,[a]){c[0].length>0?f?(f.p(c,a),a&1&&L(f,1)):(f=bo(c),f.c(),L(f,1),f.m(i.parentNode,i)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){l||(L(f),l=!0)},o(c){R(f),l=!1},d(c){c&&k(e),c&&k(n),c&&k(s),c&&k(o),f&&f.d(c),c&&k(i),c&&k(u),r=!1,d()}}}function xl(t,e,n){const s=()=>{if(!Array.isArray(o))return console.error("Blacklisted users error");n(0,o=o.filter((r,d,f)=>{if(!(r!=null&&r.username))return!1;const c=f.findIndex(a=>(a==null?void 0:a.user_id)==(r==null?void 0:r.user_id));return!(c>=0&&d!==c)})),!(st(je.data,o).length<1)&&(je.data=o,je.write())};let o=Je(je.data);function i(r){o.splice(r,1),n(0,o)}function u(){o.push({user_id:crypto.randomUUID(),username:""}),n(0,o)}function l(r,d){if(o.find(f=>f.user_id===d.user_id))return console.error("Selected existing user!");n(0,o[r]=d,o),n(0,o)}return[o,i,u,l,s]}class $l extends ce{constructor(e){super(),ae(this,e,xl,Xl,le,{save_items:4})}get save_items(){return this.$$.ctx[4]}}function er(t){let e=t[0].username+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=s[0].username+"")&&Q(n,e)},i:G,o:G,d(s){s&&k(n)}}}function tr(t){let e,n;return e=new bt({props:{items:Object.entries(De.data),labelFunction:sr,maxItemsToShowInList:3,dropdownClassName:`${t[1]>2?"-top":"-bottom"}`,hideArrow:!0,placeholder:"search users...",noResultsText:"No users found",moreItemsText:"users not shown",onChange:t[6]}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.dropdownClassName=`${s[1]>2?"-top":"-bottom"}`),e.$set(i)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function nr(t){let e,n,s=t[1]+1+"",o,i,u,l,r,d,f,c,a,_,m,h,p,F;const b=[tr,er],g=[];function y(A,T){return A[2]?0:1}return l=y(t),r=g[l]=b[l](t),{c(){e=E("tr"),n=E("th"),o=U(s),i=O(),u=E("td"),r.c(),d=O(),f=E("td"),c=E("button"),c.textContent="Edit",a=O(),_=E("button"),m=U(t[3]),N(n,"scope","row"),N(c,"class","btn-small small"),N(_,"class","btn-small danger small"),N(f,"class","align-right")},m(A,T){v(A,e,T),w(e,n),w(n,o),w(e,i),w(e,u),g[l].m(u,null),w(e,d),w(e,f),w(f,c),w(f,a),w(f,_),w(_,m),h=!0,p||(F=[W(c,"click",t[4]),W(_,"click",t[5])],p=!0)},p(A,[T]){(!h||T&2)&&s!==(s=A[1]+1+"")&&Q(o,s);let C=l;l=y(A),l===C?g[l].p(A,T):(te(),R(g[C],1,1,()=>{g[C]=null}),ne(),r=g[l],r?r.p(A,T):(r=g[l]=b[l](A),r.c()),L(r,1),r.m(u,null)),(!h||T&8)&&Q(m,A[3])},i(A){h||(L(r),h=!0)},o(A){R(r),h=!1},d(A){A&&k(e),g[l].d(),p=!1,oe(F)}}}function sr([t,e]){return e}function or(t,e,n){let{user:s}=e,{index:o}=e,{remove_self:i}=e,{update_self:u}=e,l=!s.username,r=!1,d="Remove";function f(){n(2,l=!l)}function c(){if(!r){r=!0,n(3,d+="?");return}i(o)}function a(_){_&&(n(0,s={user_id:Number(_[0]),username:_[1]}),u(o,s),f())}return t.$$set=_=>{"user"in _&&n(0,s=_.user),"index"in _&&n(1,o=_.index),"remove_self"in _&&n(7,i=_.remove_self),"update_self"in _&&n(8,u=_.update_self)},[s,o,l,d,f,c,a,i,u]}class ir extends ce{constructor(e){super(),ae(this,e,or,nr,le,{user:0,index:1,remove_self:7,update_self:8})}}function Co(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function ko(t){let e,n,s,o,i,u=[],l=new Map,r,d=t[0];const f=c=>c[6].user_id;for(let c=0;c<d.length;c+=1){let a=Co(t,d,c),_=f(a);l.set(_,u[c]=vo(_,a))}return{c(){e=E("figure"),n=E("table"),s=E("thead"),s.innerHTML=`<tr><th scope="col">#</th> 
                    <th scope="col">Username</th> 
                    <th scope="col"></th></tr>`,o=O(),i=E("tbody");for(let c=0;c<u.length;c+=1)u[c].c();N(n,"role","grid")},m(c,a){v(c,e,a),w(e,n),w(n,s),w(n,o),w(n,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(c,a){a&11&&(d=c[0],te(),u=ze(u,a,f,1,c,d,l,i,et,vo,null,Co),ne())},i(c){if(!r){for(let a=0;a<d.length;a+=1)L(u[a]);r=!0}},o(c){for(let a=0;a<u.length;a+=1)R(u[a]);r=!1},d(c){c&&k(e);for(let a=0;a<u.length;a+=1)u[a].d()}}}function vo(t,e){let n,s,o;return s=new ir({props:{user:e[6],index:e[8],remove_self:e[1],update_self:e[3]}}),{key:t,first:null,c(){n=ue(),ee(s.$$.fragment),this.first=n},m(i,u){v(i,n,u),x(s,i,u),o=!0},p(i,u){e=i;const l={};u&1&&(l.user=e[6]),u&1&&(l.index=e[8]),s.$set(l)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){R(s.$$.fragment,i),o=!1},d(i){i&&k(n),$(s,i)}}}function ur(t){let e,n,s,o,i,u,l,r,d,f=t[0].length>0&&ko(t);return{c(){e=E("h3"),e.textContent="Users whitelist",n=O(),s=E("p"),s.textContent="These users will not be skipped in TTS.",o=O(),f&&f.c(),i=O(),u=E("button"),u.textContent="Add new"},m(c,a){v(c,e,a),v(c,n,a),v(c,s,a),v(c,o,a),f&&f.m(c,a),v(c,i,a),v(c,u,a),l=!0,r||(d=W(u,"click",t[2]),r=!0)},p(c,[a]){c[0].length>0?f?(f.p(c,a),a&1&&L(f,1)):(f=ko(c),f.c(),L(f,1),f.m(i.parentNode,i)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){l||(L(f),l=!0)},o(c){R(f),l=!1},d(c){c&&k(e),c&&k(n),c&&k(s),c&&k(o),f&&f.d(c),c&&k(i),c&&k(u),r=!1,d()}}}function lr(t,e,n){const s=()=>{if(!Array.isArray(o))return console.error("Whitelisted users error");n(0,o=o.filter((r,d,f)=>{if(!(r!=null&&r.username))return!1;const c=f.findIndex(a=>(a==null?void 0:a.user_id)==(r==null?void 0:r.user_id));return!(c>=0&&d!==c)})),!(st(Ne.data,o).length<1)&&(Ne.data=o,Ne.write())};let o=Je(Ne.data);function i(r){o.splice(r,1),n(0,o)}function u(){o.push({user_id:crypto.randomUUID(),username:""}),n(0,o)}function l(r,d){if(o.find(f=>f.user_id===d.user_id))return console.error("Selected existing user!");n(0,o[r]=d,o),n(0,o)}return[o,i,u,l,s]}class rr extends ce{constructor(e){super(),ae(this,e,lr,ur,le,{save_items:4})}get save_items(){return this.$$.ctx[4]}}function ar(t){let e=t[0].username+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=s[0].username+"")&&Q(n,e)},i:G,o:G,d(s){s&&k(n)}}}function cr(t){let e,n;return e=new bt({props:{items:Object.entries(De.data),labelFunction:_r,maxItemsToShowInList:3,dropdownClassName:`${t[1]>2?"-top":"-bottom"}`,hideArrow:!0,placeholder:"search users...",noResultsText:"No users found",moreItemsText:"users not shown",onChange:t[7]}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.dropdownClassName=`${s[1]>2?"-top":"-bottom"}`),e.$set(i)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function fr(t){let e=t[0].alias+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=s[0].alias+"")&&Q(n,e)},d(s){s&&k(n)}}}function mr(t){let e,n,s,o;return{c(){e=E("input"),N(e,"type","text"),e.value=n=t[0].alias},m(i,u){v(i,e,u),s||(o=W(e,"input",t[8]),s=!0)},p(i,u){u&1&&n!==(n=i[0].alias)&&e.value!==n&&(e.value=n)},d(i){i&&k(e),s=!1,o()}}}function dr(t){let e,n,s=t[1]+1+"",o,i,u,l,r,d,f,c,a,_,m,h,p,F,b,g;const y=[cr,ar],A=[];function T(B,I){return B[2]?0:1}l=T(t),r=A[l]=y[l](t);function C(B,I){return B[3]?mr:fr}let S=C(t),j=S(t);return{c(){e=E("tr"),n=E("th"),o=U(s),i=O(),u=E("td"),r.c(),d=O(),f=E("td"),j.c(),c=O(),a=E("td"),_=E("button"),_.textContent="Edit",m=O(),h=E("button"),p=U(t[4]),N(n,"scope","row"),N(_,"class","btn-small small"),N(h,"class","btn-small danger small"),N(a,"class","align-right")},m(B,I){v(B,e,I),w(e,n),w(n,o),w(e,i),w(e,u),A[l].m(u,null),w(e,d),w(e,f),j.m(f,null),w(e,c),w(e,a),w(a,_),w(a,m),w(a,h),w(h,p),F=!0,b||(g=[W(_,"click",t[5]),W(h,"click",t[6])],b=!0)},p(B,[I]){(!F||I&2)&&s!==(s=B[1]+1+"")&&Q(o,s);let z=l;l=T(B),l===z?A[l].p(B,I):(te(),R(A[z],1,1,()=>{A[z]=null}),ne(),r=A[l],r?r.p(B,I):(r=A[l]=y[l](B),r.c()),L(r,1),r.m(u,null)),S===(S=C(B))&&j?j.p(B,I):(j.d(1),j=S(B),j&&(j.c(),j.m(f,null))),(!F||I&16)&&Q(p,B[4])},i(B){F||(L(r),F=!0)},o(B){R(r),F=!1},d(B){B&&k(e),A[l].d(),j.d(),b=!1,oe(g)}}}function _r([t,e]){return e}function hr(t,e,n){let{user:s}=e,{index:o}=e,{remove_self:i}=e,{update_self:u}=e,l=!s.username,r=!!s.username,d=!1,f="Remove";function c(){n(2,l=!l),n(3,r=!!s.username)}function a(){if(!d){d=!0,n(4,f+="?");return}i(o)}function _(h){h&&(n(0,s={...s,user_id:Number(h[0]),username:h[1]}),u(o,s),n(3,r=!0))}function m(h){const p=h.target.value;n(0,s={...s,alias:p}),u(o,s,!0)}return t.$$set=h=>{"user"in h&&n(0,s=h.user),"index"in h&&n(1,o=h.index),"remove_self"in h&&n(9,i=h.remove_self),"update_self"in h&&n(10,u=h.update_self)},[s,o,l,r,f,c,a,_,m,i,u]}class Dr extends ce{constructor(e){super(),ae(this,e,hr,dr,le,{user:0,index:1,remove_self:9,update_self:10})}}function wo(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Eo(t){let e,n,s,o,i,u=[],l=new Map,r,d=t[0];const f=c=>c[6].user_id;for(let c=0;c<d.length;c+=1){let a=wo(t,d,c),_=f(a);l.set(_,u[c]=yo(_,a))}return{c(){e=E("figure"),n=E("table"),s=E("thead"),s.innerHTML=`<tr><th scope="col">#</th> 
                    <th scope="col">Username</th> 
                    <th scope="col">Alias</th> 
                    <th scope="col"></th></tr>`,o=O(),i=E("tbody");for(let c=0;c<u.length;c+=1)u[c].c();N(n,"role","grid"),N(e,"class","-has-autocomplete")},m(c,a){v(c,e,a),w(e,n),w(n,s),w(n,o),w(n,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(c,a){a&11&&(d=c[0],te(),u=ze(u,a,f,1,c,d,l,i,et,yo,null,wo),ne())},i(c){if(!r){for(let a=0;a<d.length;a+=1)L(u[a]);r=!0}},o(c){for(let a=0;a<u.length;a+=1)R(u[a]);r=!1},d(c){c&&k(e);for(let a=0;a<u.length;a+=1)u[a].d()}}}function yo(t,e){let n,s,o;return s=new Dr({props:{user:e[6],index:e[8],remove_self:e[1],update_self:e[3]}}),{key:t,first:null,c(){n=ue(),ee(s.$$.fragment),this.first=n},m(i,u){v(i,n,u),x(s,i,u),o=!0},p(i,u){e=i;const l={};u&1&&(l.user=e[6]),u&1&&(l.index=e[8]),s.$set(l)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){R(s.$$.fragment,i),o=!1},d(i){i&&k(n),$(s,i)}}}function pr(t){let e,n,s,o,i,u,l,r,d,f=t[0].length>0&&Eo(t);return{c(){e=E("h3"),e.textContent="Users aliases",n=O(),s=E("p"),s.textContent="These aliases replace usernames in TTS.",o=O(),f&&f.c(),i=O(),u=E("button"),u.textContent="Add new"},m(c,a){v(c,e,a),v(c,n,a),v(c,s,a),v(c,o,a),f&&f.m(c,a),v(c,i,a),v(c,u,a),l=!0,r||(d=W(u,"click",t[2]),r=!0)},p(c,[a]){c[0].length>0?f?(f.p(c,a),a&1&&L(f,1)):(f=Eo(c),f.c(),L(f,1),f.m(i.parentNode,i)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){l||(L(f),l=!0)},o(c){R(f),l=!1},d(c){c&&k(e),c&&k(n),c&&k(s),c&&k(o),f&&f.d(c),c&&k(i),c&&k(u),r=!1,d()}}}function gr(t,e,n){const s=()=>{if(!Array.isArray(o))return console.error("Users aliases error");n(0,o=o.filter((r,d,f)=>{if(!(r!=null&&r.username)||!(r!=null&&r.alias))return!1;const c=f.findIndex(a=>(a==null?void 0:a.user_id)==(r==null?void 0:r.user_id));return!(c>=0&&d!==c)})),!(st(Le.data,o).length<1)&&(Le.data=o,Le.write())};let o=Je(Le.data);function i(r){o.splice(r,1),n(0,o)}function u(){o.push({user_id:crypto.randomUUID(),username:"",alias:""}),n(0,o)}function l(r,d,f=!1){if(!f&&o.find(c=>c.user_id===d.user_id))return console.error("Selected existing user!");f?n(0,o[r].alias=d.alias,o):n(0,o[r]=d,o),n(0,o)}return[o,i,u,l,s]}class br extends ce{constructor(e){super(),ae(this,e,gr,pr,le,{save_items:4})}get save_items(){return this.$$.ctx[4]}}function Fr(t){let e=(De.data[t[0].user_id]||"")+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=(De.data[s[0].user_id]||"")+"")&&Q(n,e)},i:G,o:G,d(s){s&&k(n)}}}function Cr(t){let e,n;return e=new bt({props:{items:Object.entries(De.data),labelFunction:Er,maxItemsToShowInList:3,dropdownClassName:`${t[1]>2?"-top":"-bottom"}`,hideArrow:!0,placeholder:"search users...",noResultsText:"No users found",moreItemsText:"users not shown",selectedItem:t[9](),onChange:t[6]}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.dropdownClassName=`${s[1]>2?"-top":"-bottom"}`),e.$set(i)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function kr(t){var s;let e=(((s=t[8](t[0].tts_language))==null?void 0:s.name)||"")+"",n;return{c(){n=U(e)},m(o,i){v(o,n,i)},p(o,i){var u;i&1&&e!==(e=(((u=o[8](o[0].tts_language))==null?void 0:u.name)||"")+"")&&Q(n,e)},i:G,o:G,d(o){o&&k(n)}}}function vr(t){let e,n;return e=new bt({props:{items:Lt[Si],labelFieldName:"name",maxItemsToShowInList:3,dropdownClassName:`${t[1]>2?"-top":"-bottom"}`,hideArrow:!0,placeholder:"choose TTS language",selectedItem:t[8](t[0].tts_language),onChange:t[7]}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.dropdownClassName=`${s[1]>2?"-top":"-bottom"}`),o&1&&(i.selectedItem=s[8](s[0].tts_language)),e.$set(i)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function wr(t){let e,n,s=t[1]+1+"",o,i,u,l,r,d,f,c,a,_,m,h,p,F,b,g,y,A;const T=[Cr,Fr],C=[];function S(z,q){return z[2]?0:1}l=S(t),r=C[l]=T[l](t);const j=[vr,kr],B=[];function I(z,q){return z[2]?0:1}return c=I(t),a=B[c]=j[c](t),{c(){e=E("tr"),n=E("th"),o=U(s),i=O(),u=E("td"),r.c(),d=O(),f=E("td"),a.c(),_=O(),m=E("td"),h=E("button"),h.textContent="Edit",p=O(),F=E("button"),b=U(t[3]),N(n,"scope","row"),N(h,"class","btn-small small"),N(F,"class","btn-small danger small"),N(m,"class","align-right")},m(z,q){v(z,e,q),w(e,n),w(n,o),w(e,i),w(e,u),C[l].m(u,null),w(e,d),w(e,f),B[c].m(f,null),w(e,_),w(e,m),w(m,h),w(m,p),w(m,F),w(F,b),g=!0,y||(A=[W(h,"click",t[4]),W(F,"click",t[5])],y=!0)},p(z,[q]){(!g||q&2)&&s!==(s=z[1]+1+"")&&Q(o,s);let se=l;l=S(z),l===se?C[l].p(z,q):(te(),R(C[se],1,1,()=>{C[se]=null}),ne(),r=C[l],r?r.p(z,q):(r=C[l]=T[l](z),r.c()),L(r,1),r.m(u,null));let M=c;c=I(z),c===M?B[c].p(z,q):(te(),R(B[M],1,1,()=>{B[M]=null}),ne(),a=B[c],a?a.p(z,q):(a=B[c]=j[c](z),a.c()),L(a,1),a.m(f,null)),(!g||q&8)&&Q(b,z[3])},i(z){g||(L(r),L(a),g=!0)},o(z){R(r),R(a),g=!1},d(z){z&&k(e),C[l].d(),B[c].d(),y=!1,oe(A)}}}let Si="en-us";function Er([t,e]){return e}function yr(t,e,n){let{user:s}=e,{index:o}=e,{remove_self:i}=e,{update_self:u}=e,l=!s.tts_language,r=!1,d="Remove";function f(){n(2,l=!l)}function c(){if(!r){r=!0,n(3,d+="?");return}i(o)}function a(p){if(!p)return;const F=Number(p[0]);F!==s.user_id&&(n(0,s={...s,user_id:F}),u(o,s),s.tts_language&&n(2,l=!1))}function _(p){if(!p)return;const F=p==null?void 0:p.code;console.log("tts data:",p,"tts_language:",F),F!==s.tts_language&&(n(0,s={...s,tts_language:F}),u(o,s,!0),`${s.user_id}`.includes("-")||n(2,l=!1))}function m(p){if(p)return Lt[Si].find(F=>F.code.toLowerCase()===p.toLowerCase())}function h(){if(`${s.user_id}`.includes("-"))return;const p=De.data[s.user_id];return[s.user_id,p]}return t.$$set=p=>{"user"in p&&n(0,s=p.user),"index"in p&&n(1,o=p.index),"remove_self"in p&&n(10,i=p.remove_self),"update_self"in p&&n(11,u=p.update_self)},[s,o,l,d,f,c,a,_,m,h,i,u]}class Tr extends ce{constructor(e){super(),ae(this,e,yr,wr,le,{user:0,index:1,remove_self:10,update_self:11})}}function To(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Bo(t){let e,n,s,o,i,u=[],l=new Map,r,d=t[0];const f=c=>c[6].user_id;for(let c=0;c<d.length;c+=1){let a=To(t,d,c),_=f(a);l.set(_,u[c]=Ao(_,a))}return{c(){e=E("figure"),n=E("table"),s=E("thead"),s.innerHTML=`<tr><th scope="col">#</th> 
                    <th scope="col">Username</th> 
                    <th scope="col">TTS language</th> 
                    <th scope="col"></th></tr>`,o=O(),i=E("tbody");for(let c=0;c<u.length;c+=1)u[c].c();N(n,"role","grid"),N(e,"class","-has-autocomplete")},m(c,a){v(c,e,a),w(e,n),w(n,s),w(n,o),w(n,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(c,a){a&11&&(d=c[0],te(),u=ze(u,a,f,1,c,d,l,i,et,Ao,null,To),ne())},i(c){if(!r){for(let a=0;a<d.length;a+=1)L(u[a]);r=!0}},o(c){for(let a=0;a<u.length;a+=1)R(u[a]);r=!1},d(c){c&&k(e);for(let a=0;a<u.length;a+=1)u[a].d()}}}function Ao(t,e){let n,s,o;return s=new Tr({props:{user:e[6],index:e[8],remove_self:e[1],update_self:e[3]}}),{key:t,first:null,c(){n=ue(),ee(s.$$.fragment),this.first=n},m(i,u){v(i,n,u),x(s,i,u),o=!0},p(i,u){e=i;const l={};u&1&&(l.user=e[6]),u&1&&(l.index=e[8]),s.$set(l)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){R(s.$$.fragment,i),o=!1},d(i){i&&k(n),$(s,i)}}}function Br(t){let e,n,s,o,i,u,l,r,d,f=t[0].length>0&&Bo(t);return{c(){e=E("h3"),e.textContent="Users TTS languages",n=O(),s=E("p"),s.textContent="Change TTS language for each user.",o=O(),f&&f.c(),i=O(),u=E("button"),u.textContent="Add new"},m(c,a){v(c,e,a),v(c,n,a),v(c,s,a),v(c,o,a),f&&f.m(c,a),v(c,i,a),v(c,u,a),l=!0,r||(d=W(u,"click",t[2]),r=!0)},p(c,[a]){c[0].length>0?f?(f.p(c,a),a&1&&L(f,1)):(f=Bo(c),f.c(),L(f,1),f.m(i.parentNode,i)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){l||(L(f),l=!0)},o(c){R(f),l=!1},d(c){c&&k(e),c&&k(n),c&&k(s),c&&k(o),f&&f.d(c),c&&k(i),c&&k(u),r=!1,d()}}}function Ar(t,e,n){const s=()=>{if(!Array.isArray(o))return console.error("Users TTS languages error");n(0,o=o.filter((r,d,f)=>{if(`${r.user_id}`.includes("-")||!(r!=null&&r.tts_language))return!1;const c=f.findIndex(a=>(a==null?void 0:a.user_id)==(r==null?void 0:r.user_id));return!(c>=0&&d!==c)})),!(st(Oe.data,o).length<1)&&(Oe.data=o,Oe.write())};let o=Je(Oe.data);function i(r){o.splice(r,1),n(0,o)}function u(){o.push({user_id:crypto.randomUUID(),tts_language:""}),n(0,o)}function l(r,d,f=!1){if(!f&&o.find(c=>c.user_id===d.user_id))return console.error("Selected existing user!");f?n(0,o[r].tts_language=d.tts_language,o):n(0,o[r]=d,o),n(0,o)}return[o,i,u,l,s]}class Sr extends ce{constructor(e){super(),ae(this,e,Ar,Br,le,{save_items:4})}get save_items(){return this.$$.ctx[4]}}const Ir="a tak dále",jr="jojo",Nr="nene",Lr="i de",Or="dží dží",Rr="dží džís",Mr="mimochodem",Pr="tyvole",Ur="tyvole",zr="tyvole",qr="tyvole",Hr="jasně",Wr="chápu",Kr="chápeš",Jr="chápat",Vr="vépé",Gr="piča",Yr="pičo",Qr="pičovina",Zr="pičovinka",Xr="typičo",xr="nevím",$r="nevím",ea="nevím",ta="ve mena",na="a o e",sa="kjů",oa="versus",ia="zpět",ua="kokot",la="kokoti",ra="kokote",aa="týsí",ca="týsíčko",fa="ef sí",ma="ef síčko",da="t t es",_a="t t esko",ha="t t eska",Da="t t esku",pa="cé aa",ga="cé aa čka",ba="čas",Fa="ii kvé",Ca="určitě",ka="věc",va="víc",wa="víme",Ea="té gé",ya="té gé",Ta="es té bé",Ba="lovka",Aa="cé zet",Sa="gé gé",Ia="co s",ja="na co",Na="za co",La="good job",Oa="mo re",Ra="lor de",Ma="dé cé",Pa="good luck",Ua="have fun",za="good luck have fun",qa="have fun",Ha="dáme",Wa="kelt",Ka="čus",Ja="čusák",Va="či",Ga="čakám",Ya="x d",Qa="x d d",Za="drž",Xa="em ví pí",xa="easy",$a="kjůt",ec="aj pí",tc="ví aj pí",nc="haha",sc="části",oc="častějc",ic="fíčura",uc="sám",lc="mě",rc="nestěžuj",ac="nestěžuju",cc="nestěžuji",fc="nestěžuje",mc="nahoře",dc="řekl",_c="řekla",hc="řekne",Dc="jó",pc="no jo",gc="no jo",bc="nojono",Fc="pane jo",Cc="kamarád",kc="kamará de",vc="těžit",wc="sluší",Ec="nemusíme",yc="em ká",Tc="demydž",Bc="hajpoval",Ac="četl",Sc="blekáč",Ic="afrikáč",jc="megáč",Nc="snajp",Lc="snajpnem",Oc="snajpr",Rc="snajpnout",Mc="nesnajpnul",Pc="to znamená",Uc="čet",zc="jaké",qc="výborně",Hc="čítr",Wc="co je",Kc="ajdl",Jc="ajdluje",Vc="důstojně",Gc="merč",Yc="merče",Qc="uslyšíme",Zc="tou sty",Xc="jednoduché",xc="rejdž",$c="ejdži",ef="kvit",tf="nečteš",nf="hjůdž",sf="to jo no",of="win rate",uf="cé esko",lf="dřív",rf="skauti",af="skauty",cf="dé el céé",ff="sorry",mf="ví ár",df="pařit",_f="toxik",hf="en pí sí",Df="dé en ef",pf="kur de",gf="lodě",bf="grajnt",Ff="trejduju",Cf="skóre",kf="hráč",vf="bouřka",wf="knírek",Ef="chatě",yf="džungle",Tf="jdu",Bf="redy",Af="ježiš",Sf="že jo",If="vy sere",jf="mjůt",Nf="bläd",Lf="šur",Of="over all",Rf="old school",Mf="pušnout",Pf="árčry",Uf="árčri",zf="čeriot",qf="čerioty",Hf="ej pí em",Wf="pí tý es dý",Kf="dží pí tý",Jf="chat dží pí tý",Vf="NSFW",Gf="KD",Yf="KDA",Qf="OP",Zf="HC",Xf="TV",xf="ADHD",$f="AI",em="TM",tm={atd:Ir,jj:jr,nn:Nr,ide:Lr,gg:Or,ggs:Rr,btw:Mr,twl:Pr,tvl:Ur,tvle:zr,wtf:qr,ofc:Hr,chapu:Wr,chapeš:"chápeš",chapes:Kr,chapat:Jr,wp:Vr,pica:Gr,pico:Yr,picovina:Qr,picovinka:Zr,tpc:Xr,idk:xr,nvm:$r,nwm:ea,vemena:ta,aoe:na,queue:sa,vs:oa,"1v1":"1 vé 1","1vs1":"1 versus 1","2v2":"2 vé 2","2vs2":"2 versus 2","3v3":"3 vé 3","3vs3":"3 versus 3","4v4":"4 vé 4","4vs4":"4 versus 4","5v5":"5 vé 5","5vs5":"5 versus 5","6v6":"6 vé 6","6vs6":"6 versus 6","7v7":"7 vé 7","7vs7":"7 versus 7","8v8":"8 vé 8","8vs8":"8 versus 8",z5:ia,kkt:ua,kkti:la,kkte:ra,tc:aa,tcko:ca,fc:fa,fcko:ma,tts:da,ttsko:_a,ttska:ha,ttsku:Da,ca:pa,cacka:ga,cačka:"cé aa čka",cas:ba,iq:Fa,urcite:Ca,vec:ka,vic:va,vime:wa,tg:Ea,tege:ya,stb:Ta,lowka:Ba,cz:Aa,gege:Sa,cos:Ia,naco:ja,zaco:Na,gj:La,more:Oa,lorde:Ra,dc:Ma,gl:Pa,gf:Ua,glhf:za,hf:qa,dame:Ha,celt:Wa,cus:Ka,cusak:Ja,ci:Va,cakam:Ga,xd:Ya,xdd:Qa,drz:Za,mvp:Xa,ez:xa,cute:$a,ip:ec,vip:tc,hh:nc,casti:sc,castejc:oc,featura:ic,sam:uc,me:lc,nestezuj:rc,nestezuju:ac,nestezuji:cc,nestezuje:fc,nahore:mc,rekl:dc,rekla:_c,rekne:hc,joo:Dc,nojo:pc,nj:gc,njn:bc,panejo:Fc,kamarad:Cc,kamarade:kc,tezit:vc,slusi:wc,nemusime:Ec,mk:yc,dmg:Tc,hypoval:Bc,cetl:Ac,blekac:Sc,afrikac:Ic,megac:jc,snipe:Nc,snipnem:Lc,sniper:Oc,snipnout:Rc,nesnipnul:Mc,tzn:Pc,chat:Uc,jake:zc,vyborne:qc,cheater:Hc,coe:Wc,idle:Kc,idluje:Jc,dustojne:Vc,merch:Gc,merche:Yc,uslysime:Qc,tousty:Zc,jednoduche:Xc,rage:xc,agi:$c,quit:ef,nectes:tf,huge:nf,tjn:sf,winrate:of,csko:uf,driv:lf,scouti:rf,scoutí:"skautí",scouty:af,dlc:cf,sry:ff,vr:mf,parit:df,toxic:_f,npc:hf,dnf:Df,kurde:pf,lode:gf,grind:bf,traduju:Ff,skore:Cf,hrac:kf,bourka:vf,knirek:wf,chate:Ef,jungle:yf,du:Tf,ready:Bf,jzs:Af,jžš:"ježiš",jžs:"ježiš",jzš:"ježiš",zejo:Sf,žejo:"že jo",vysere:If,mute:jf,blood:Nf,sure:Lf,overall:Of,oldschool:Rf,pushnout:Mf,archery:Pf,archeri:Uf,chariot:zf,charioty:qf,apm:Hf,ptsd:Wf,gpt:Kf,chatgpt:Jf,nsfw:Vf,kd:Gf,kda:Yf,op:Qf,hc:Zf,tv:Xf,adhd:xf,ai:$f,tm:em},nm="easy",sm={"1v1":"1 versus 1","2v2":"2 versus 2","3v3":"3 versus 3","4v4":"4 versus 4","5v5":"5 versus 5","6v6":"6 versus 6","7v7":"7 versus 7","8v8":"8 versus 8",ez:nm},Xe={"cs-cz":tm,"sk-sk":sm};function So(t,e,n){const s=t.slice();return s[7]=e[n][0],s[8]=e[n][1],s[10]=n,s}function Io(t,e,n){const s=t.slice();return s[11]=e[n],s}function jo(t){var d;let e,n,s=(((d=t[3](t[11]))==null?void 0:d.name)??t[11])+"",o,i,u,l;function r(){return t[4](t[11])}return{c(){e=E("li"),n=E("button"),o=U(s),i=O(),N(n,"class","no-mb"),ie(n,"outline",t[11]!==t[1])},m(f,c){v(f,e,c),w(e,n),w(n,o),w(e,i),u||(l=W(n,"click",r),u=!0)},p(f,c){t=f,c&2&&ie(n,"outline",t[11]!==t[1])},d(f){f&&k(e),u=!1,l()}}}function No(t,e){let n,s,o=e[10]+1+"",i,u,l,r=e[7]+"",d,f,c,a=e[8]+"",_,m;return{key:t,first:null,c(){n=E("tr"),s=E("th"),i=U(o),u=O(),l=E("td"),d=U(r),f=O(),c=E("td"),_=U(a),m=O(),N(s,"scope","row"),this.first=n},m(h,p){v(h,n,p),w(n,s),w(s,i),w(n,u),w(n,l),w(l,d),w(n,f),w(n,c),w(c,_),w(n,m)},p(h,p){e=h,p&2&&o!==(o=e[10]+1+"")&&Q(i,o),p&2&&r!==(r=e[7]+"")&&Q(d,r),p&2&&a!==(a=e[8]+"")&&Q(_,a)},d(h){h&&k(n)}}}function om(t){let e,n,s,o,i,u,l,r,d=t[3](t[1]).name+"",f,c,a,_,m,h,p,F,b,g=[],y=new Map,A,T,C=Object.keys(Xe),S=[];for(let I=0;I<C.length;I+=1)S[I]=jo(Io(t,C,I));let j=Object.entries(Xe[t[1]]);const B=I=>I[10];for(let I=0;I<j.length;I+=1){let z=So(t,j,I),q=B(z);y.set(q,g[I]=No(q,z))}return{c(){e=E("h3"),e.textContent="Dictionaries",n=O(),s=E("p"),s.textContent="These are used in TTS to find and replace words when it fails to pronounce words correctly.",o=O(),i=E("div"),u=E("details"),l=E("summary"),r=U("Dictionary language: "),f=U(d),c=O(),a=E("ul");for(let I=0;I<S.length;I+=1)S[I].c();_=O(),m=E("figure"),h=E("table"),p=E("thead"),p.innerHTML=`<tr><th scope="col">#</th> 
                <th scope="col">Find</th> 
                <th scope="col">Replace with</th></tr>`,F=O(),b=E("tbody");for(let I=0;I<g.length;I+=1)g[I].c();N(l,"aria-haspopup","listbox"),N(l,"role","button"),N(l,"class","secondary"),N(a,"role","listbox"),N(u,"role","list"),N(u,"class","svelte-1g7brs4"),N(i,"class","details-wrap svelte-1g7brs4"),N(h,"role","grid")},m(I,z){v(I,e,z),v(I,n,z),v(I,s,z),v(I,o,z),v(I,i,z),w(i,u),w(u,l),w(l,r),w(l,f),w(u,c),w(u,a);for(let q=0;q<S.length;q+=1)S[q]&&S[q].m(a,null);u.open=t[0],v(I,_,z),v(I,m,z),w(m,h),w(h,p),w(h,F),w(h,b);for(let q=0;q<g.length;q+=1)g[q]&&g[q].m(b,null);A||(T=W(u,"toggle",t[5]),A=!0)},p(I,[z]){if(z&2&&d!==(d=I[3](I[1]).name+"")&&Q(f,d),z&14){C=Object.keys(Xe);let q;for(q=0;q<C.length;q+=1){const se=Io(I,C,q);S[q]?S[q].p(se,z):(S[q]=jo(se),S[q].c(),S[q].m(a,null))}for(;q<S.length;q+=1)S[q].d(1);S.length=C.length}z&1&&(u.open=I[0]),z&2&&(j=Object.entries(Xe[I[1]]),g=ze(g,z,B,1,I,j,y,b,Ai,No,null,So))},i:G,o:G,d(I){I&&k(e),I&&k(n),I&&k(s),I&&k(o),I&&k(i),fn(S,I),I&&k(_),I&&k(m);for(let z=0;z<g.length;z+=1)g[z].d();A=!1,T()}}}let im="en-us";function um(t,e,n){let s;Dt(t,Me,f=>n(6,s=f));let o=!1,i=s.data.tts_language.toLowerCase()in Xe?s.data.tts_language.toLowerCase():Object.keys(Xe)[0];function u(f){n(0,o=!1),n(1,i=f)}function l(f){return Lt[im].find(c=>c.code.toLowerCase()===f.toLowerCase())}const r=f=>u(f);function d(){o=this.open,n(0,o)}return[o,i,u,l,r,d]}class lm extends ce{constructor(e){super(),ae(this,e,um,om,le,{})}}function rm(t){let e=t[0].reward_id+"",n;return{c(){n=U(e)},m(s,o){v(s,n,o)},p(s,o){o&1&&e!==(e=s[0].reward_id+"")&&Q(n,e)},d(s){s&&k(n)}}}function am(t){let e,n,s,o;return{c(){e=E("input"),N(e,"type","text"),e.value=n=t[0].reward_id,N(e,"placeholder","xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")},m(i,u){v(i,e,u),s||(o=W(e,"input",t[6]),s=!0)},p(i,u){u&1&&n!==(n=i[0].reward_id)&&e.value!==n&&(e.value=n)},d(i){i&&k(e),s=!1,o()}}}function cm(t){let e,n,s=t[1]+1+"",o,i,u,l,r,d,f,c,a,_,m;function h(b,g){return b[2]?am:rm}let p=h(t),F=p(t);return{c(){e=E("tr"),n=E("th"),o=U(s),i=O(),u=E("td"),F.c(),l=O(),r=E("td"),d=E("button"),d.textContent="Edit",f=O(),c=E("button"),a=U(t[3]),N(n,"scope","row"),N(d,"class","btn-small small"),N(c,"class","btn-small danger small"),N(r,"class","align-right")},m(b,g){v(b,e,g),w(e,n),w(n,o),w(e,i),w(e,u),F.m(u,null),w(e,l),w(e,r),w(r,d),w(r,f),w(r,c),w(c,a),_||(m=[W(d,"click",t[4]),W(c,"click",t[5])],_=!0)},p(b,[g]){g&2&&s!==(s=b[1]+1+"")&&Q(o,s),p===(p=h(b))&&F?F.p(b,g):(F.d(1),F=p(b),F&&(F.c(),F.m(u,null))),g&8&&Q(a,b[3])},i:G,o:G,d(b){b&&k(e),F.d(),_=!1,oe(m)}}}function fm(t,e,n){let{reward:s}=e,{index:o}=e,{remove_self:i}=e,{update_self:u}=e,l=!s.reward_id,r=!1,d="Remove";function f(){n(2,l=!l)}function c(){if(!r){r=!0,n(3,d+="?");return}i(o)}function a(_){const m=_.target.value;n(0,s={...s,reward_id:m}),u(o,s)}return t.$$set=_=>{"reward"in _&&n(0,s=_.reward),"index"in _&&n(1,o=_.index),"remove_self"in _&&n(7,i=_.remove_self),"update_self"in _&&n(8,u=_.update_self)},[s,o,l,d,f,c,a,i,u]}class mm extends ce{constructor(e){super(),ae(this,e,fm,cm,le,{reward:0,index:1,remove_self:7,update_self:8})}}function Lo(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}function Oo(t){let e,n,s,o,i,u=[],l=new Map,r,d=t[0];const f=c=>c[10];for(let c=0;c<d.length;c+=1){let a=Lo(t,d,c),_=f(a);l.set(_,u[c]=Ro(_,a))}return{c(){e=E("figure"),n=E("table"),s=E("thead"),s.innerHTML=`<tr><th scope="col">#</th> 
                    <th scope="col">Reward ID</th> 
                    <th scope="col"></th></tr>`,o=O(),i=E("tbody");for(let c=0;c<u.length;c+=1)u[c].c();N(n,"role","grid")},m(c,a){v(c,e,a),w(e,n),w(n,s),w(n,o),w(n,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(c,a){a&21&&(d=c[0],te(),u=ze(u,a,f,1,c,d,l,i,et,Ro,null,Lo),ne())},i(c){if(!r){for(let a=0;a<d.length;a+=1)L(u[a]);r=!0}},o(c){for(let a=0;a<u.length;a+=1)R(u[a]);r=!1},d(c){c&&k(e);for(let a=0;a<u.length;a+=1)u[a].d()}}}function Ro(t,e){let n,s,o;return s=new mm({props:{reward:e[8],index:e[10],remove_self:e[2],update_self:e[4]}}),{key:t,first:null,c(){n=ue(),ee(s.$$.fragment),this.first=n},m(i,u){v(i,n,u),x(s,i,u),o=!0},p(i,u){e=i;const l={};u&1&&(l.reward=e[8]),u&1&&(l.index=e[10]),s.$set(l)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){R(s.$$.fragment,i),o=!1},d(i){i&&k(n),$(s,i)}}}function dm(t){let e,n,s,o,i,u,l,r,d,f,c,a,_=t[0].length>0&&Oo(t);return{c(){e=E("h3"),e.textContent="Channel point rewards",n=O(),s=E("p"),s.textContent="Whitelist / blacklist channel point rewards.",o=O(),i=E("div"),u=E("details"),u.innerHTML=`<summary aria-haspopup="listbox" role="button" class="secondary">Setting mode: Whitelist</summary> 

        <ul role="listbox"><li><button class="no-mb">Whitelist</button></li></ul>`,l=O(),_&&_.c(),r=O(),d=E("button"),d.textContent="Add new",N(u,"role","list"),N(u,"class","svelte-1g7brs4"),N(i,"class","details-wrap svelte-1g7brs4")},m(m,h){v(m,e,h),v(m,n,h),v(m,s,h),v(m,o,h),v(m,i,h),w(i,u),u.open=t[1],v(m,l,h),_&&_.m(m,h),v(m,r,h),v(m,d,h),f=!0,c||(a=[W(u,"toggle",t[6]),W(d,"click",t[3])],c=!0)},p(m,[h]){h&2&&(u.open=m[1]),m[0].length>0?_?(_.p(m,h),h&1&&L(_,1)):(_=Oo(m),_.c(),L(_,1),_.m(r.parentNode,r)):_&&(te(),R(_,1,1,()=>{_=null}),ne())},i(m){f||(L(_),f=!0)},o(m){R(_),f=!1},d(m){m&&k(e),m&&k(n),m&&k(s),m&&k(o),m&&k(i),m&&k(l),_&&_.d(m),m&&k(r),m&&k(d),c=!1,oe(a)}}}function _m(t,e,n){const s=()=>{if(!Array.isArray(o))return console.error("Rewards error");n(0,o=o.filter((f,c,a)=>{var m;if(!((m=f==null?void 0:f.reward_id)!=null&&m.trim()))return!1;const _=a.findIndex(h=>(h==null?void 0:h.reward_id)==(f==null?void 0:f.reward_id));return!(_>=0&&c!==_)})),!(st(Re.data,o).length<1)&&(Re.data=o,Re.write())};let o=Je(Re.data),i=!1;function u(f){o.splice(f,1),n(0,o)}function l(){o.push({reward_id:""}),n(0,o)}function r(f,c){n(0,o[f]=c,o),n(0,o)}function d(){i=this.open,n(1,i)}return[o,i,u,l,r,s,d]}class hm extends ce{constructor(e){super(),ae(this,e,_m,dm,le,{save_items:5})}get save_items(){return this.$$.ctx[5]}}function Dm(t){let e,n,s,o,i,u,l;return{c(){e=E("h3"),e.textContent="Export settings",n=O(),s=E("textarea"),o=O(),i=E("button"),i.textContent="Copy",s.readOnly=!0,s.value=JSON.stringify(t[2]),N(s,"class","svelte-vbibz8")},m(r,d){v(r,e,d),v(r,n,d),v(r,s,d),t[4](s),v(r,o,d),v(r,i,d),t[5](i),u||(l=W(i,"click",t[3]),u=!0)},p:G,i:G,o:G,d(r){r&&k(e),r&&k(n),r&&k(s),t[4](null),r&&k(o),r&&k(i),t[5](null),u=!1,l()}}}function pm(t,e,n){let s;Dt(t,Me,f=>n(6,s=f));const o={settings:s.data,usernames:De.data,users_blacklist:je.data,users_whitelist:Ne.data,users_aliases:Le.data,users_tts_languages:Oe.data,channel_point_rewards_whitelist:Re.data};let i,u;function l(){u.select(),u.setSelectionRange(0,99999),document.execCommand("copy"),i.setAttribute("data-tooltip","Copied")}function r(f){ge[f?"unshift":"push"](()=>{u=f,n(1,u)})}function d(f){ge[f?"unshift":"push"](()=>{i=f,n(0,i)})}return[i,u,o,l,r,d]}class gm extends ce{constructor(e){super(),ae(this,e,pm,Dm,le,{})}}function bm(t){let e,n,s,o,i,u,l;return{c(){e=E("h3"),e.textContent="Import settings",n=O(),s=E("p"),s.textContent="Paste the exported settings string here.",o=O(),i=E("textarea"),N(i,"class","svelte-vbibz8")},m(r,d){v(r,e,d),v(r,n,d),v(r,s,d),v(r,o,d),v(r,i,d),Ve(i,t[0]),u||(l=W(i,"input",t[2]),u=!0)},p(r,[d]){d&1&&Ve(i,r[0])},i:G,o:G,d(r){r&&k(e),r&&k(n),r&&k(s),r&&k(o),r&&k(i),u=!1,l()}}}function Fm(t,e,n){const s=()=>{var l;if(!(o!=null&&o.trim()))throw Error("Empty settings data!");const u=JSON.parse(o);if(Object.keys(u).length<1)throw Error("Empty settings data!");for(const[r,d]of Object.entries(u)){console.log(r,"-",d);const f=`${r}_db`;if(!(f in Et)){console.error(r,"is not valid db");continue}const c=!((l=Et[f])!=null&&l.data),a=c?cn(Et[f]):Et[f];st(a.data,d).length<1||(c?Et[f].update(_=>(_.data=d,_.write(),_)):(a.data=d,a.write()))}};let o;function i(){o=this.value,n(0,o)}return[o,s,i]}class Cm extends ce{constructor(e){super(),ae(this,e,Fm,bm,le,{save_items:1})}get save_items(){return this.$$.ctx[1]}}const km=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function vm(t){return{all:t=t||new Map,on:function(e,n){var s=t.get(e);s?s.push(n):t.set(e,[n])},off:function(e,n){var s=t.get(e);s&&(n?s.splice(s.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var s=t.get(e);s&&s.slice().map(function(o){o(n)}),(s=t.get("*"))&&s.slice().map(function(o){o(e,n)})}}}const $e=Ft([]),mn=Ft([]),Un=Ft({}),Ce=vm();function wm(t,e){let n=null;return(...s)=>{window.clearTimeout(n),n=window.setTimeout(()=>{t.apply(null,s)},e)}}function Ii(t,e,n=10){return t.length>=n&&t.shift(),t.push(e),t}function Em(t){return Array.isArray(t.match(/(((https?:\/\/)|(www\.))[^\s]+)/gi))}const ym=()=>{let t;return[new Promise((e,n)=>{t=e}),t]};function Tm(t,e){let n=t.indexOf(e);const s=[];for(;n!==-1;)s.push(n),n=t.indexOf(e,++n);return s}async function Bm(t,e){var s,o,i;const n=cn(Me);(s=n.data)!=null&&s.remove_ffz_emotes&&(ct("ffz","global",e),ct("ffz",t,e)),(o=n.data)!=null&&o.remove_bttv_emotes&&(ct("bttv","global",e),ct("bttv",t,e)),(i=n.data)!=null&&i.remove_7tv_emotes&&(ct("7tv","global",e),ct("7tv",t,e))}async function ct(t,e,n){var l,r;if(!t||!e||!n||(r=(l=cn(Un))==null?void 0:l[e])!=null&&r[t])return;let s="";if(t==="bttv"?e==="global"?s="https://api.betterttv.net/3/cached/emotes/global":s=`https://api.betterttv.net/3/cached/users/twitch/${n}`:t==="ffz"?e==="global"?s="https://api.frankerfacez.com/v1/set/global":s=`https://api.frankerfacez.com/v1/room/id/${n}`:t==="7tv"&&(e==="global"?s="https://api.7tv.app/v2/emotes/global":s=`https://api.7tv.app/v2/users/${n}/emotes`),!s)return;const o=await fetch(s).catch(d=>{console.error(`Getting ${t} emotes error:`,d)});if(!(o!=null&&o.ok)){console.error(`Getting ${t} emotes response not ok! Status: ${o==null?void 0:o.status}`);return}const i=await o.json();let u=[];t==="bttv"?e==="global"?u=[...i.map(d=>d.code)]:i!=null&&i.channelEmotes&&(i!=null&&i.sharedEmotes)&&(u=[...i.channelEmotes.map(d=>d.code),...i.sharedEmotes.map(d=>d.code)]):t==="ffz"&&(i!=null&&i.sets)?u=[...Object.values(i.sets).map(d=>d.emoticons.map(f=>f.name)).flat()]:t==="7tv"&&Array.isArray(i)&&(u=[...i.map(d=>d.name)]),!(u.length<1)&&Un.update(d=>(d[e]||(d[e]={}),d[e][t]=u,d))}function Mo(t,e,n){const s=t.slice();s[22]=e[n][0],s[23]=e[n][1];const o=s[7][s[22]];return s[24]=o,s}function Am(t){const e=t.slice(),n=s=>Lt[ji].find(o=>o.code.toLowerCase()===s.toLowerCase());return e[27]=n,e}function Po(t){let e,n,s,o,i;const u=[Nm,jm,Im,Sm],l=[];function r(f,c){return f[24].type==="boolean"?0:f[24].type=="text"?1:f[24].type=="range"?2:f[24].type==="select"?3:-1}function d(f,c){return c===3?Am(f):f}return~(n=r(t))&&(s=l[n]=u[n](d(t,n))),{c(){var f;e=E("li"),s&&s.c(),o=O(),Ps(e,"--depth",t[10](t[22])),ie(e,"-dependant",(f=t[24])==null?void 0:f.dependant_on)},m(f,c){v(f,e,c),~n&&l[n].m(e,null),w(e,o),i=!0},p(f,c){var _;let a=n;n=r(f),n===a?~n&&l[n].p(d(f,n),c):(s&&(te(),R(l[a],1,1,()=>{l[a]=null}),ne()),~n?(s=l[n],s?s.p(d(f,n),c):(s=l[n]=u[n](d(f,n)),s.c()),L(s,1),s.m(e,o)):s=null),(!i||c&64)&&Ps(e,"--depth",f[10](f[22])),(!i||c&192)&&ie(e,"-dependant",(_=f[24])==null?void 0:_.dependant_on)},i(f){i||(L(s),i=!0)},o(f){R(s),i=!1},d(f){f&&k(e),~n&&l[n].d()}}}function Sm(t){let e,n=t[24].label+"",s,o,i,u;function l(...r){return t[15](t[22],t[24],...r)}return i=new bt({props:{items:Lt[ji],labelFieldName:"name",placeholder:t[24].label,selectedItem:t[27](t[23]),onChange:l}}),{c(){e=E("div"),s=U(n),o=O(),ee(i.$$.fragment),N(e,"class","vertical-wrap -nowrap")},m(r,d){v(r,e,d),w(e,s),w(e,o),x(i,e,null),u=!0},p(r,d){t=r,(!u||d&64)&&n!==(n=t[24].label+"")&&Q(s,n);const f={};d&64&&(f.placeholder=t[24].label),d&64&&(f.selectedItem=t[27](t[23])),d&64&&(f.onChange=l),i.$set(f)},i(r){u||(L(i.$$.fragment,r),u=!0)},o(r){R(i.$$.fragment,r),u=!1},d(r){r&&k(e),$(i)}}}function Im(t){var a;let e,n=t[24].label+"",s,o,i,u,l=t[23].toFixed(((a=t[24])==null?void 0:a.decimals)??0)+"",r;function d(_,m){var h;return(h=_[24])!=null&&h.custom_values?Om:Lm}let f=d(t),c=f(t);return{c(){e=E("div"),s=U(n),o=O(),c.c(),i=O(),u=E("span"),r=U(l),N(u,"class","range-value"),N(e,"class","vertical-wrap -nowrap")},m(_,m){v(_,e,m),w(e,s),w(e,o),c.m(e,null),w(e,i),w(e,u),w(u,r)},p(_,m){var h;m&64&&n!==(n=_[24].label+"")&&Q(s,n),f===(f=d(_))&&c?c.p(_,m):(c.d(1),c=f(_),c&&(c.c(),c.m(e,i))),m&64&&l!==(l=_[23].toFixed(((h=_[24])==null?void 0:h.decimals)??0)+"")&&Q(r,l)},i:G,o:G,d(_){_&&k(e),c.d()}}}function jm(t){let e,n,s=t[24].label+"",o,i,u,l,r,d,f;function c(...a){return t[12](t[22],t[24],...a)}return{c(){e=E("div"),n=E("span"),o=U(s),i=O(),u=E("input"),N(n,"class","label"),N(u,"type","text"),N(u,"placeholder",l=t[24].label),u.value=r=t[23],N(e,"class","vertical-wrap -nowrap")},m(a,_){v(a,e,_),w(e,n),w(n,o),w(e,i),w(e,u),d||(f=W(u,"input",c),d=!0)},p(a,_){t=a,_&64&&s!==(s=t[24].label+"")&&Q(o,s),_&64&&l!==(l=t[24].label)&&N(u,"placeholder",l),_&64&&r!==(r=t[23])&&u.value!==r&&(u.value=r)},i:G,o:G,d(a){a&&k(e),d=!1,f()}}}function Nm(t){let e,n,s,o,i,u=t[24].label+"",l,r,d,f;function c(...a){return t[11](t[22],t[24],...a)}return{c(){e=E("label"),n=E("input"),i=O(),l=U(u),N(n,"type","checkbox"),N(n,"id",s=`settings-${t[22]}`),n.checked=o=t[23],N(e,"for",r=`settings-${t[22]}`)},m(a,_){v(a,e,_),w(e,n),w(e,i),w(e,l),d||(f=W(n,"change",c),d=!0)},p(a,_){t=a,_&64&&s!==(s=`settings-${t[22]}`)&&N(n,"id",s),_&64&&o!==(o=t[23])&&(n.checked=o),_&64&&u!==(u=t[24].label+"")&&Q(l,u),_&64&&r!==(r=`settings-${t[22]}`)&&N(e,"for",r)},i:G,o:G,d(a){a&&k(e),d=!1,f()}}}function Lm(t){let e,n,s,o,i,u,l;function r(...d){return t[14](t[22],t[24],...d)}return{c(){e=E("input"),N(e,"type","range"),N(e,"min",n=t[24].min),N(e,"step",s=t[24].step),N(e,"max",o=t[24].max),e.value=i=t[23]},m(d,f){v(d,e,f),u||(l=W(e,"input",r),u=!0)},p(d,f){t=d,f&64&&n!==(n=t[24].min)&&N(e,"min",n),f&64&&s!==(s=t[24].step)&&N(e,"step",s),f&64&&o!==(o=t[24].max)&&N(e,"max",o),f&64&&i!==(i=t[23])&&(e.value=i)},d(d){d&&k(e),u=!1,l()}}}function Om(t){let e,n,s,o,i;function u(...l){return t[13](t[22],t[24],...l)}return{c(){e=E("input"),N(e,"type","range"),N(e,"min",0),N(e,"step",1),N(e,"max",n=t[24].custom_values.length-1),e.value=s=t[24].custom_values.indexOf(Number(t[23]))},m(l,r){v(l,e,r),o||(i=W(e,"input",u),o=!0)},p(l,r){t=l,r&64&&n!==(n=t[24].custom_values.length-1)&&N(e,"max",n),r&64&&s!==(s=t[24].custom_values.indexOf(Number(t[23])))&&(e.value=s)},d(l){l&&k(e),o=!1,i()}}}function Uo(t,e){let n,s=e[24]&&e[9](e[24]),o,i,u=s&&Po(e);return{key:t,first:null,c(){n=ue(),u&&u.c(),o=ue(),this.first=n},m(l,r){v(l,n,r),u&&u.m(l,r),v(l,o,r),i=!0},p(l,r){e=l,r&64&&(s=e[24]&&e[9](e[24])),s?u?(u.p(e,r),r&64&&L(u,1)):(u=Po(e),u.c(),L(u,1),u.m(o.parentNode,o)):u&&(te(),R(u,1,1,()=>{u=null}),ne())},i(l){i||(L(u),i=!0)},o(l){R(u),i=!1},d(l){l&&k(n),u&&u.d(l),l&&k(o)}}}function Rm(t){let e;return{c(){e=U("Show users blacklist")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Mm(t){let e,n,s;function o(u){t[16](u)}let i={slot:"dialog-content"};return t[0]!==void 0&&(i.save_items=t[0]),e=new $l({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&1&&(n=!0,r.save_items=u[0],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function Pm(t){let e;return{c(){e=U("Show users whitelist")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Um(t){let e,n,s;function o(u){t[17](u)}let i={slot:"dialog-content"};return t[1]!==void 0&&(i.save_items=t[1]),e=new rr({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&2&&(n=!0,r.save_items=u[1],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function zm(t){let e;return{c(){e=U("Show users aliases")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function qm(t){let e,n,s;function o(u){t[18](u)}let i={slot:"dialog-content"};return t[2]!==void 0&&(i.save_items=t[2]),e=new br({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&4&&(n=!0,r.save_items=u[2],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function zo(t){let e,n,s,o,i,u;return e=new Ke({props:{on_save:t[3],$$slots:{"dialog-content":[Wm],"button-open-text":[Hm]},$$scope:{ctx:t}}}),s=new Ke({props:{$$slots:{"dialog-content":[Jm],"button-open-text":[Km]},$$scope:{ctx:t}}}),i=new Ke({props:{on_save:t[4],$$slots:{"dialog-content":[Gm],"button-open-text":[Vm]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment),n=O(),ee(s.$$.fragment),o=O(),ee(i.$$.fragment)},m(l,r){x(e,l,r),v(l,n,r),x(s,l,r),v(l,o,r),x(i,l,r),u=!0},p(l,r){const d={};r&8&&(d.on_save=l[3]),r&268435464&&(d.$$scope={dirty:r,ctx:l}),e.$set(d);const f={};r&268435456&&(f.$$scope={dirty:r,ctx:l}),s.$set(f);const c={};r&16&&(c.on_save=l[4]),r&268435472&&(c.$$scope={dirty:r,ctx:l}),i.$set(c)},i(l){u||(L(e.$$.fragment,l),L(s.$$.fragment,l),L(i.$$.fragment,l),u=!0)},o(l){R(e.$$.fragment,l),R(s.$$.fragment,l),R(i.$$.fragment,l),u=!1},d(l){$(e,l),l&&k(n),$(s,l),l&&k(o),$(i,l)}}}function Hm(t){let e;return{c(){e=U("Show users TTS languages")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Wm(t){let e,n,s;function o(u){t[19](u)}let i={slot:"dialog-content"};return t[3]!==void 0&&(i.save_items=t[3]),e=new Sr({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&8&&(n=!0,r.save_items=u[3],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function Km(t){let e;return{c(){e=U("Show dictionaries")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Jm(t){let e,n;return e=new lm({props:{slot:"dialog-content"}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p:G,i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Vm(t){let e;return{c(){e=U("Show channel point rewards")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Gm(t){let e,n,s;function o(u){t[20](u)}let i={slot:"dialog-content"};return t[4]!==void 0&&(i.save_items=t[4]),e=new hm({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&16&&(n=!0,r.save_items=u[4],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function Ym(t){let e;return{c(){e=U("Export settings")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Qm(t){let e,n;return e=new gm({props:{slot:"dialog-content"}}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p:G,i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Zm(t){let e;return{c(){e=U("Import settings")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Xm(t){let e,n,s;function o(u){t[21](u)}let i={slot:"dialog-content"};return t[5]!==void 0&&(i.save_items=t[5]),e=new Cm({props:i}),ge.push(()=>gt(e,"save_items",o)),{c(){ee(e.$$.fragment)},m(u,l){x(e,u,l),s=!0},p(u,l){const r={};!n&&l&32&&(n=!0,r.save_items=u[5],pt(()=>n=!1)),e.$set(r)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),s=!1},d(u){$(e,u)}}}function xm(t){let e,n,s,o=[],i=new Map,u,l,r,d,f,c,a,_,m,h,p,F,b,g,y=Object.entries(t[6].data);const A=C=>C[22];for(let C=0;C<y.length;C+=1){let S=Mo(t,y,C),j=A(S);i.set(j,o[C]=Uo(j,S))}r=new Ke({props:{on_save:t[0],$$slots:{"dialog-content":[Mm],"button-open-text":[Rm]},$$scope:{ctx:t}}}),f=new Ke({props:{on_save:t[1],$$slots:{"dialog-content":[Um],"button-open-text":[Pm]},$$scope:{ctx:t}}}),a=new Ke({props:{on_save:t[2],$$slots:{"dialog-content":[qm],"button-open-text":[zm]},$$scope:{ctx:t}}});let T=t[6].data.use_tts&&zo(t);return p=new Ke({props:{$$slots:{"dialog-content":[Qm],"button-open-text":[Ym]},$$scope:{ctx:t}}}),b=new Ke({props:{on_save:t[5],$$slots:{"dialog-content":[Xm],"button-open-text":[Zm]},$$scope:{ctx:t}}}),{c(){e=E("h2"),e.textContent="Settings:",n=O(),s=E("ul");for(let C=0;C<o.length;C+=1)o[C].c();u=O(),l=E("div"),ee(r.$$.fragment),d=O(),ee(f.$$.fragment),c=O(),ee(a.$$.fragment),_=O(),T&&T.c(),m=O(),h=E("div"),ee(p.$$.fragment),F=O(),ee(b.$$.fragment),N(s,"class","-no-bullets")},m(C,S){v(C,e,S),v(C,n,S),v(C,s,S);for(let j=0;j<o.length;j+=1)o[j]&&o[j].m(s,null);v(C,u,S),v(C,l,S),x(r,l,null),w(l,d),x(f,l,null),w(l,c),x(a,l,null),w(l,_),T&&T.m(l,null),v(C,m,S),v(C,h,S),x(p,h,null),w(h,F),x(b,h,null),g=!0},p(C,[S]){S&1984&&(y=Object.entries(C[6].data),te(),o=ze(o,S,A,1,C,y,i,s,et,Uo,null,Mo),ne());const j={};S&1&&(j.on_save=C[0]),S&268435457&&(j.$$scope={dirty:S,ctx:C}),r.$set(j);const B={};S&2&&(B.on_save=C[1]),S&268435458&&(B.$$scope={dirty:S,ctx:C}),f.$set(B);const I={};S&4&&(I.on_save=C[2]),S&268435460&&(I.$$scope={dirty:S,ctx:C}),a.$set(I),C[6].data.use_tts?T?(T.p(C,S),S&64&&L(T,1)):(T=zo(C),T.c(),L(T,1),T.m(l,null)):T&&(te(),R(T,1,1,()=>{T=null}),ne());const z={};S&268435456&&(z.$$scope={dirty:S,ctx:C}),p.$set(z);const q={};S&32&&(q.on_save=C[5]),S&268435488&&(q.$$scope={dirty:S,ctx:C}),b.$set(q)},i(C){if(!g){for(let S=0;S<y.length;S+=1)L(o[S]);L(r.$$.fragment,C),L(f.$$.fragment,C),L(a.$$.fragment,C),L(T),L(p.$$.fragment,C),L(b.$$.fragment,C),g=!0}},o(C){for(let S=0;S<o.length;S+=1)R(o[S]);R(r.$$.fragment,C),R(f.$$.fragment,C),R(a.$$.fragment,C),R(T),R(p.$$.fragment,C),R(b.$$.fragment,C),g=!1},d(C){C&&k(e),C&&k(n),C&&k(s);for(let S=0;S<o.length;S+=1)o[S].d();C&&k(u),C&&k(l),$(r),$(f),$(a),T&&T.d(),C&&k(m),C&&k(h),$(p),$(b)}}}let ji="en-us";function $m(t,e,n){let s;Dt(t,Me,j=>n(6,s=j));const o={channel:{label:"Channel",type:"text",emit_event:"set_channel"},show_chat:{label:"Show chat",type:"boolean"},use_tts:{label:"Use TTS",type:"boolean"},tts_language:{label:"TTS language",type:"select",show_max:7,dependant_on:"use_tts"},read_broadcaster:{label:"Read broadcaster",type:"boolean",dependant_on:"use_tts"},read_moderators:{label:"Read moderators",type:"boolean",dependant_on:"use_tts"},read_vip_users:{label:"Read VIP users",type:"boolean",dependant_on:"use_tts"},read_subscribers:{label:"Read subscribers",type:"boolean",dependant_on:"use_tts"},read_nonsubscribers:{label:"Read non-subscribers",type:"boolean",dependant_on:"use_tts"},read_partners:{label:"Read Twitch partners",type:"boolean",dependant_on:"use_tts"},read_sub_gift_leaders:{label:"Read sub gift leaders",type:"boolean",dependant_on:"use_tts"},read_bit_leaders:{label:"Read bit leaders",type:"boolean",dependant_on:"use_tts"},read_sub_gifters_over:{label:"Read sub gifters over and including",type:"range",custom_values:[1,5,10,25,50,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1e3,2e3,3e3,4e3,5e3],dependant_on:"use_tts"},remove_twitch_emotes:{label:"Remove Twitch emotes",type:"boolean",dependant_on:"use_tts"},remove_ffz_emotes:{label:"Remove FrankerFaceZ emotes",type:"boolean",dependant_on:"use_tts"},remove_bttv_emotes:{label:"Remove BetterTTV emotes",type:"boolean",dependant_on:"use_tts"},remove_7tv_emotes:{label:"Remove 7TV emotes",type:"boolean",dependant_on:"use_tts"},skip_emote_only_messages:{label:"Skip emote-only messages",type:"boolean",dependant_on:"use_tts"},say_usernames:{label:"Pronounce usernames",type:"boolean",dependant_on:"use_tts"},username_separator:{label:"Separator before message",type:"text",dependant_on:"say_usernames"},question_separator:{label:"Separator before question",type:"text",dependant_on:"say_usernames"},reply_separator:{label:"Separator before reply",type:"text",dependant_on:"say_usernames"},username_only_link_separator:{label:"Separator before only link",type:"text",dependant_on:"say_usernames"},skip_over_numbers_in_usernames:{label:"Skip over numbers in usernames",type:"boolean",dependant_on:"say_usernames"},remove_mentions_at_blacklisted_users:{label:"Remove mentions at blacklisted users",type:"boolean",dependant_on:"use_tts"},link_text:{label:"Replace URL links with",type:"text",dependant_on:"use_tts"},use_aoe_taunts:{label:"Use AoE taunts",type:"boolean",dependant_on:"use_tts"},volume:{label:"Volume",type:"range",min:"0.0",step:"0.01",max:"1.0",decimals:2,emit_event:"audio_change_volume",dependant_on:"use_tts"},speed:{label:"Speed",type:"range",min:"0.1",step:"0.01",max:"2.5",decimals:2,emit_event:"audio_change_speed",dependant_on:"use_tts"},preserve_pitch:{label:"Adjust the pitch of the audio to compensate for changes to the speed",type:"boolean",emit_event:"audio_change_preserves_pitch",dependant_on:"use_tts"}};function i(j,B,I){s.data[j]!==B&&(ju(Me,s.data[j]=B,s),s.write(),I!=null&&I.emit_event&&Ce.emit(I.emit_event,{[j]:B}))}function u(j){if(!(j!=null&&j.dependant_on))return!0;for(;;){const{dependant_on:B}=j;if(!B)return!0;if(s.data[B])j=o[B];else return!1}}function l(j){var I;let B=1;for(;;){const z=(I=o[j])==null?void 0:I.dependant_on;if(z)B++,j=z;else break}return B}let r,d,f,c,a,_;const m=(j,B,I)=>i(j,I.target.checked,B),h=(j,B,I)=>i(j,I.target.value,B),p=(j,B,I)=>i(j,parseFloat(B.custom_values[Number(I.target.value)]),B),F=(j,B,I)=>i(j,parseFloat(I.target.value),B),b=(j,B,I)=>i(j,I.code,B);function g(j){r=j,n(0,r)}function y(j){d=j,n(1,d)}function A(j){f=j,n(2,f)}function T(j){c=j,n(3,c)}function C(j){a=j,n(4,a)}function S(j){_=j,n(5,_)}return[r,d,f,c,a,_,s,o,i,u,l,m,h,p,F,b,g,y,A,T,C,S]}class ed extends ce{constructor(e){super(),ae(this,e,$m,xm,le,{})}}var qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function td(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}var Xn={exports:{}};function nd(t){var e=new t,n=e;function s(){var i=e;return i.next?e=i.next:(e=new t,n=e),i.next=null,i}function o(i){n.next=i,n=i}return{get:s,release:o}}var sd=nd,od=sd;function Li(t,e,n){if(typeof t=="function"&&(n=e,e=t,t=null),n<1)throw new Error("fastqueue concurrency must be greater than 1");var s=od(id),o=null,i=null,u=0,l=null,r={push:h,drain:ke,saturated:ke,pause:f,paused:!1,concurrency:n,running:d,resume:_,idle:m,length:c,getQueue:a,unshift:p,empty:ke,kill:b,killAndDrain:g,error:y};return r;function d(){return u}function f(){r.paused=!0}function c(){for(var A=o,T=0;A;)A=A.next,T++;return T}function a(){for(var A=o,T=[];A;)T.push(A.value),A=A.next;return T}function _(){if(r.paused){r.paused=!1;for(var A=0;A<r.concurrency;A++)u++,F()}}function m(){return u===0&&r.length()===0}function h(A,T){var C=s.get();C.context=t,C.release=F,C.value=A,C.callback=T||ke,C.errorHandler=l,u===r.concurrency||r.paused?i?(i.next=C,i=C):(o=C,i=C,r.saturated()):(u++,e.call(t,C.value,C.worked))}function p(A,T){var C=s.get();C.context=t,C.release=F,C.value=A,C.callback=T||ke,u===r.concurrency||r.paused?o?(C.next=o,o=C):(o=C,i=C,r.saturated()):(u++,e.call(t,C.value,C.worked))}function F(A){A&&s.release(A);var T=o;T?r.paused?u--:(i===o&&(i=null),o=T.next,T.next=null,e.call(t,T.value,T.worked),i===null&&r.empty()):--u===0&&r.drain()}function b(){o=null,i=null,r.drain=ke}function g(){o=null,i=null,r.drain(),r.drain=ke}function y(A){l=A}}function ke(){}function id(){this.value=null,this.callback=ke,this.next=null,this.release=ke,this.context=null,this.errorHandler=null;var t=this;this.worked=function(n,s){var o=t.callback,i=t.errorHandler,u=t.value;t.value=null,t.callback=ke,t.errorHandler&&i(n,u),o.call(t.context,n,s),t.release(t)}}function ud(t,e,n){typeof t=="function"&&(n=e,e=t,t=null);function s(f,c){e.call(this,f).then(function(a){c(null,a)},c)}var o=Li(t,s,n),i=o.push,u=o.unshift;return o.push=l,o.unshift=r,o.drained=d,o;function l(f){var c=new Promise(function(a,_){i(f,function(m,h){if(m){_(m);return}a(h)})});return c.catch(ke),c}function r(f){var c=new Promise(function(a,_){u(f,function(m,h){if(m){_(m);return}a(h)})});return c.catch(ke),c}function d(){if(o.idle())return new Promise(function(a){a()});var f=o.drain,c=new Promise(function(a){o.drain=function(){f(),a()}});return c}}Xn.exports=Li;Xn.exports.promise=ud;var ld=Xn.exports;const rd=Ni(ld);let K={};Me.subscribe(t=>K=t.data);let pe=[];$e.subscribe(t=>pe=t);let xn=[];mn.subscribe(t=>xn=t);let Bt={};Un.subscribe(t=>Bt=t);let An=null;const fe=new Audio;Ce.on("audio_change_volume",({volume:t})=>{fe.volume=t});Ce.on("audio_change_speed",({speed:t})=>{fe.playbackRate=t});Ce.on("audio_change_preserves_pitch",({preserve_pitch:t})=>{fe.preservesPitch=t});Ce.on("audio_play",({audio_src:t})=>{fe.src=t,fe.volume=K.volume,fe.playbackRate=K.speed,fe.preservesPitch=K.preserve_pitch});fe.addEventListener("canplaythrough",t=>{console.log("audio can play"),fe.play().catch(e=>{console.error("NO PLAY! ",e),console.error("AUDIO ERROR?",fe.error),console.error(fe.src),mn.set(Ii(xn,e,5)),Ce.emit("audio_queue_continue")})});fe.addEventListener("ended",t=>{console.log("audio ended",fe.src),Ce.emit("audio_queue_continue")});Ce.on("tts_stop_audio",()=>{fe.pause(),Ce.emit("audio_queue_continue")});fe.addEventListener("error",async t=>{var n;const e={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};mn.set(Ii(xn,`[${new Date().toLocaleString()}] ${e[(n=fe==null?void 0:fe.error)==null?void 0:n.code]}`,5)),Ce.emit("audio_queue_continue")});const Oi=rd.promise(async t=>{var j;const{"badge-info":e,badges:n,color:s,"custom-reward-id":o,"emote-only":i,emotes:u,id:l,is_aoe_taunt:r,aoe_taunt:d,say_name:f,"user-id":c,username:a,"reply-parent-user-login":_}=t;let{message:m}=t;const h=pe.findIndex(B=>B.id===l);if(h<0)return;console.log("task_item:",t);const[p,F]=ym(),b=()=>{F(),pe.shift(),$e.set(pe)};if(K.skip_emote_only_messages&&i)return b();console.log("message before:",m),K.remove_twitch_emotes&&u&&(m=Ze(m,K.channel,"twitch",u)),K!=null&&K.remove_ffz_emotes&&(m=Ze(m,"global","ffz"),m=Ze(m,K.channel,"ffz")),K!=null&&K.remove_bttv_emotes&&(m=Ze(m,"global","bttv"),m=Ze(m,K.channel,"bttv")),K!=null&&K.remove_7tv_emotes&&(m=Ze(m,"global","7tv"),m=Ze(m,K.channel,"7tv"));const g=K.link_text;K.say_usernames&&_&&m.toLowerCase().startsWith(`@${_.toLowerCase()} `)&&(m=m.substring(_.length+2));let y=Sn(m.toLowerCase(),g,Xe[K.tts_language.toLowerCase()]);if(console.log("new_message:",y),y.trim().length<1)return console.log("Empty message detected"),b();let A=Hn({username:a},"username");A||(A=Wn(Sn(a,g)));const T=y.includes("?");if(K.say_usernames&&_){let B=Hn({username:_},"username");B||(B=Wn(Sn(_,g))),y=`${A} ${K.reply_separator} ${B}: ${y}`}else y===g?y=`${A} ${K.username_only_link_separator} ${g}`:K.say_usernames&&T?y=`${A} ${K.question_separator} ${y}`:K.say_usernames&&f&&(y=`${A} ${K.username_separator} ${y}`);m!==y&&(pe[h].text=`${y} (${m})`,$e.set(pe)),console.log("tts message:",y),console.log("zacinam mluvit");const C=((j=Oe.data.find(B=>B.user_id==c))==null?void 0:j.tts_language)??K.tts_language.toLowerCase();console.log("tts_language:",C);let S=`https://translate.google.com/translate_tts?ie=UTF-8&tl=${C}&client=tw-ob&q=${encodeURIComponent(y)}`;if(r){const B=`/taunts/T_${m.trim()}.mp3`;console.log("audio_src: ",S);const I=await fetch(B,{method:"HEAD"});I.ok&&I.status!==404&&(S=B)}Ce.emit("audio_play",{audio_src:S}),Ce.on("audio_queue_continue",()=>{F()}),await p,console.log("sleep start"),await new Promise(B=>setTimeout(B,700)),console.log("sleep end"),pe.shift(),$e.set(pe)},1);Oi.error((t,e)=>{t&&console.error("Audio queue error:",t)});function Sn(t,e,n){let s=t.split(/\s/gi).map(o=>Em(o)?e:o).join(" ").trim();console.log("message_fragments before:",s),s=s.replace(/(\D)([.?!,]+)([^.?!,\s])/gi,"$1$2 $3").split(/\s/gi);for(let o=0;o<s.length;o++){let i=s[o];(()=>{if(i.startsWith("@")){const u={username:i.substring(1)};if(K.remove_mentions_at_blacklisted_users&&!zn(u,"username")&&qn(u,"username")){i="";return}const l=Hn(u,"username");if(l){i=`et ${l}`;return}K.skip_over_numbers_in_usernames&&(i=Wn(i))}if(n){const u=n[i];if(u)i=u;else{const l=i.match(/^[.?!,]+/),r=i.match(/[.?!,]+$/),d=i.replace(/[.?!,]+/g,"");if(Array.isArray(l)){const f=n[d];f&&(i=`${l.join("")}${f}`)}else if(Array.isArray(r)){const f=n[d];f&&(i=`${f}${r.join("")}`)}}}i=i.replaceAll("_"," "),i=i.replace(/([a-z-+]?)(\d*[,.]?\d+)([a-z-+]?)/gi,(u,l,r,d)=>l==="-"||l==="+"?` ${l}${r} ${d}`:`${l} ${r} ${d}`).replace(/\s{2,}/g," ").trim(),i=i.replace(km(),"")})(),s[o]=i}return console.log("message_fragments after:",s),s.join(" ").trim()}function zn(t,e){return $n(Ne,t,e)}function qn(t,e){return $n(je,t,e)}function Hn(t,e){var n;return((n=$n(Le,t,e,!0))==null?void 0:n.alias)??""}function $n(t,e,n,s=!1){const{user_id:o,username:i,alias:u}=e;let l;return i&&n==="username"?(l=t.data.find(r=>r[n].toLowerCase()===i.toLowerCase()),s?l:!!l):o&&n==="user_id"?(l=!!t.data.find(r=>r.user_id===Number(o)),s?l:!!l):!1}function Wn(t){if(!K.skip_over_numbers_in_usernames)return t;const e=t.replace(/\d+/g,"");return e!==t&&console.log("removed numbers",t,"->",e),e}function Ri(t,e,n,s){if(!K.use_tts)return;console.log("data:",e,"message:",n);const{"badge-info":o,badges:i={},"badges-raw":u,color:l,"custom-reward-id":r,"display-name":d,"emote-only":f,emotes:c,"emotes-raw":a,id:_,"message-type":m,mod:h,subscriber:p,"user-id":F,"user-type":b,username:g}=e,y=(i==null?void 0:i.vip)??!1,A=(i==null?void 0:i.broadcaster)??!1;i==null||i.bits,i==null||i.no_video,i==null||i.founder;const T=(i==null?void 0:i.partner)??!1;i==null||i.premium,i==null||i["hype-train"];const C=(i==null?void 0:i["sub-gift-leader"])??!1,S=(i==null?void 0:i["sub-gifter"])??!1,j=(i==null?void 0:i["bits-leader"])??!1,B={user_id:F,username:g};if(cd(g,F),n&&n.startsWith("!"))return;const I={user_id:zn(B,"user_id"),username:zn(B,"username")};if(!I.user_id&&!I.username&&(qn(B,"user_id")||qn(B,"username")))return;let z=!1;if((()=>{const se=()=>{z=!0};if(I.user_id||I.username||K.read_broadcaster&&A||K!=null&&K.read_moderators&&h||K.read_vip_users&&y||K.read_subscribers&&p||K.read_nonsubscribers&&!p||K!=null&&K.read_partners&&T||K!=null&&K.read_sub_gift_leaders&&C||K!=null&&K.read_bit_leaders&&j||S&&(Number(S)||0)>=(K==null?void 0:K.read_sub_gifters_over)||r&&Re.data.find(M=>M.reward_id===r))return se()})(),console.log("read_message:",z),!z)return;pe.push({id:_,text:n}),$e.set(pe);const q=K.use_aoe_taunts&&Number(n.trim())==n.trim();console.log("is_aoe_taunt:",q),e.is_aoe_taunt=q,An!==g?e.say_name=!0:e.say_name=!1,Oi.push({...e,message:n}),q?An=null:An=g}function ad(t,e){Ri("",t,e)}function cd(t,e){!e||De.data[e]||(De.data[e]=t,De.write())}function Kn(t){pe.findIndex(n=>n.id===t)>0?(pe=pe.filter(n=>n.id!==t),$e.set(pe)):Ce.emit("tts_stop_audio")}function Ze(t,e,n,s){if(s||(s=fd(t,e,n)),Object.keys(s).length<1)return t;const o="|";for(const i of Object.values(s))i.forEach(u=>{const[l,r]=u.split("-"),d=new RegExp(`(?<=^.{${l}}).{${r-l+1}}`,"g");t=t.replace(d,o.repeat(r-l+1))});return t=t.replaceAll(o,""),t}function fd(t,e,n){var o;const s={};if(!((o=Bt==null?void 0:Bt[e])!=null&&o[n]))return s;for(const i of Bt[e][n]){const u=Tm(t,i);u.length<1||(s[i]=u.map(l=>`${l}-${l+i.length-1}`))}return s}function Ho(t,e,n){const s=t.slice();return s[4]=e[n],s[14]=n,s}function Wo(t,e,n){const s=t.slice();return s[15]=e[n],s}function Ko(t){let e,n,s,o,i,u,l,r,d,f,c,a,_,m,h;return{c(){e=E("div"),n=U(`Username\r
        `),s=E("input"),o=O(),i=E("div"),u=E("label"),l=E("input"),r=U(`\r
            Is mod`),d=O(),f=E("div"),c=E("label"),a=E("input"),_=U(`\r
            Is subscriber`),N(s,"type","text"),N(e,"class","vertical-wrap svelte-rutzu0"),N(l,"type","checkbox"),N(l,"id","mod"),N(u,"for","mod"),N(i,"class","vertical-wrap svelte-rutzu0"),N(a,"type","checkbox"),N(a,"id","subscriber"),N(c,"for","subscriber"),N(f,"class","vertical-wrap svelte-rutzu0")},m(p,F){v(p,e,F),w(e,n),w(e,s),Ve(s,t[0].username),v(p,o,F),v(p,i,F),w(i,u),w(u,l),l.checked=t[0].mod,w(u,r),v(p,d,F),v(p,f,F),w(f,c),w(c,a),a.checked=t[0].subscriber,w(c,_),m||(h=[W(s,"input",t[7]),W(l,"change",t[8]),W(a,"change",t[9])],m=!0)},p(p,F){F&1&&s.value!==p[0].username&&Ve(s,p[0].username),F&1&&(l.checked=p[0].mod),F&1&&(a.checked=p[0].subscriber)},d(p){p&&k(e),p&&k(o),p&&k(i),p&&k(d),p&&k(f),m=!1,oe(h)}}}function Jo(t){let e,n=t[2].length+"",s,o,i=t[2].length>4?"last":"",u,l,r=t[2].length>1?"s":"",d,f,c,a,_=t[2].reverse(),m=[];for(let h=0;h<_.length;h+=1)m[h]=Vo(Wo(t,_,h));return{c(){e=E("h3"),s=U(n),o=O(),u=U(i),l=U(" error"),d=U(r),f=U(":"),c=O(),a=E("ul");for(let h=0;h<m.length;h+=1)m[h].c()},m(h,p){v(h,e,p),w(e,s),w(e,o),w(e,u),w(e,l),w(e,d),w(e,f),v(h,c,p),v(h,a,p);for(let F=0;F<m.length;F+=1)m[F]&&m[F].m(a,null)},p(h,p){if(p&4&&n!==(n=h[2].length+"")&&Q(s,n),p&4&&i!==(i=h[2].length>4?"last":"")&&Q(u,i),p&4&&r!==(r=h[2].length>1?"s":"")&&Q(d,r),p&4){_=h[2].reverse();let F;for(F=0;F<_.length;F+=1){const b=Wo(h,_,F);m[F]?m[F].p(b,p):(m[F]=Vo(b),m[F].c(),m[F].m(a,null))}for(;F<m.length;F+=1)m[F].d(1);m.length=_.length}},d(h){h&&k(e),h&&k(c),h&&k(a),fn(m,h)}}}function Vo(t){let e,n=t[15]+"",s;return{c(){e=E("li"),s=U(n)},m(o,i){v(o,e,i),w(e,s)},p(o,i){i&4&&n!==(n=o[15]+"")&&Q(s,n)},d(o){o&&k(e)}}}function Go(t){let e,n,s=t[3].length+"",o,i,u,l,r=[],d=new Map,f=t[3];const c=a=>a[4].id;for(let a=0;a<f.length;a+=1){let _=Ho(t,f,a),m=c(_);d.set(m,r[a]=Yo(m,_))}return{c(){e=E("h3"),n=U("("),o=U(s),i=U(") Message queue:"),u=O(),l=E("ol");for(let a=0;a<r.length;a+=1)r[a].c()},m(a,_){v(a,e,_),w(e,n),w(e,o),w(e,i),v(a,u,_),v(a,l,_);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(l,null)},p(a,_){_&8&&s!==(s=a[3].length+"")&&Q(o,s),_&8&&(f=a[3],r=ze(r,_,c,1,a,f,d,l,Ai,Yo,null,Ho))},d(a){a&&k(e),a&&k(u),a&&k(l);for(let _=0;_<r.length;_+=1)r[_].d()}}}function md(t){let e;return{c(){e=U("skip")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function dd(t){let e;return{c(){e=U("remove")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function Yo(t,e){let n,s,o=e[4].text+"",i,u,l,r,d,f;function c(m,h){return m[14]>0?dd:md}let a=c(e),_=a(e);return{key:t,first:null,c(){n=E("li"),s=E("div"),i=U(o),u=O(),l=E("button"),_.c(),r=O(),N(l,"class","btn-small"),N(s,"class","gridd -columns"),this.first=n},m(m,h){v(m,n,h),w(n,s),w(s,i),w(s,u),w(s,l),_.m(l,null),w(n,r),d||(f=W(l,"click",function(){Ge(Kn(e[4].id))&&Kn(e[4].id).apply(this,arguments)}),d=!0)},p(m,h){e=m,h&8&&o!==(o=e[4].text+"")&&Q(i,o),a!==(a=c(e))&&(_.d(1),_=a(e),_&&(_.c(),_.m(l,null)))},d(m){m&&k(n),_.d(),d=!1,f()}}}function _d(t){let e,n,s,o,i,u,l,r,d,f,c,a,_,m,h,p,F,b,g=t[1]&&Ko(t),y=t[2].length>0&&Jo(t),A=t[3].length>0&&Go(t);return{c(){e=E("h2"),e.textContent="TTS",n=O(),s=E("button"),s.textContent="Show test data",o=O(),g&&g.c(),i=O(),u=E("form"),l=E("div"),r=U(`Message\r
        `),d=E("input"),f=O(),c=E("button"),c.textContent="Send test message",a=O(),_=E("br"),m=O(),y&&y.c(),h=O(),A&&A.c(),p=ue(),N(s,"class","btn-small"),N(d,"type","text"),N(d,"placeholder","test message"),N(l,"class","vertical-wrap svelte-rutzu0"),N(u,"class","grid -columns")},m(T,C){v(T,e,C),v(T,n,C),v(T,s,C),v(T,o,C),g&&g.m(T,C),v(T,i,C),v(T,u,C),w(u,l),w(l,r),w(l,d),Ve(d,t[4]),w(u,f),w(u,c),v(T,a,C),v(T,_,C),v(T,m,C),y&&y.m(T,C),v(T,h,C),A&&A.m(T,C),v(T,p,C),F||(b=[W(s,"click",t[6]),W(d,"input",t[10]),W(u,"submit",Ln(t[5]))],F=!0)},p(T,[C]){T[1]?g?g.p(T,C):(g=Ko(T),g.c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),C&16&&d.value!==T[4]&&Ve(d,T[4]),T[2].length>0?y?y.p(T,C):(y=Jo(T),y.c(),y.m(h.parentNode,h)):y&&(y.d(1),y=null),T[3].length>0?A?A.p(T,C):(A=Go(T),A.c(),A.m(p.parentNode,p)):A&&(A.d(1),A=null)},i:G,o:G,d(T){T&&k(e),T&&k(n),T&&k(s),T&&k(o),g&&g.d(T),T&&k(i),T&&k(u),T&&k(a),T&&k(_),T&&k(m),y&&y.d(T),T&&k(h),A&&A.d(T),T&&k(p),F=!1,oe(b)}}}const hd="broadcaster/1,subscriber/1";function Dd(t,e,n){let s,o;Dt(t,mn,p=>n(2,s=p)),Dt(t,$e,p=>n(3,o=p));const i={subscriber:"1"},u={...i,broadcaster:"1"};let l={"badge-info":i,badges:u,"badges-raw":hd,color:"#008000","display-name":"Tester",emotes:null,emotes_raw:null,"message-type":"chat",mod:!1,subscriber:!0,"user-id":0,"user-type":null,username:"tester"},r="",d=!1;function f(){n(0,l.id=crypto.randomUUID(),l),ad(l,r)}const c=()=>n(1,d=!d);function a(){l.username=this.value,n(0,l)}function _(){l.mod=this.checked,n(0,l)}function m(){l.subscriber=this.checked,n(0,l)}function h(){r=this.value,n(4,r)}return[l,d,s,o,r,f,c,a,_,m,h]}class pd extends ce{constructor(e){super(),ae(this,e,Dd,_d,le,{})}}function Jn(t,e=!1){return t=t.slice(t.startsWith("/#")?2:0,t.endsWith("/*")?-2:void 0),t.startsWith("/")||(t="/"+t),t==="/"&&(t=""),e&&!t.endsWith("/")&&(t+="/"),t}function gd(t,e){t=Jn(t,!0),e=Jn(e,!0);let n=[],s={},o=!0,i=t.split("/").map(l=>l.startsWith(":")?(n.push(l.slice(1)),"([^\\/]+)"):l).join("\\/"),u=e.match(new RegExp(`^${i}$`));return u||(o=!1,u=e.match(new RegExp(`^${i}`))),u?(n.forEach((l,r)=>s[l]=u[r+1]),{exact:o,params:s,part:u[0].slice(0,-1)}):null}function Mi(t,e,n){if(n==="")return t;if(n[0]==="/")return n;let s=u=>u.split("/").filter(l=>l!==""),o=s(t);return"/"+(e?s(e):[]).map((u,l)=>o[l]).join("/")+"/"+n}function Qo(t,e,n,s){let o=[e,"data-"+e].reduce((i,u)=>{let l=t.getAttribute(u);return n&&t.removeAttribute(u),l===null?i:l},!1);return!s&&o===""?!0:o||s||!1}function bd(t){let e=t.split("&").map(n=>n.split("=")).reduce((n,s)=>{let o=s[0];if(!o)return n;let i=s.length>1?s[s.length-1]:!0;return typeof i=="string"&&i.includes(",")&&(i=i.split(",")),n[o]===void 0?n[o]=[i]:n[o].push(i),n},{});return Object.entries(e).reduce((n,s)=>(n[s[0]]=s[1].length>1?s[1]:s[1][0],n),{})}function Fd(t){return Object.entries(t).map(([e,n])=>n?n===!0?e:`${e}=${Array.isArray(n)?n.join(","):n}`:null).filter(e=>e).join("&")}function Zo(t,e){return t?e+t:""}function Pi(t){throw new Error("[Tinro] "+t)}var Ie={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(t,e,n,s){return t===this.HISTORY?e&&e():t===this.HASH?n&&n():s&&s()},getDefault(){return!window||window.location.pathname==="srcdoc"?this.MEMORY:this.HISTORY}},es,Ui,zi,ln="",Se=Cd();function Cd(){let t=Ie.getDefault(),e,n=u=>window.onhashchange=window.onpopstate=es=null,s=u=>e&&e(In(t)),o=u=>{u&&(t=u),n(),t!==Ie.OFF&&Ie.run(t,l=>window.onpopstate=s,l=>window.onhashchange=s)&&s()},i=u=>{let l=Object.assign(In(t),u);return l.path+Zo(Fd(l.query),"?")+Zo(l.hash,"#")};return{mode:o,get:u=>In(t),go(u,l){kd(t,u,l),s()},start(u){e=u,o()},stop(){e=null,o(Ie.OFF)},set(u){this.go(i(u),!u.path)},methods(){return vd(this)},base:u=>ln=u}}function kd(t,e,n){!n&&(Ui=zi);let s=o=>history[`${n?"replace":"push"}State`]({},"",o);Ie.run(t,o=>s(ln+e),o=>s(`#${e}`),o=>es=e)}function In(t){let e=window.location,n=Ie.run(t,o=>(ln?e.pathname.replace(ln,""):e.pathname)+e.search+e.hash,o=>String(e.hash.slice(1)||"/"),o=>es||"/"),s=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return zi=n,{url:n,from:Ui,path:s[1]||"",query:bd(s[2]||""),hash:s[3]||""}}function vd(t){let e=()=>t.get().query,n=u=>t.set({query:u}),s=u=>n(u(e())),o=()=>t.get().hash,i=u=>t.set({hash:u});return{hash:{get:o,set:i,clear:()=>i("")},query:{replace:n,clear:()=>n(""),get(u){return u?e()[u]:e()},set(u,l){s(r=>(r[u]=l,r))},delete(u){s(l=>(l[u]&&delete l[u],l))}}}}var rn=wd();function wd(){let{subscribe:t}=Ft(Se.get(),e=>{Se.start(e);let n=Ed(Se.go);return()=>{Se.stop(),n()}});return{subscribe:t,goto:Se.go,params:yd,meta:Ad,useHashNavigation:e=>Se.mode(e?Ie.HASH:Ie.HISTORY),mode:{hash:()=>Se.mode(Ie.HASH),history:()=>Se.mode(Ie.HISTORY),memory:()=>Se.mode(Ie.MEMORY)},base:Se.base,location:Se.methods()}}function Ed(t){let e=n=>{let s=n.target.closest("a[href]"),o=s&&Qo(s,"target",!1,"_self"),i=s&&Qo(s,"tinro-ignore"),u=n.ctrlKey||n.metaKey||n.altKey||n.shiftKey;if(o=="_self"&&!i&&!u&&s){let l=s.getAttribute("href").replace(/^\/#/,"");/^\/\/|^#|^[a-zA-Z]+:/.test(l)||(n.preventDefault(),t(l.startsWith("/")?l:s.href.replace(window.location.origin,"")))}};return addEventListener("click",e),()=>removeEventListener("click",e)}function yd(){return Zn("tinro").meta.params}var an="tinro",Td=qi({pattern:"",matched:!0});function Bd(t){let e=Zn(an)||Td;(e.exact||e.fallback)&&Pi(`${t.fallback?"<Route fallback>":`<Route path="${t.path}">`}  can't be inside ${e.fallback?"<Route fallback>":`<Route path="${e.path||"/"}"> with exact path`}`);let n=t.fallback?"fallbacks":"childs",s=Ft({}),o=qi({fallback:t.fallback,parent:e,update(i){o.exact=!i.path.endsWith("/*"),o.pattern=Jn(`${o.parent.pattern||""}${i.path}`),o.redirect=i.redirect,o.firstmatch=i.firstmatch,o.breadcrumb=i.breadcrumb,o.match()},register:()=>(o.parent[n].add(o),async()=>{o.parent[n].delete(o),o.parent.activeChilds.delete(o),o.router.un&&o.router.un(),o.parent.match()}),show:()=>{t.onShow(),!o.fallback&&o.parent.activeChilds.add(o)},hide:()=>{t.onHide(),o.parent.activeChilds.delete(o)},match:async()=>{o.matched=!1;let{path:i,url:u,from:l,query:r}=o.router.location,d=gd(o.pattern,i);if(!o.fallback&&d&&o.redirect&&(!o.exact||o.exact&&d.exact)){let f=Mi(i,o.parent.pattern,o.redirect);return rn.goto(f,!0)}o.meta=d&&{from:l,url:u,query:r,match:d.part,pattern:o.pattern,breadcrumbs:o.parent.meta&&o.parent.meta.breadcrumbs.slice()||[],params:d.params,subscribe:s.subscribe},o.breadcrumb&&o.meta&&o.meta.breadcrumbs.push({name:o.breadcrumb,path:d.part}),s.set(o.meta),d&&!o.fallback&&(!o.exact||o.exact&&d.exact)&&(!o.parent.firstmatch||!o.parent.matched)?(t.onMeta(o.meta),o.parent.matched=!0,o.show()):o.hide(),d&&o.showFallbacks()}});return Ju(an,o),Qn(()=>o.register()),o}function Ad(){return Vu(an)?Zn(an).meta:Pi("meta() function must be run inside any `<Route>` child component only")}function qi(t){let e={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await Gu(),this.childs.size>0&&this.activeChilds.size==0||this.childs.size==0&&this.fallbacks.size>0)){let n=this;for(;n.fallbacks.size==0;)if(n=n.parent,!n)return;n&&n.fallbacks.forEach(s=>{if(s.redirect){let o=Mi("/",s.parent.pattern,s.redirect);rn.goto(o,!0)}else s.show()})}},start(){this.router.un||(this.router.un=rn.subscribe(n=>{this.router.location=n,this.pattern!==null&&this.match()}))},match(){this.showFallbacks()}};return Object.assign(e,t),e.start(),e}const Sd=t=>({params:t&2,meta:t&4}),Xo=t=>({params:t[1],meta:t[2]});function xo(t){let e;const n=t[9].default,s=ve(n,t,t[8],Xo);return{c(){s&&s.c()},m(o,i){s&&s.m(o,i),e=!0},p(o,i){s&&s.p&&(!e||i&262)&&Ee(s,n,o,o[8],e?we(n,o[8],i,Sd):ye(o[8]),Xo)},i(o){e||(L(s,o),e=!0)},o(o){R(s,o),e=!1},d(o){s&&s.d(o)}}}function Id(t){let e,n,s=t[0]&&xo(t);return{c(){s&&s.c(),e=ue()},m(o,i){s&&s.m(o,i),v(o,e,i),n=!0},p(o,[i]){o[0]?s?(s.p(o,i),i&1&&L(s,1)):(s=xo(o),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(te(),R(s,1,1,()=>{s=null}),ne())},i(o){n||(L(s),n=!0)},o(o){R(s),n=!1},d(o){s&&s.d(o),o&&k(e)}}}function jd(t,e,n){let{$$slots:s={},$$scope:o}=e,{path:i="/*"}=e,{fallback:u=!1}=e,{redirect:l=!1}=e,{firstmatch:r=!1}=e,{breadcrumb:d=null}=e,f=!1,c={},a={};const _=Bd({fallback:u,onShow(){n(0,f=!0)},onHide(){n(0,f=!1)},onMeta(m){n(2,a=m),n(1,c=a.params)}});return t.$$set=m=>{"path"in m&&n(3,i=m.path),"fallback"in m&&n(4,u=m.fallback),"redirect"in m&&n(5,l=m.redirect),"firstmatch"in m&&n(6,r=m.firstmatch),"breadcrumb"in m&&n(7,d=m.breadcrumb),"$$scope"in m&&n(8,o=m.$$scope)},t.$$.update=()=>{t.$$.dirty&232&&_.update({path:i,redirect:l,firstmatch:r,breadcrumb:d})},[f,c,a,i,u,l,r,d,o,s]}class Nd extends ce{constructor(e){super(),ae(this,e,jd,Id,le,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}}var Hi={exports:{}};const Ld={},Od=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"})),Vn=td(Od);var Wi={exports:{}};const Rd=/^\u0001ACTION ([^\u0001]+)\u0001$/,Md=/^(justinfan)(\d+$)/,Pd=/\\([sn:r\\])/g,Ud=/([ \n;\r\\])/g,$o={s:" ",n:"",":":";",r:""},ei={" ":"s","\n":"n",";":":","\r":"r"},zd=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),qd=/[|\\^$*+?:#]/,tn=Wi.exports={get:(t,e)=>typeof t>"u"?e:t,hasOwn:(t,e)=>({}).hasOwnProperty.call(t,e),promiseDelay:t=>new Promise(e=>setTimeout(e,t)),isFinite:t=>isFinite(t)&&!isNaN(parseFloat(t)),toNumber(t,e){if(t===null)return 0;const n=Math.pow(10,tn.isFinite(e)?e:0);return Math.round(t*n)/n},isInteger:t=>!isNaN(tn.toNumber(t,0)),isRegex:t=>qd.test(t),isURL:t=>zd.test(t),justinfan:()=>`justinfan${Math.floor(Math.random()*8e4+1e3)}`,isJustinfan:t=>Md.test(t),channel(t){const e=(t||"").toLowerCase();return e[0]==="#"?e:"#"+e},username(t){const e=(t||"").toLowerCase();return e[0]==="#"?e.slice(1):e},token:t=>t?t.toLowerCase().replace("oauth:",""):"",password(t){const e=tn.token(t);return e?`oauth:${e}`:""},actionMessage:t=>t.match(Rd),replaceAll(t,e){if(t===null||typeof t>"u")return null;for(const n in e)t=t.replace(new RegExp(n,"g"),e[n]);return t},unescapeHtml:t=>t.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(t){return!t||typeof t!="string"||!t.includes("\\")?t:t.replace(Pd,(e,n)=>n in $o?$o[n]:n)},escapeIRC(t){return!t||typeof t!="string"?t:t.replace(Ud,(e,n)=>n in ei?`\\${ei[n]}`:n)},addWord:(t,e)=>t.length?t+" "+e:t+e,splitLine(t,e){let n=t.substring(0,e).lastIndexOf(" ");return n===-1&&(n=e-1),[t.substring(0,n),t.substring(n+1)]},extractNumber(t){const e=t.split(" ");for(let n=0;n<e.length;n++)if(tn.isInteger(e[n]))return~~e[n];return 0},formatDate(t){let e=t.getHours(),n=t.getMinutes();return e=(e<10?"0":"")+e,n=(n<10?"0":"")+n,`${e}:${n}`},inherits(t,e){t.super_=e;const n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},isNode(){try{return typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"}catch{}return!1}};var Ot=Wi.exports;const Hd=Vn,ti=Ot;var Wd=function(e,n){let s=e.url!==void 0?e.url:e.uri;if(ti.isURL(s)||(s=`https://api.twitch.tv/kraken${s[0]==="/"?s:`/${s}`}`),ti.isNode()){const o=Object.assign({method:"GET",json:!0},e);if(o.qs){const r=new URLSearchParams(o.qs);s+=`?${r}`}const i={};"fetchAgent"in this.opts.connection&&(i.agent=this.opts.connection.fetchAgent);const u=Hd(s,{...i,method:o.method,headers:o.headers,body:o.body});let l={};u.then(r=>(l={statusCode:r.status,headers:r.headers},o.json?r.json():r.text())).then(r=>n(null,l,r),r=>n(r,l,null))}else{const o=Object.assign({method:"GET",headers:{}},e,{url:s}),i=new XMLHttpRequest;i.open(o.method,o.url,!0);for(const u in o.headers)i.setRequestHeader(u,o.headers[u]);i.responseType="json",i.addEventListener("load",u=>{i.readyState===4&&(i.status!==200?n(i.status,null,null):n(null,null,i.response))}),i.send()}};const J=Ot;function ni(t,e){return t=J.channel(t),e=J.get(e,30),this._sendCommand(null,t,`/followers ${e}`,(n,s)=>{this.once("_promiseFollowers",o=>{o?s(o):n([t,~~e])})})}function si(t){return t=J.channel(t),this._sendCommand(null,t,"/followersoff",(e,n)=>{this.once("_promiseFollowersoff",s=>{s?n(s):e([t])})})}function oi(t){return t=J.channel(t),this._sendCommand(null,null,`PART ${t}`,(e,n)=>{this.once("_promisePart",s=>{s?n(s):e([t])})})}function ii(t){return t=J.channel(t),this._sendCommand(null,t,"/r9kbeta",(e,n)=>{this.once("_promiseR9kbeta",s=>{s?n(s):e([t])})})}function ui(t){return t=J.channel(t),this._sendCommand(null,t,"/r9kbetaoff",(e,n)=>{this.once("_promiseR9kbetaoff",s=>{s?n(s):e([t])})})}function li(t,e){return t=J.channel(t),e=J.get(e,300),this._sendCommand(null,t,`/slow ${e}`,(n,s)=>{this.once("_promiseSlow",o=>{o?s(o):n([t,~~e])})})}function ri(t){return t=J.channel(t),this._sendCommand(null,t,"/slowoff",(e,n)=>{this.once("_promiseSlowoff",s=>{s?n(s):e([t])})})}var Kd={action(t,e){return t=J.channel(t),e=`ACTION ${e}`,this._sendMessage(this._getPromiseDelay(),t,e,(n,s)=>{n([t,e])})},ban(t,e,n){return t=J.channel(t),e=J.username(e),n=J.get(n,""),this._sendCommand(null,t,`/ban ${e} ${n}`,(s,o)=>{this.once("_promiseBan",i=>{i?o(i):s([t,e,n])})})},clear(t){return t=J.channel(t),this._sendCommand(null,t,"/clear",(e,n)=>{this.once("_promiseClear",s=>{s?n(s):e([t])})})},color(t,e){return e=J.get(e,t),this._sendCommand(null,"#tmijs",`/color ${e}`,(n,s)=>{this.once("_promiseColor",o=>{o?s(o):n([e])})})},commercial(t,e){return t=J.channel(t),e=J.get(e,30),this._sendCommand(null,t,`/commercial ${e}`,(n,s)=>{this.once("_promiseCommercial",o=>{o?s(o):n([t,~~e])})})},deletemessage(t,e){return t=J.channel(t),this._sendCommand(null,t,`/delete ${e}`,(n,s)=>{this.once("_promiseDeletemessage",o=>{o?s(o):n([t])})})},emoteonly(t){return t=J.channel(t),this._sendCommand(null,t,"/emoteonly",(e,n)=>{this.once("_promiseEmoteonly",s=>{s?n(s):e([t])})})},emoteonlyoff(t){return t=J.channel(t),this._sendCommand(null,t,"/emoteonlyoff",(e,n)=>{this.once("_promiseEmoteonlyoff",s=>{s?n(s):e([t])})})},followersonly:ni,followersmode:ni,followersonlyoff:si,followersmodeoff:si,host(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(2e3,t,`/host ${e}`,(n,s)=>{this.once("_promiseHost",(o,i)=>{o?s(o):n([t,e,~~i])})})},join(t){return t=J.channel(t),this._sendCommand(void 0,null,`JOIN ${t}`,(e,n)=>{const s="_promiseJoin";let o=!1;const i=(l,r)=>{t===J.channel(r)&&(this.removeListener(s,i),o=!0,l?n(l):e([t]))};this.on(s,i);const u=this._getPromiseDelay();J.promiseDelay(u).then(()=>{o||this.emit(s,"No response from Twitch.",t)})})},mod(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(null,t,`/mod ${e}`,(n,s)=>{this.once("_promiseMod",o=>{o?s(o):n([t,e])})})},mods(t){return t=J.channel(t),this._sendCommand(null,t,"/mods",(e,n)=>{this.once("_promiseMods",(s,o)=>{s?n(s):(o.forEach(i=>{this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(i)||this.moderators[t].push(i)}),e(o))})})},part:oi,leave:oi,ping(){return this._sendCommand(null,null,"PING",(t,e)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},J.get(this.opts.connection.timeout,9999)),this.once("_promisePing",n=>t([parseFloat(n)]))})},r9kbeta:ii,r9kmode:ii,r9kbetaoff:ui,r9kmodeoff:ui,raw(t){return this._sendCommand(null,null,t,(e,n)=>{e([t])})},say(t,e){return t=J.channel(t),e.startsWith(".")&&!e.startsWith("..")||e.startsWith("/")||e.startsWith("\\")?e.substr(1,3)==="me "?this.action(t,e.substr(4)):this._sendCommand(null,t,e,(n,s)=>{n([t,e])}):this._sendMessage(this._getPromiseDelay(),t,e,(n,s)=>{n([t,e])})},slow:li,slowmode:li,slowoff:ri,slowmodeoff:ri,subscribers(t){return t=J.channel(t),this._sendCommand(null,t,"/subscribers",(e,n)=>{this.once("_promiseSubscribers",s=>{s?n(s):e([t])})})},subscribersoff(t){return t=J.channel(t),this._sendCommand(null,t,"/subscribersoff",(e,n)=>{this.once("_promiseSubscribersoff",s=>{s?n(s):e([t])})})},timeout(t,e,n,s){return t=J.channel(t),e=J.username(e),n!==null&&!J.isInteger(n)&&(s=n,n=300),n=J.get(n,300),s=J.get(s,""),this._sendCommand(null,t,`/timeout ${e} ${n} ${s}`,(o,i)=>{this.once("_promiseTimeout",u=>{u?i(u):o([t,e,~~n,s])})})},unban(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(null,t,`/unban ${e}`,(n,s)=>{this.once("_promiseUnban",o=>{o?s(o):n([t,e])})})},unhost(t){return t=J.channel(t),this._sendCommand(2e3,t,"/unhost",(e,n)=>{this.once("_promiseUnhost",s=>{s?n(s):e([t])})})},unmod(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(null,t,`/unmod ${e}`,(n,s)=>{this.once("_promiseUnmod",o=>{o?s(o):n([t,e])})})},unvip(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(null,t,`/unvip ${e}`,(n,s)=>{this.once("_promiseUnvip",o=>{o?s(o):n([t,e])})})},vip(t,e){return t=J.channel(t),e=J.username(e),this._sendCommand(null,t,`/vip ${e}`,(n,s)=>{this.once("_promiseVip",o=>{o?s(o):n([t,e])})})},vips(t){return t=J.channel(t),this._sendCommand(null,t,"/vips",(e,n)=>{this.once("_promiseVips",(s,o)=>{s?n(s):e(o)})})},whisper(t,e){return t=J.username(t),t===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${t} ${e}`,(n,s)=>{this.once("_promiseWhisper",o=>{o&&s(o)})}).catch(n=>{if(n&&typeof n=="string"&&n.indexOf("No response from Twitch.")!==0)throw n;const s=J.channel(t),o=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[s,o,e,!0],[s,o,e,!0]]),[t,e]})}};function me(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Jd=me;me.EventEmitter=me;me.prototype._events=void 0;me.prototype._maxListeners=void 0;me.defaultMaxListeners=10;me.prototype.setMaxListeners=function(t){if(!Vd(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};me.prototype.emit=function(t){var e,n,s,o,i,u;if(this._events||(this._events={}),t==="error"&&(!this._events.error||jt(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[t],Ki(n))return!1;if(Ue(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(jt(n))for(o=Array.prototype.slice.call(arguments,1),u=n.slice(),s=u.length,i=0;i<s;i++)u[i].apply(this,o);return!0};me.prototype.addListener=function(t,e){var n;if(!Ue(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Ue(e.listener)?e.listener:e),this._events[t]?jt(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,jt(this._events[t])&&!this._events[t].warned&&(Ki(this._maxListeners)?n=me.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};me.prototype.on=me.prototype.addListener;me.prototype.once=function(t,e){if(!Ue(e))throw TypeError("listener must be a function");var n=!1;if(this._events.hasOwnProperty(t)&&t.charAt(0)==="_"){var s=1,o=t;for(var i in this._events)this._events.hasOwnProperty(i)&&i.startsWith(o)&&s++;t=t+s}function u(){t.charAt(0)==="_"&&!isNaN(t.substr(t.length-1))&&(t=t.substring(0,t.length-1)),this.removeListener(t,u),n||(n=!0,e.apply(this,arguments))}return u.listener=e,this.on(t,u),this};me.prototype.removeListener=function(t,e){var n,s,o,i;if(!Ue(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,s=-1,n===e||Ue(n.listener)&&n.listener===e){if(delete this._events[t],this._events.hasOwnProperty(t+"2")&&t.charAt(0)==="_"){var u=t;for(var l in this._events)this._events.hasOwnProperty(l)&&l.startsWith(u)&&(isNaN(parseInt(l.substr(l.length-1)))||(this._events[t+parseInt(l.substr(l.length-1)-1)]=this._events[l],delete this._events[l]));this._events[t]=this._events[t+"1"],delete this._events[t+"1"]}this._events.removeListener&&this.emit("removeListener",t,e)}else if(jt(n)){for(i=o;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){s=i;break}if(s<0)return this;n.length===1?(n.length=0,delete this._events[t]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};me.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],Ue(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this};me.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:Ue(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};me.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(Ue(e))return 1;if(e)return e.length}return 0};me.listenerCount=function(t,e){return t.listenerCount(e)};function Ue(t){return typeof t=="function"}function Vd(t){return typeof t=="number"}function jt(t){return typeof t=="object"&&t!==null}function Ki(t){return t===void 0}const Gd=Ot;let Ji="info";const ai={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function ft(t){return function(e){ai[t]>=ai[Ji]&&console.log(`[${Gd.formatDate(new Date)}] ${t}: ${e}`)}}var Yd={setLevel(t){Ji=t},trace:ft("trace"),debug:ft("debug"),info:ft("info"),warn:ft("warn"),error:ft("error"),fatal:ft("fatal")};const jn=Ot,mt=/\S+/g;function Nn(t,e,n=",",s="/",o){const i=t[e];if(i===void 0)return t;const u=typeof i=="string";if(t[e+"-raw"]=u?i:null,i===!0)return t[e]=null,t;if(t[e]={},u){const l=i.split(n);for(let r=0;r<l.length;r++){const d=l[r].split(s);let f=d[1];o!==void 0&&f&&(f=f.split(o)),t[e][d[0]]=f||null}}return t}var Qd={badges:t=>Nn(t,"badges"),badgeInfo:t=>Nn(t,"badge-info"),emotes:t=>Nn(t,"emotes","/",":",","),emoteRegex(t,e,n,s){mt.lastIndex=0;const o=new RegExp("(\\b|^|\\s)"+jn.unescapeHtml(e)+"(\\b|$|\\s)");let i;for(;(i=mt.exec(t))!==null;)o.test(i[0])&&(s[n]=s[n]||[],s[n].push([i.index,mt.lastIndex-1]))},emoteString(t,e,n,s){mt.lastIndex=0;let o;for(;(o=mt.exec(t))!==null;)o[0]===jn.unescapeHtml(e)&&(s[n]=s[n]||[],s[n].push([o.index,mt.lastIndex-1]))},transformEmotes(t){let e="";return Object.keys(t).forEach(n=>{e=`${e+n}:`,t[n].forEach(s=>e=`${e+s.join("-")},`),e=`${e.slice(0,-1)}/`}),e.slice(0,-1)},formTags(t){const e=[];for(const n in t){const s=jn.escapeIRC(t[n]);e.push(`${n}=${s}`)}return`@${e.join(";")}`},msg(t){const e={raw:t,tags:{},prefix:null,command:null,params:[]};let n=0,s=0;if(t.charCodeAt(0)===64){if(s=t.indexOf(" "),s===-1)return null;const o=t.slice(1,s).split(";");for(let i=0;i<o.length;i++){const u=o[i],l=u.split("=");e.tags[l[0]]=u.substring(u.indexOf("=")+1)||!0}n=s+1}for(;t.charCodeAt(n)===32;)n++;if(t.charCodeAt(n)===58){if(s=t.indexOf(" ",n),s===-1)return null;for(e.prefix=t.slice(n+1,s),n=s+1;t.charCodeAt(n)===32;)n++}if(s=t.indexOf(" ",n),s===-1)return t.length>n?(e.command=t.slice(n),e):null;for(e.command=t.slice(n,s),n=s+1;t.charCodeAt(n)===32;)n++;for(;n<t.length;){if(s=t.indexOf(" ",n),t.charCodeAt(n)===58){e.params.push(t.slice(n+1));break}if(s!==-1){for(e.params.push(t.slice(n,s)),n=s+1;t.charCodeAt(n)===32;)n++;continue}if(s===-1){e.params.push(t.slice(n));break}}return e}};class Zd{constructor(e){this.queue=[],this.index=0,this.defaultDelay=e===void 0?3e3:e}add(e,n){this.queue.push({fn:e,delay:n})}next(){const e=this.index++,n=this.queue[e];if(!n)return;const s=this.queue[this.index];if(n.fn(),s){const o=s.delay===void 0?this.defaultDelay:s.delay;setTimeout(()=>this.next(),o)}}}var Xd=Zd;(function(t){const e=typeof qo<"u"?qo:typeof window<"u"?window:{},n=e.WebSocket||Vn,s=e.fetch||Vn,o=Wd,i=Kd,u=Jd.EventEmitter,l=Yd,r=Qd,d=Xd,f=Ot;let c=!1;const a=function _(m){if(!(this instanceof _))return new _(m);this.opts=f.get(m,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=f.get(this.opts.options.clientId,null),this._globalDefaultChannel=f.channel(f.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=f.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=f.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=f.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=f.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=f.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=f.get(this.opts.connection.reconnect,!0),this.reconnectDecay=f.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=f.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=f.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let h="error";this.opts.options.debug&&(h="info"),this.log=this.opts.logger||l;try{l.setLevel(h)}catch{}this.opts.channels.forEach((p,F,b)=>b[F]=f.channel(p)),u.call(this),this.setMaxListeners(0)};f.inherits(a,u);for(const _ in i)a.prototype[_]=i[_];a.prototype.emits=function(m,h){for(let p=0;p<m.length;p++){const F=p<h.length?h[p]:h[h.length-1];this.emit.apply(this,[m[p]].concat(F))}},a.prototype.api=function(..._){c||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),c=!0),o(..._)},a.prototype.handleMessage=function(m){if(!m)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(m)),m);const h=f.channel(f.get(m.params[0],null));let p=f.get(m.params[1],null);const F=f.get(m.tags["msg-id"],null),b=m.tags=r.badges(r.badgeInfo(r.emotes(m.tags)));for(const g in b){if(g==="emote-sets"||g==="ban-duration"||g==="bits")continue;let y=b[g];typeof y=="boolean"?y=null:y==="1"?y=!0:y==="0"?y=!1:typeof y=="string"&&(y=f.unescapeIRC(y)),b[g]=y}if(m.prefix===null)switch(m.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const g=new Date;this.currentLatency=(g.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:
${JSON.stringify(m,null,4)}`);break}else if(m.prefix==="tmi.twitch.tv")switch(m.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=m.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))},f.get(this.opts.connection.timeout,9999))},6e4);let g=f.get(this.opts.options.joinInterval,2e3);g<300&&(g=300);const y=new d(g),A=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let T=0;T<A.length;T++){const C=A[T];y.add(()=>{this._isConnected()&&this.join(C).catch(S=>this.log.error(S))})}y.next();break}case"NOTICE":{const g=[null],y=[h,F,p],A=[F],T=[h,!0],C=[h,!1],S=[y,g],j=[y,A],B=`[${h}] ${p}`;switch(F){case"subs_on":this.log.info(`[${h}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[T,T,g]);break;case"subs_off":this.log.info(`[${h}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[C,C,g]);break;case"emote_only_on":this.log.info(`[${h}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[T,g]);break;case"emote_only_off":this.log.info(`[${h}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[C,g]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${h}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[T,T,g]);break;case"r9k_off":this.log.info(`[${h}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[C,C,g]);break;case"room_mods":{const I=p.split(": "),z=(I.length>1?I[1]:"").toLowerCase().split(", ").filter(q=>q);this.emits(["_promiseMods","mods"],[[null,z],[h,z]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[h,[]]]);break;case"vips_success":{p.endsWith(".")&&(p=p.slice(0,-1));const I=p.split(": "),z=(I.length>1?I[1]:"").toLowerCase().split(", ").filter(q=>q);this.emits(["_promiseVips","vips"],[[null,z],[h,z]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[h,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(B),this.emits(["notice","_promiseBan"],j);break;case"ban_success":this.log.info(B),this.emits(["notice","_promiseBan"],S);break;case"usage_clear":this.log.info(B),this.emits(["notice","_promiseClear"],j);break;case"usage_mods":this.log.info(B),this.emits(["notice","_promiseMods"],[y,[F,[]]]);break;case"mod_success":this.log.info(B),this.emits(["notice","_promiseMod"],S);break;case"usage_vips":this.log.info(B),this.emits(["notice","_promiseVips"],[y,[F,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(B),this.emits(["notice","_promiseVip"],[y,[F,[]]]);break;case"vip_success":this.log.info(B),this.emits(["notice","_promiseVip"],S);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(B),this.emits(["notice","_promiseMod"],j);break;case"unmod_success":this.log.info(B),this.emits(["notice","_promiseUnmod"],S);break;case"unvip_success":this.log.info(B),this.emits(["notice","_promiseUnvip"],S);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(B),this.emits(["notice","_promiseUnmod"],j);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(B),this.emits(["notice","_promiseUnvip"],j);break;case"color_changed":this.log.info(B),this.emits(["notice","_promiseColor"],S);break;case"usage_color":case"turbo_only_color":this.log.info(B),this.emits(["notice","_promiseColor"],j);break;case"commercial_success":this.log.info(B),this.emits(["notice","_promiseCommercial"],S);break;case"usage_commercial":case"bad_commercial_error":this.log.info(B),this.emits(["notice","_promiseCommercial"],j);break;case"hosts_remaining":{this.log.info(B);const I=isNaN(p[0])?0:parseInt(p[0]);this.emits(["notice","_promiseHost"],[y,[null,~~I]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(B),this.emits(["notice","_promiseHost"],[y,[F,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(B),this.emits(["notice","_promiseR9kbeta"],j);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(B),this.emits(["notice","_promiseR9kbetaoff"],j);break;case"timeout_success":this.log.info(B),this.emits(["notice","_promiseTimeout"],S);break;case"delete_message_success":this.log.info(`[${h} ${p}]`),this.emits(["notice","_promiseDeletemessage"],S);break;case"already_subs_off":case"usage_subs_off":this.log.info(B),this.emits(["notice","_promiseSubscribersoff"],j);break;case"already_subs_on":case"usage_subs_on":this.log.info(B),this.emits(["notice","_promiseSubscribers"],j);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(B),this.emits(["notice","_promiseEmoteonlyoff"],j);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(B),this.emits(["notice","_promiseEmoteonly"],j);break;case"usage_slow_on":this.log.info(B),this.emits(["notice","_promiseSlow"],j);break;case"usage_slow_off":this.log.info(B),this.emits(["notice","_promiseSlowoff"],j);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(B),this.emits(["notice","_promiseTimeout"],j);break;case"untimeout_success":case"unban_success":this.log.info(B),this.emits(["notice","_promiseUnban"],S);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(B),this.emits(["notice","_promiseUnban"],j);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(B),this.emits(["notice","_promiseDeletemessage"],j);break;case"usage_unhost":case"not_hosting":this.log.info(B),this.emits(["notice","_promiseUnhost"],j);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(B),this.emits(["notice","_promiseWhisper"],j);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(B),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[y,[F,h]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(B),this.emit("automod",h,F,p);break;case"unrecognized_cmd":this.log.info(B),this.emit("notice",h,F,p);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(B),this.emit("notice",h,F,p);break;case"host_on":case"host_off":break;default:p.includes("Login unsuccessful")||p.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=p,this.log.error(this.reason),this.ws.close()):p.includes("Error logging in")||p.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=p,this.log.error(this.reason),this.ws.close()):p.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:
${JSON.stringify(m,null,4)}`),this.emit("notice",h,F,p));break}break}case"USERNOTICE":{const g=b["display-name"]||b.login,y=b["msg-param-sub-plan"]||"",A=f.unescapeIRC(f.get(b["msg-param-sub-plan-name"],""))||null,C={prime:y.includes("Prime"),plan:y,planName:A},S=~~(b["msg-param-streak-months"]||0),j=b["msg-param-recipient-display-name"]||b["msg-param-recipient-user-name"],B=~~b["msg-param-mass-gift-count"];switch(b["message-type"]=F,F){case"resub":this.emits(["resub","subanniversary"],[[h,g,S,p,b,C]]);break;case"sub":this.emits(["subscription","sub"],[[h,g,C,p,b]]);break;case"subgift":this.emit("subgift",h,g,S,j,C,b);break;case"anonsubgift":this.emit("anonsubgift",h,S,j,C,b);break;case"submysterygift":this.emit("submysterygift",h,g,B,C,b);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",h,B,C,b);break;case"primepaidupgrade":this.emit("primepaidupgrade",h,g,C,b);break;case"giftpaidupgrade":{const I=b["msg-param-sender-name"]||b["msg-param-sender-login"];this.emit("giftpaidupgrade",h,g,I,b);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",h,g,b);break;case"raid":{const I=b["msg-param-displayName"]||b["msg-param-login"],z=+b["msg-param-viewerCount"];this.emit("raided",h,I,z,b);break}case"ritual":{const I=b["msg-param-ritual-name"];switch(I){case"new_chatter":this.emit("newchatter",h,g,b,p);break;default:this.emit("ritual",I,h,g,b,p);break}break}default:this.emit("usernotice",F,h,b,p);break}break}case"HOSTTARGET":{const g=p.split(" "),y=~~g[1]||0;g[0]==="-"?(this.log.info(`[${h}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[h,y],[null]])):(this.log.info(`[${h}] Now hosting ${g[0]} for ${y} viewer(s).`),this.emit("hosting",h,g[0],y));break}case"CLEARCHAT":if(m.params.length>1){const g=f.get(m.tags["ban-duration"],null);g===null?(this.log.info(`[${h}] ${p} has been banned.`),this.emit("ban",h,p,null,m.tags)):(this.log.info(`[${h}] ${p} has been timed out for ${g} seconds.`),this.emit("timeout",h,p,null,~~g,m.tags))}else this.log.info(`[${h}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[h],[null]]);break;case"CLEARMSG":if(m.params.length>1){const g=p,y=b.login;b["message-type"]="messagedeleted",this.log.info(`[${h}] ${y}'s message has been deleted.`),this.emit("messagedeleted",h,y,g,b)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch(g=>this.log.error(g)),setTimeout(()=>this.connect().catch(g=>this.log.error(g)),this.reconnectTimer);break;case"USERSTATE":m.tags.username=this.username,m.tags["user-type"]==="mod"&&(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].includes(this.username)||this.moderators[h].push(this.username)),!f.isJustinfan(this.getUsername())&&!this.userstate[h]&&(this.userstate[h]=b,this.lastJoined=h,this.channels.push(h),this.log.info(`Joined ${h}`),this.emit("join",h,f.username(this.getUsername()),!0)),m.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(m.tags["emote-sets"]),this.userstate[h]=b;break;case"GLOBALUSERSTATE":this.globaluserstate=b,this.emit("globaluserstate",b),typeof m.tags["emote-sets"]<"u"&&this._updateEmoteset(m.tags["emote-sets"]);break;case"ROOMSTATE":if(f.channel(this.lastJoined)===h&&this.emit("_promiseJoin",null,h),m.tags.channel=h,this.emit("roomstate",h,m.tags),!f.hasOwn(m.tags,"subs-only")){if(f.hasOwn(m.tags,"slow"))if(typeof m.tags.slow=="boolean"&&!m.tags.slow){const g=[h,!1,0];this.log.info(`[${h}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[g,g,[null]])}else{const g=~~m.tags.slow,y=[h,!0,g];this.log.info(`[${h}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[y,y,[null]])}if(f.hasOwn(m.tags,"followers-only"))if(m.tags["followers-only"]==="-1"){const g=[h,!1,0];this.log.info(`[${h}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[g,g,[null]])}else{const g=~~m.tags["followers-only"],y=[h,!0,g];this.log.info(`[${h}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[y,y,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:
${JSON.stringify(m,null,4)}`);break}else if(m.prefix==="jtv")switch(m.command){case"MODE":p==="+o"?(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].includes(m.params[2])||this.moderators[h].push(m.params[2]),this.emit("mod",h,m.params[2])):p==="-o"&&(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].filter(g=>g!==m.params[2]),this.emit("unmod",h,m.params[2]));break;default:this.log.warn(`Could not parse message from jtv:
${JSON.stringify(m,null,4)}`);break}else switch(m.command){case"353":this.emit("names",m.params[2],m.params[3].split(" "));break;case"366":break;case"JOIN":{const g=m.prefix.split("!")[0];f.isJustinfan(this.getUsername())&&this.username===g&&(this.lastJoined=h,this.channels.push(h),this.log.info(`Joined ${h}`),this.emit("join",h,g,!0)),this.username!==g&&this.emit("join",h,g,!1);break}case"PART":{let g=!1;const y=m.prefix.split("!")[0];if(this.username===y){g=!0,this.userstate[h]&&delete this.userstate[h];let A=this.channels.indexOf(h);A!==-1&&this.channels.splice(A,1),A=this.opts.channels.indexOf(h),A!==-1&&this.opts.channels.splice(A,1),this.log.info(`Left ${h}`),this.emit("_promisePart",null)}this.emit("part",h,y,g);break}case"WHISPER":{const g=m.prefix.split("!")[0];this.log.info(`[WHISPER] <${g}>: ${p}`),f.hasOwn(m.tags,"username")||(m.tags.username=g),m.tags["message-type"]="whisper";const y=f.channel(m.tags.username);this.emits(["whisper","message"],[[y,m.tags,p,!1]]);break}case"PRIVMSG":if(m.tags.username=m.prefix.split("!")[0],m.tags.username==="jtv"){const g=f.username(p.split(" ")[0]),y=p.includes("auto");if(p.includes("hosting you for")){const A=f.extractNumber(p);this.emit("hosted",h,g,A,y)}else p.includes("hosting you")&&this.emit("hosted",h,g,0,y)}else{const g=f.get(this.opts.options.messagesLogLevel,"info"),y=f.actionMessage(p);if(m.tags["message-type"]=y?"action":"chat",p=y?y[1]:p,f.hasOwn(m.tags,"bits"))this.emit("cheer",h,m.tags,p);else{if(f.hasOwn(m.tags,"msg-id")){if(m.tags["msg-id"]==="highlighted-message"){const A=m.tags["msg-id"];this.emit("redeem",h,m.tags.username,A,m.tags,p)}else if(m.tags["msg-id"]==="skip-subs-mode-message"){const A=m.tags["msg-id"];this.emit("redeem",h,m.tags.username,A,m.tags,p)}}else if(f.hasOwn(m.tags,"custom-reward-id")){const A=m.tags["custom-reward-id"];this.emit("redeem",h,m.tags.username,A,m.tags,p)}y?(this.log[g](`[${h}] *<${m.tags.username}>: ${p}`),this.emits(["action","message"],[[h,m.tags,p,!1]])):(this.log[g](`[${h}] <${m.tags.username}>: ${p}`),this.emits(["chat","message"],[[h,m.tags,p,!1]]))}}break;default:this.log.warn(`Could not parse message:
${JSON.stringify(m,null,4)}`);break}},a.prototype.connect=function(){return new Promise((m,h)=>{this.server=f.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=f.get(this.opts.connection.port,80),this.secure&&(this.port=443),this.port===443&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",p=>{p?h(p):m([this.server,~~this.port])})})},a.prototype._openConnection=function(){const m=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,h={};"agent"in this.opts.connection&&(h.agent=this.opts.connection.agent),this.ws=new n(m,"irc",h),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},a.prototype._onOpen=function(){this._isConnected()&&(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=f.get(this.opts.identity.username,f.justinfan()),this._getToken().then(m=>{const h=f.password(m);this.log.info("Sending authentication to server.."),this.emit("logon");let p="twitch.tv/tags twitch.tv/commands";this._skipMembership||(p+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+p),h?this.ws.send(`PASS ${h}`):f.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)}).catch(m=>{this.emits(["_promiseConnect","disconnected"],[[m],["Could not get a token."]])}))},a.prototype._getToken=function(){const m=this.opts.identity.password;let h;return typeof m=="function"?(h=m(),h instanceof Promise?h:Promise.resolve(h)):Promise.resolve(m)},a.prototype._onMessage=function(m){m.data.trim().split(`\r
`).forEach(p=>{const F=r.msg(p);F&&this.handleMessage(F)})},a.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=this.ws===null?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(m=>this.log.error(m))},this.reconnectTimer)),this.ws=null},a.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(m=>this.log.error(m))},this.reconnectTimer))),this.ws=null},a.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},a.prototype._sendCommand=function(m,h,p,F){return new Promise((b,g)=>{if(this._isConnected())(m===null||typeof m=="number")&&(m===null&&(m=this._getPromiseDelay()),f.promiseDelay(m).then(()=>g("No response from Twitch.")));else return g("Not connected to server.");if(h!==null){const y=f.channel(h);this.log.info(`[${y}] Executing command: ${p}`),this.ws.send(`PRIVMSG ${y} :${p}`)}else this.log.info(`Executing command: ${p}`),this.ws.send(p);typeof F=="function"?F(b,g):b()})},a.prototype._sendMessage=function(m,h,p,F){return new Promise((b,g)=>{if(this._isConnected()){if(f.isJustinfan(this.getUsername()))return g("Cannot send anonymous messages.")}else return g("Not connected to server.");const y=f.channel(h);if(this.userstate[y]||(this.userstate[y]={}),p.length>=500){const j=f.splitLine(p,500);p=j[0],setTimeout(()=>{this._sendMessage(m,h,j[1],()=>{})},350)}this.ws.send(`PRIVMSG ${y} :${p}`);const A={};Object.keys(this.emotesets).forEach(j=>this.emotesets[j].forEach(B=>(f.isRegex(B.code)?r.emoteRegex:r.emoteString)(p,B.code,B.id,A)));const T=Object.assign(this.userstate[y],r.emotes({emotes:r.transformEmotes(A)||null})),C=f.get(this.opts.options.messagesLogLevel,"info"),S=f.actionMessage(p);S?(T["message-type"]="action",this.log[C](`[${y}] *<${this.getUsername()}>: ${S[1]}`),this.emits(["action","message"],[[y,T,S[1],!0]])):(T["message-type"]="chat",this.log[C](`[${y}] <${this.getUsername()}>: ${p}`),this.emits(["chat","message"],[[y,T,p,!0]])),typeof F=="function"?F(b,g):b()})},a.prototype._updateEmoteset=function(m){let h=m!==void 0;if(h&&(m===this.emotes?h=!1:this.emotes=m),this._skipUpdatingEmotesets){h&&this.emit("emotesets",m,{});return}const p=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout(()=>this._updateEmoteset(m),this._updateEmotesetsTimerDelay))};this._getToken().then(F=>{const b=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${m}`,g={};return"fetchAgent"in this.opts.connection&&(g.agent=this.opts.connection.fetchAgent),s(b,{...g,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${f.token(F)}`,"Client-ID":this.clientId}})}).then(F=>F.json()).then(F=>{this.emotesets=F.emoticon_sets||{},this.emit("emotesets",m,this.emotesets),p()}).catch(()=>p())},a.prototype.getUsername=function(){return this.username},a.prototype.getOptions=function(){return this.opts},a.prototype.getChannels=function(){return this.channels},a.prototype.isMod=function(m,h){const p=f.channel(m);return this.moderators[p]||(this.moderators[p]=[]),this.moderators[p].includes(f.username(h))},a.prototype.readyState=function(){return this.ws===null?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},a.prototype._isConnected=function(){return this.ws!==null&&this.ws.readyState===1},a.prototype.disconnect=function(){return new Promise((m,h)=>{this.ws!==null&&this.ws.readyState!==3?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>m([this.server,~~this.port]))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),h("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},a.prototype.off=a.prototype.removeListener,t.exports&&(t.exports=a),typeof window<"u"&&(window.tmi={client:a,Client:a})})(Hi);var xd=Hi.exports;const ci=xd;var $d={client:ci,Client:ci};const e_=Ni($d);function fi(t){let e;return{c(){e=U("TTS")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function t_(t){let e;return{c(){e=U("Show settings")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function n_(t){let e;return{c(){e=U("Hide settings")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function mi(t){let e,n;return e=new ed({}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function di(t){let e,n,s,o,i,u;function l(c,a){return c[2]?o_:s_}let r=l(t),d=r(t),f=t[2]&&_i();return{c(){e=E("button"),d.c(),n=O(),f&&f.c(),s=ue(),N(e,"class","btn-small")},m(c,a){v(c,e,a),d.m(e,null),v(c,n,a),f&&f.m(c,a),v(c,s,a),o=!0,i||(u=W(e,"click",t[4]),i=!0)},p(c,a){r!==(r=l(c))&&(d.d(1),d=r(c),d&&(d.c(),d.m(e,null))),c[2]?f?a&4&&L(f,1):(f=_i(),f.c(),L(f,1),f.m(s.parentNode,s)):f&&(te(),R(f,1,1,()=>{f=null}),ne())},i(c){o||(L(f),o=!0)},o(c){R(f),o=!1},d(c){c&&k(e),d.d(),c&&k(n),f&&f.d(c),c&&k(s),i=!1,u()}}}function s_(t){let e;return{c(){e=U("Show TTS")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function o_(t){let e;return{c(){e=U("Hide TTS")},m(n,s){v(n,e,s)},d(n){n&&k(e)}}}function _i(t){let e,n;return e=new pd({}),{c(){ee(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function i_(t){let e,n,s,o,i,u,l,r,d,f,c,a=t[0].data.use_tts&&fi();function _(b,g){return b[1]?n_:t_}let m=_(t),h=m(t),p=t[1]&&mi(),F=t[0].data.use_tts&&di(t);return{c(){e=E("h1"),n=U(`Twitch chat\r
\r
            `),a&&a.c(),s=U(`\r
\r
            overlay`),o=O(),i=E("button"),h.c(),u=O(),p&&p.c(),l=O(),F&&F.c(),r=ue(),N(i,"class","btn-small")},m(b,g){v(b,e,g),w(e,n),a&&a.m(e,null),w(e,s),v(b,o,g),v(b,i,g),h.m(i,null),v(b,u,g),p&&p.m(b,g),v(b,l,g),F&&F.m(b,g),v(b,r,g),d=!0,f||(c=W(i,"click",t[3]),f=!0)},p(b,g){b[0].data.use_tts?a||(a=fi(),a.c(),a.m(e,s)):a&&(a.d(1),a=null),m!==(m=_(b))&&(h.d(1),h=m(b),h&&(h.c(),h.m(i,null))),b[1]?p?g&2&&L(p,1):(p=mi(),p.c(),L(p,1),p.m(l.parentNode,l)):p&&(te(),R(p,1,1,()=>{p=null}),ne()),b[0].data.use_tts?F?(F.p(b,g),g&1&&L(F,1)):(F=di(b),F.c(),L(F,1),F.m(r.parentNode,r)):F&&(te(),R(F,1,1,()=>{F=null}),ne())},i(b){d||(L(p),L(F),d=!0)},o(b){R(p),R(F),d=!1},d(b){b&&k(e),a&&a.d(),b&&k(o),b&&k(i),h.d(),b&&k(u),p&&p.d(b),b&&k(l),F&&F.d(b),b&&k(r),f=!1,c()}}}function u_(t){let e,n,s;return n=new Nd({props:{path:"/",$$slots:{default:[i_]},$$scope:{ctx:t}}}),{c(){e=E("main"),ee(n.$$.fragment),N(e,"class","container-fluid")},m(o,i){v(o,e,i),x(n,e,null),s=!0},p(o,[i]){const u={};i&263&&(u.$$scope={dirty:i,ctx:o}),n.$set(u)},i(o){s||(L(n.$$.fragment,o),s=!0)},o(o){R(n.$$.fragment,o),s=!1},d(o){o&&k(e),$(n)}}}function l_(t,e,n){let s;Dt(t,Me,c=>n(0,s=c)),rn.mode.memory();let o=!1,i=!1,u=new e_.Client({channels:[]}),l=!1;u.on("message",Ri),u.on("messagedeleted",(c,a,_,m)=>{console.log("deleted data:",m,"username:",a);const{"target-msg-id":h}=m;Kn(h)}),u.on("roomstate",(c,a)=>{console.log("room state:",a),Bm(c.replace("#",""),a==null?void 0:a["room-id"])});const r=wm(async c=>{if(typeof c=="object"&&({channel:c}=c),!!c&&!u.getChannels().includes(`#${c.toLowerCase()}`)){if(!l)await u.connect(),l=!0;else for(const a of u.getChannels())await u.part(a),console.log("Left channel",a);await u.join(c),console.log("Joined channel",c)}},1500);Qn(()=>{const c=(m="unknown error")=>{const h='<svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24"><title>Error</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>';window.toast.push(`${h} <span>${m}</span>`)},a=m=>{m.preventDefault(),console.error(m),c(m==null?void 0:m.reason)},_=m=>{m.preventDefault(),console.error(m),c(m==null?void 0:m.message)};return window.addEventListener("unhandledrejection",a),window.addEventListener("error",_),()=>{window.removeEventListener("unhandledrejection",a),window.removeEventListener("error",_)}});const d=()=>n(1,o=!o),f=()=>n(2,i=!i);return t.$$.update=()=>{t.$$.dirty&1&&r(s.data.channel)},[s,o,i,d,f]}class r_ extends ce{constructor(e){super(),ae(this,e,l_,u_,le,{})}}new r_({target:document.getElementById("app")});
